(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();var X,w,Ue,N,ke,We,Ve,ze,me,ae,ce,U={},Ke=[],ct=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Z=Array.isArray;function $(t,e){for(var n in e)t[n]=e[n];return t}function ge(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function _t(t,e,n){var o,i,r,s={};for(r in e)r=="key"?o=e[r]:r=="ref"?i=e[r]:s[r]=e[r];if(arguments.length>2&&(s.children=arguments.length>3?X.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(r in t.defaultProps)s[r]===void 0&&(s[r]=t.defaultProps[r]);return q(t,s,o,i,null)}function q(t,e,n,o,i){var r={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++Ue,__i:-1,__u:0};return i==null&&w.vnode!=null&&w.vnode(r),r}function ee(t){return t.children}function G(t,e){this.props=t,this.context=e}function O(t,e){if(e==null)return t.__?O(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?O(t):null}function qe(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return qe(t)}}function Ee(t){(!t.__d&&(t.__d=!0)&&N.push(t)&&!Y.__r++||ke!=w.debounceRendering)&&((ke=w.debounceRendering)||We)(Y)}function Y(){for(var t,e,n,o,i,r,s,c=1;N.length;)N.length>c&&N.sort(Ve),t=N.shift(),c=N.length,t.__d&&(n=void 0,o=void 0,i=(o=(e=t).__v).__e,r=[],s=[],e.__P&&((n=$({},o)).__v=o.__v+1,w.vnode&&w.vnode(n),ye(e.__P,n,o,e.__n,e.__P.namespaceURI,32&o.__u?[i]:null,r,i??O(o),!!(32&o.__u),s),n.__v=o.__v,n.__.__k[n.__i]=n,Ye(r,n,s),o.__e=o.__=null,n.__e!=i&&qe(n)));Y.__r=0}function Ge(t,e,n,o,i,r,s,c,l,_,d){var a,h,f,y,L,v,b,p=o&&o.__k||Ke,C=e.length;for(l=lt(n,e,p,l,C),a=0;a<C;a++)(f=n.__k[a])!=null&&(h=f.__i==-1?U:p[f.__i]||U,f.__i=a,v=ye(t,f,h,i,r,s,c,l,_,d),y=f.__e,f.ref&&h.ref!=f.ref&&(h.ref&&ve(h.ref,null,f),d.push(f.ref,f.__c||y,f)),L==null&&y!=null&&(L=y),(b=!!(4&f.__u))||h.__k===f.__k?l=Qe(f,l,t,b):typeof f.type=="function"&&v!==void 0?l=v:y&&(l=y.nextSibling),f.__u&=-7);return n.__e=L,l}function lt(t,e,n,o,i){var r,s,c,l,_,d=n.length,a=d,h=0;for(t.__k=new Array(i),r=0;r<i;r++)(s=e[r])!=null&&typeof s!="boolean"&&typeof s!="function"?(typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?s=t.__k[r]=q(null,s,null,null,null):Z(s)?s=t.__k[r]=q(ee,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?s=t.__k[r]=q(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):t.__k[r]=s,l=r+h,s.__=t,s.__b=t.__b+1,c=null,(_=s.__i=ut(s,n,l,a))!=-1&&(a--,(c=n[_])&&(c.__u|=2)),c==null||c.__v==null?(_==-1&&(i>d?h--:i<d&&h++),typeof s.type!="function"&&(s.__u|=4)):_!=l&&(_==l-1?h--:_==l+1?h++:(_>l?h--:h++,s.__u|=4))):t.__k[r]=null;if(a)for(r=0;r<d;r++)(c=n[r])!=null&&(2&c.__u)==0&&(c.__e==o&&(o=O(c)),Xe(c,c));return o}function Qe(t,e,n,o){var i,r;if(typeof t.type=="function"){for(i=t.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=t,e=Qe(i[r],e,n,o));return e}t.__e!=e&&(o&&(e&&t.type&&!e.parentNode&&(e=O(t)),n.insertBefore(t.__e,e||null)),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function ut(t,e,n,o){var i,r,s,c=t.key,l=t.type,_=e[n],d=_!=null&&(2&_.__u)==0;if(_===null&&c==null||d&&c==_.key&&l==_.type)return n;if(o>(d?1:0)){for(i=n-1,r=n+1;i>=0||r<e.length;)if((_=e[s=i>=0?i--:r++])!=null&&(2&_.__u)==0&&c==_.key&&l==_.type)return s}return-1}function Le(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||ct.test(e)?n:n+"px"}function K(t,e,n,o,i){var r,s;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||Le(t.style,e,"");if(n)for(e in n)o&&n[e]==o[e]||Le(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")r=e!=(e=e.replace(ze,"$1")),s=e.toLowerCase(),e=s in t||e=="onFocusOut"||e=="onFocusIn"?s.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+r]=n,n?o?n.u=o.u:(n.u=me,t.addEventListener(e,r?ce:ae,r)):t.removeEventListener(e,r?ce:ae,r);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function Ie(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=me++;else if(e.t<n.u)return;return n(w.event?w.event(e):e)}}}function ye(t,e,n,o,i,r,s,c,l,_){var d,a,h,f,y,L,v,b,p,C,x,T,M,V,B,A,R,S=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(l=!!(32&n.__u),r=[c=e.__e=n.__e]),(d=w.__b)&&d(e);e:if(typeof S=="function")try{if(b=e.props,p="prototype"in S&&S.prototype.render,C=(d=S.contextType)&&o[d.__c],x=d?C?C.props.value:d.__:o,n.__c?v=(a=e.__c=n.__c).__=a.__E:(p?e.__c=a=new S(b,x):(e.__c=a=new G(b,x),a.constructor=S,a.render=ft),C&&C.sub(a),a.state||(a.state={}),a.__n=o,h=a.__d=!0,a.__h=[],a._sb=[]),p&&a.__s==null&&(a.__s=a.state),p&&S.getDerivedStateFromProps!=null&&(a.__s==a.state&&(a.__s=$({},a.__s)),$(a.__s,S.getDerivedStateFromProps(b,a.__s))),f=a.props,y=a.state,a.__v=e,h)p&&S.getDerivedStateFromProps==null&&a.componentWillMount!=null&&a.componentWillMount(),p&&a.componentDidMount!=null&&a.__h.push(a.componentDidMount);else{if(p&&S.getDerivedStateFromProps==null&&b!==f&&a.componentWillReceiveProps!=null&&a.componentWillReceiveProps(b,x),e.__v==n.__v||!a.__e&&a.shouldComponentUpdate!=null&&a.shouldComponentUpdate(b,a.__s,x)===!1){for(e.__v!=n.__v&&(a.props=b,a.state=a.__s,a.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(u){u&&(u.__=e)}),T=0;T<a._sb.length;T++)a.__h.push(a._sb[T]);a._sb=[],a.__h.length&&s.push(a);break e}a.componentWillUpdate!=null&&a.componentWillUpdate(b,a.__s,x),p&&a.componentDidUpdate!=null&&a.__h.push(function(){a.componentDidUpdate(f,y,L)})}if(a.context=x,a.props=b,a.__P=t,a.__e=!1,M=w.__r,V=0,p){for(a.state=a.__s,a.__d=!1,M&&M(e),d=a.render(a.props,a.state,a.context),B=0;B<a._sb.length;B++)a.__h.push(a._sb[B]);a._sb=[]}else do a.__d=!1,M&&M(e),d=a.render(a.props,a.state,a.context),a.state=a.__s;while(a.__d&&++V<25);a.state=a.__s,a.getChildContext!=null&&(o=$($({},o),a.getChildContext())),p&&!h&&a.getSnapshotBeforeUpdate!=null&&(L=a.getSnapshotBeforeUpdate(f,y)),A=d,d!=null&&d.type===ee&&d.key==null&&(A=Je(d.props.children)),c=Ge(t,Z(A)?A:[A],e,n,o,i,r,s,c,l,_),a.base=e.__e,e.__u&=-161,a.__h.length&&s.push(a),v&&(a.__E=a.__=null)}catch(u){if(e.__v=null,l||r!=null)if(u.then){for(e.__u|=l?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;r[r.indexOf(c)]=null,e.__e=c}else{for(R=r.length;R--;)ge(r[R]);_e(e)}else e.__e=n.__e,e.__k=n.__k,u.then||_e(e);w.__e(u,e,n)}else r==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):c=e.__e=dt(n.__e,e,n,o,i,r,s,l,_);return(d=w.diffed)&&d(e),128&e.__u?void 0:c}function _e(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(_e)}function Ye(t,e,n){for(var o=0;o<n.length;o++)ve(n[o],n[++o],n[++o]);w.__c&&w.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(r){r.call(i)})}catch(r){w.__e(r,i.__v)}})}function Je(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:Z(t)?t.map(Je):$({},t)}function dt(t,e,n,o,i,r,s,c,l){var _,d,a,h,f,y,L,v=n.props||U,b=e.props,p=e.type;if(p=="svg"?i="http://www.w3.org/2000/svg":p=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),r!=null){for(_=0;_<r.length;_++)if((f=r[_])&&"setAttribute"in f==!!p&&(p?f.localName==p:f.nodeType==3)){t=f,r[_]=null;break}}if(t==null){if(p==null)return document.createTextNode(b);t=document.createElementNS(i,p,b.is&&b),c&&(w.__m&&w.__m(e,r),c=!1),r=null}if(p==null)v===b||c&&t.data==b||(t.data=b);else{if(r=r&&X.call(t.childNodes),!c&&r!=null)for(v={},_=0;_<t.attributes.length;_++)v[(f=t.attributes[_]).name]=f.value;for(_ in v)if(f=v[_],_!="children"){if(_=="dangerouslySetInnerHTML")a=f;else if(!(_ in b)){if(_=="value"&&"defaultValue"in b||_=="checked"&&"defaultChecked"in b)continue;K(t,_,null,f,i)}}for(_ in b)f=b[_],_=="children"?h=f:_=="dangerouslySetInnerHTML"?d=f:_=="value"?y=f:_=="checked"?L=f:c&&typeof f!="function"||v[_]===f||K(t,_,f,v[_],i);if(d)c||a&&(d.__html==a.__html||d.__html==t.innerHTML)||(t.innerHTML=d.__html),e.__k=[];else if(a&&(t.innerHTML=""),Ge(e.type=="template"?t.content:t,Z(h)?h:[h],e,n,o,p=="foreignObject"?"http://www.w3.org/1999/xhtml":i,r,s,r?r[0]:n.__k&&O(n,0),c,l),r!=null)for(_=r.length;_--;)ge(r[_]);c||(_="value",p=="progress"&&y==null?t.removeAttribute("value"):y!=null&&(y!==t[_]||p=="progress"&&!y||p=="option"&&y!=v[_])&&K(t,_,y,v[_],i),_="checked",L!=null&&L!=t[_]&&K(t,_,L,v[_],i))}return t}function ve(t,e,n){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&e==null||(t.__u=t(e))}else t.current=e}catch(i){w.__e(i,n)}}function Xe(t,e,n){var o,i;if(w.unmount&&w.unmount(t),(o=t.ref)&&(o.current&&o.current!=t.__e||ve(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(r){w.__e(r,e)}o.base=o.__P=null}if(o=t.__k)for(i=0;i<o.length;i++)o[i]&&Xe(o[i],e,n||typeof t.type!="function");n||ge(t.__e),t.__c=t.__=t.__e=void 0}function ft(t,e,n){return this.constructor(t,n)}function ht(t,e,n){var o,i,r,s;e==document&&(e=document.documentElement),w.__&&w.__(t,e),i=(o=!1)?null:e.__k,r=[],s=[],ye(e,t=e.__k=_t(ee,null,[t]),i||U,U,e.namespaceURI,i?null:e.firstChild?X.call(e.childNodes):null,r,i?i.__e:e.firstChild,o,s),Ye(r,t,s)}X=Ke.slice,w={__e:function(t,e,n,o){for(var i,r,s;e=e.__;)if((i=e.__c)&&!i.__)try{if((r=i.constructor)&&r.getDerivedStateFromError!=null&&(i.setState(r.getDerivedStateFromError(t)),s=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,o||{}),s=i.__d),s)return i.__E=i}catch(c){t=c}throw t}},Ue=0,G.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=$({},this.state),typeof t=="function"&&(t=t($({},n),this.props)),t&&$(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),Ee(this))},G.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Ee(this))},G.prototype.render=ee,N=[],We=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ve=function(t,e){return t.__v.__b-e.__v.__b},Y.__r=0,ze=/(PointerCapture)$|Capture$/i,me=0,ae=Ie(!1),ce=Ie(!0);var pt=0;function m(t,e,n,o,i,r){e||(e={});var s,c,l=e;if("ref"in l)for(c in l={},e)c=="ref"?s=e[c]:l[c]=e[c];var _={type:t,props:l,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--pt,__i:-1,__u:0,__source:i,__self:r};if(typeof t=="function"&&(s=t.defaultProps))for(c in s)l[c]===void 0&&(l[c]=s[c]);return w.vnode&&w.vnode(_),_}const mt="modulepreload",gt=function(t,e){return new URL(t,e).href},Pe={},yt=function(e,n,o){let i=Promise.resolve();if(n&&n.length>0){let s=function(d){return Promise.all(d.map(a=>Promise.resolve(a).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};const c=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),_=l?.nonce||l?.getAttribute("nonce");i=s(n.map(d=>{if(d=gt(d,o),d in Pe)return;Pe[d]=!0;const a=d.endsWith(".css"),h=a?'[rel="stylesheet"]':"";if(!!o)for(let L=c.length-1;L>=0;L--){const v=c[L];if(v.href===d&&(!a||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${h}`))return;const y=document.createElement("link");if(y.rel=a?"stylesheet":mt,a||(y.as="script"),y.crossOrigin="",y.href=d,_&&y.setAttribute("nonce",_),document.head.appendChild(y),a)return new Promise((L,v)=>{y.addEventListener("load",L),y.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${d}`)))})}))}function r(s){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=s,window.dispatchEvent(c),!c.defaultPrevented)throw s}return i.then(s=>{for(const c of s||[])c.status==="rejected"&&r(c.reason);return e().catch(r)})};var W,E,re,Se,J=0,Ze=[],I=w,Ce=I.__b,xe=I.__r,De=I.diffed,$e=I.__c,Te=I.unmount,Me=I.__;function be(t,e){I.__h&&I.__h(E,t,J||e),J=0;var n=E.__H||(E.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function D(t){return J=1,vt(nt,t)}function vt(t,e,n){var o=be(W++,2);if(o.t=t,!o.__c&&(o.__=[nt(void 0,e),function(c){var l=o.__N?o.__N[0]:o.__[0],_=o.t(l,c);l!==_&&(o.__N=[_,o.__[1]],o.__c.setState({}))}],o.__c=E,!E.__f)){var i=function(c,l,_){if(!o.__c.__H)return!0;var d=o.__c.__H.__.filter(function(h){return!!h.__c});if(d.every(function(h){return!h.__N}))return!r||r.call(this,c,l,_);var a=o.__c.props!==c;return d.forEach(function(h){if(h.__N){var f=h.__[0];h.__=h.__N,h.__N=void 0,f!==h.__[0]&&(a=!0)}}),r&&r.call(this,c,l,_)||a};E.__f=!0;var r=E.shouldComponentUpdate,s=E.componentWillUpdate;E.componentWillUpdate=function(c,l,_){if(this.__e){var d=r;r=void 0,i(c,l,_),r=d}s&&s.call(this,c,l,_)},E.shouldComponentUpdate=i}return o.__N||o.__}function Ae(t,e){var n=be(W++,3);!I.__s&&tt(n.__H,e)&&(n.__=t,n.u=e,E.__H.__h.push(n))}function bt(t){return J=5,et(function(){return{current:t}},[])}function et(t,e){var n=be(W++,7);return tt(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function wt(){for(var t;t=Ze.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Q),t.__H.__h.forEach(le),t.__H.__h=[]}catch(e){t.__H.__h=[],I.__e(e,t.__v)}}I.__b=function(t){E=null,Ce&&Ce(t)},I.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Me&&Me(t,e)},I.__r=function(t){xe&&xe(t),W=0;var e=(E=t.__c).__H;e&&(re===E?(e.__h=[],E.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(Q),e.__h.forEach(le),e.__h=[],W=0)),re=E},I.diffed=function(t){De&&De(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ze.push(e)!==1&&Se===I.requestAnimationFrame||((Se=I.requestAnimationFrame)||kt)(wt)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),re=E=null},I.__c=function(t,e){e.some(function(n){try{n.__h.forEach(Q),n.__h=n.__h.filter(function(o){return!o.__||le(o)})}catch(o){e.some(function(i){i.__h&&(i.__h=[])}),e=[],I.__e(o,n.__v)}}),$e&&$e(t,e)},I.unmount=function(t){Te&&Te(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{Q(o)}catch(i){e=i}}),n.__H=void 0,e&&I.__e(e,n.__v))};var Ne=typeof requestAnimationFrame=="function";function kt(t){var e,n=function(){clearTimeout(o),Ne&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,35);Ne&&(e=requestAnimationFrame(n))}function Q(t){var e=E,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),E=e}function le(t){var e=E;t.__c=t.__(),E=e}function tt(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function nt(t,e){return typeof e=="function"?e(t):e}async function Et(){const t=await fetch("./demo-trainings.json",{credentials:"same-origin"});if(!t.ok)throw new Error(`Failed to load demo-trainings.json (${t.status})`);const e=await t.json();if(!Array.isArray(e))throw new Error("demo-trainings.json is not an array");return e}function rt(t){return t.toLowerCase().replace(/[^a-z0-9]+/gi," ").trim().split(/\s+/).filter(e=>e.length>=2)}function He(t){const e=new Map,n=[];let o=0;for(const i of t){const r=rt(i.searchText),s=new Map;for(const l of r)s.set(l,(s.get(l)??0)+1);for(const l of s.keys())e.set(l,(e.get(l)??0)+1);const c=r.length;o+=c,n.push({record:i,tf:s,len:c})}return{docs:n,df:e,avgLen:n.length?o/n.length:0,n:n.length}}function Lt(t,e){const i=rt(e),r=new Map;for(const s of t.docs){let c=0;for(const l of i){const _=s.tf.get(l)??0;if(!_)continue;const d=t.df.get(l)??0,a=Math.log(1+(t.n-d+.5)/(d+.5)),h=_+1.2*(1-.75+.75*s.len/(t.avgLen||1));c+=a*(_*(1.2+1)/h)}c>0&&r.set(s.record.id,c)}return r}function It(t,e){return t.filter(n=>{if(e.modality&&n.modality!==e.modality)return!1;if(e.language){const o=e.language.toLowerCase();if(!n.languages.some(i=>i.toLowerCase()===o))return!1}if(e.platform){const o=e.platform.toLowerCase();if(!n.platform.toLowerCase().includes(o))return!1}if(e.audienceContains){const o=e.audienceContains.toLowerCase();if(!n.intendedAudience.toLowerCase().includes(o))return!1}return!0})}function Pt(t,e,n){const o=Lt(n,e),i=[];for(const r of t){const s=o.get(r.id)??0;if(s<=0)continue;const c=[];r.learningName.toLowerCase().includes(e.toLowerCase())&&c.push("title match"),i.push({record:r,score:s,reasons:c})}return i.sort((r,s)=>s.score-r.score),i}const ue=(t,e)=>e.some(n=>t instanceof n);let Be,Oe;function St(){return Be||(Be=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ct(){return Oe||(Oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const de=new WeakMap,oe=new WeakMap,te=new WeakMap;function xt(t){const e=new Promise((n,o)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{n(H(t.result)),i()},s=()=>{o(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",s)});return te.set(e,t),e}function Dt(t){if(de.has(t))return;const e=new Promise((n,o)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{n(),i()},s=()=>{o(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)});de.set(t,e)}let fe={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return de.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return H(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ot(t){fe=t(fe)}function $t(t){return Ct().includes(t)?function(...e){return t.apply(he(this),e),H(this.request)}:function(...e){return H(t.apply(he(this),e))}}function Tt(t){return typeof t=="function"?$t(t):(t instanceof IDBTransaction&&Dt(t),ue(t,St())?new Proxy(t,fe):t)}function H(t){if(t instanceof IDBRequest)return xt(t);if(oe.has(t))return oe.get(t);const e=Tt(t);return e!==t&&(oe.set(t,e),te.set(e,t)),e}const he=t=>te.get(t);function Mt(t,e,{blocked:n,upgrade:o,blocking:i,terminated:r}={}){const s=indexedDB.open(t,e),c=H(s);return o&&s.addEventListener("upgradeneeded",l=>{o(H(s.result),l.oldVersion,l.newVersion,H(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),c.then(l=>{r&&l.addEventListener("close",()=>r()),i&&l.addEventListener("versionchange",_=>i(_.oldVersion,_.newVersion,_))}).catch(()=>{}),c}const At=["get","getKey","getAll","getAllKeys","count"],Nt=["put","add","delete","clear"],ie=new Map;function Re(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ie.get(e))return ie.get(e);const n=e.replace(/FromIndex$/,""),o=e!==n,i=Nt.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(i||At.includes(n)))return;const r=async function(s,...c){const l=this.transaction(s,i?"readwrite":"readonly");let _=l.store;return o&&(_=_.index(c.shift())),(await Promise.all([_[n](...c),i&&l.done]))[0]};return ie.set(e,r),r}ot(t=>({...t,get:(e,n,o)=>Re(e,n)||t.get(e,n,o),has:(e,n)=>!!Re(e,n)||t.has(e,n)}));const Ht=["continue","continuePrimaryKey","advance"],Fe={},pe=new WeakMap,it=new WeakMap,Bt={get(t,e){if(!Ht.includes(e))return t[e];let n=Fe[e];return n||(n=Fe[e]=function(...o){pe.set(this,it.get(this)[e](...o))}),n}};async function*Ot(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const n=new Proxy(e,Bt);for(it.set(n,e),te.set(n,he(e));e;)yield n,e=await(pe.get(n)||e.continue()),pe.delete(n)}function je(t,e){return e===Symbol.asyncIterator&&ue(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&ue(t,[IDBIndex,IDBObjectStore])}ot(t=>({...t,get(e,n,o){return je(e,n)?Ot:t.get(e,n,o)},has(e,n){return je(e,n)||t.has(e,n)}}));const Rt="who-training-finder-db",Ft=1,st="trainings";async function at(){return Mt(Rt,Ft,{upgrade(t){t.objectStoreNames.contains("trainings")||t.createObjectStore("trainings"),t.objectStoreNames.contains("embeddings")||t.createObjectStore("embeddings")}})}async function jt(){return(await(await at()).get("trainings",st))?.records??null}async function Ut(t){await(await at()).put("trainings",{updatedAt:Date.now(),records:t},st)}const se={dataSource:"demo_json",sharepoint:{siteRelativeUrl:"/sites/EuroWCPHE",listTitle:"Copytraininglist2912026"},searchMode:"fast",embeddingModel:"bge-small",allowRemoteModels:!0,modelsBasePath:"./models"};function Wt(){const[t,e]=D(null),[n,o]=D(null),[i,r]=D("idle"),[s,c]=D(0),[l,_]=D("Initializing..."),[d,a]=D(!1),[h,f]=D([]),[y,L]=D(""),[v,b]=D(null),[p,C]=D(null),x=bt(null);Ae(()=>{x.current?.scrollIntoView({behavior:"smooth"})},[h.length,v]);const T=et(()=>i==="ready",[i]);Ae(()=>{M()},[]);async function M(){r("data"),_("Loading training data..."),c(5);try{const u=await jt();u&&u.length&&(e(u),o(He(u)),c(15));const k=se.dataSource==="demo_json"?await Et():await V();e(k),o(He(k)),await Ut(k),c(30)}catch(u){console.error("Failed to load data:",u),f([{role:"bot",text:"Error loading training data. Please refresh the page."}]);return}c(100),r("ready"),_(""),f([{role:"bot",text:"Hello! Tell me what training you're looking for - describe the topic, your goals, preferred language, or format (online/in-person)."}])}async function V(){const{fetchAllListItems:u}=await yt(async()=>{const{fetchAllListItems:k}=await import("./sharepoint-BSZBMNpd.js");return{fetchAllListItems:k}},[],import.meta.url);return u({siteRelativeUrl:se.sharepoint.siteRelativeUrl,listTitle:se.sharepoint.listTitle})}async function B(u){if(!t||!n)return;const k=h.length;f(ne=>[...ne,{role:"bot",text:"Searching...",isLoading:!0}]);const g=A(u);C(g);const P=It(t,{modality:g.modality,language:g.language,platform:g.platform,audienceContains:g.audience});let F;F=Pt(P,g.topic,n);const j=F.slice(0,10);b(j);const z=R(g,F.length);f(ne=>{const we=[...ne];return we[k]={role:"bot",text:z},we})}function A(u){const k=u.toLowerCase();let g=u;const P={topic:u,rawQuery:u},F=["english","french","spanish","russian","arabic","portuguese","chinese","ukrainian","polish"];for(const j of F){const z=new RegExp(`\\b(in\\s+)?${j}\\b`,"gi");if(z.test(k)){P.language=j.charAt(0).toUpperCase()+j.slice(1),g=g.replace(z,"");break}}return/\bonline\b|e-learning/i.test(k)?(P.modality="online",g=g.replace(/\bonline\b|e-learning/gi,"")):/\bin[- ]person\b/i.test(k)?(P.modality="in_person",g=g.replace(/\bin[- ]person\b/gi,"")):/\bblended\b/i.test(k)&&(P.modality="blended",g=g.replace(/\bblended\b/gi,"")),/openwho/i.test(k)?(P.platform="OpenWHO",g=g.replace(/openwho/gi,"")):/who academy/i.test(k)?(P.platform="WHO Academy",g=g.replace(/who academy/gi,"")):/hslp/i.test(k)&&(P.platform="HSLP",g=g.replace(/hslp/gi,"")),/member state|ministry/i.test(k)?P.audience="Member":/who staff/i.test(k)&&(P.audience="WHO"),g=g.replace(/\b(i need|i want|i'm looking for|looking for|find me|show me|a training|training|about|on|for)\b/gi,"").replace(/\s+/g," ").trim(),P.topic=g||"health emergency",P}function R(u,k){if(k===0)return`I couldn't find any trainings matching "${u.topic}". Try broadening your search.`;const g=[];u.language&&g.push(`in ${u.language}`),u.modality&&g.push(u.modality.replace("_","-")),u.platform&&g.push(`on ${u.platform}`);const P=g.length?` (${g.join(", ")})`:"";return`Found ${k} training(s) for "${u.topic}"${P}:`}async function S(){const u=y.trim();!u||!T||(L(""),f(k=>[...k,{role:"user",text:u}]),await B(u))}return m("div",{class:"embed-container",children:[i!=="ready"&&m("div",{class:"loading-overlay",children:m("div",{class:"loading-content",children:[m("div",{class:"loading-title",children:"WHO Training Finder"}),m("div",{class:"loading-bar-container",children:m("div",{class:"loading-bar",style:{width:`${s}%`}})}),m("div",{class:"loading-text",children:l}),m("div",{class:"loading-percent",children:[s,"%"]})]})}),m("div",{class:`embed-main ${i!=="ready"?"hidden":""}`,children:[m("div",{class:"embed-header",children:m("span",{class:"embed-title",children:"WHO Training Finder"})}),m("div",{class:"embed-chat",children:[m("div",{class:"embed-messages",children:[h.map((u,k)=>m("div",{class:`embed-message ${u.role} ${u.isLoading?"loading":""}`,children:[u.isLoading&&m("span",{class:"spinner"}),u.text]},k)),m("div",{ref:x})]}),m("div",{class:"embed-composer",children:[m("input",{type:"text",value:y,placeholder:"Describe the training you need...",disabled:!T,onInput:u=>L(u.target.value),onKeyDown:u=>{u.key==="Enter"&&S()}}),m("button",{class:"embed-send",disabled:!T,onClick:()=>void S(),children:"Search"})]})]}),v&&v.length>0&&m("div",{class:"embed-results",children:[p&&m("div",{class:"embed-filters",children:[m("strong",{children:"Topic:"})," ",p.topic,p.language&&m("span",{class:"filter-pill",children:p.language}),p.modality&&m("span",{class:"filter-pill",children:p.modality}),p.platform&&m("span",{class:"filter-pill",children:p.platform})]}),v.map((u,k)=>m("div",{class:"embed-card",children:[m("div",{class:"card-title",children:u.record.learningName}),m("div",{class:"card-desc",children:[u.record.description?.slice(0,150),u.record.description?.length>150?"...":""]}),m("div",{class:"card-tags",children:[u.record.technicalArea&&m("span",{class:"tag",children:u.record.technicalArea}),u.record.modality&&u.record.modality!=="unknown"&&m("span",{class:"tag",children:u.record.modality}),u.record.platform&&m("span",{class:"tag",children:u.record.platform}),u.record.languages.length>0&&m("span",{class:"tag",children:u.record.languages.slice(0,3).join(", ")})]}),u.record.normalizedLink&&m("a",{class:"card-link",href:u.record.normalizedLink,target:"_blank",rel:"noreferrer",children:"Open training â†’"})]},k))]})]})]})}ht(m(Wt,{}),document.getElementById("app"));
//# sourceMappingURL=main-COABr_Uu.js.map
