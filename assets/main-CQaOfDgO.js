(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var se,k,et,U,Me,tt,nt,ot,Pe,pe,me,Y={},rt=[],vt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ae=Array.isArray;function H(t,e){for(var n in e)t[n]=e[n];return t}function Le(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function bt(t,e,n){var r,i,o,s={};for(o in e)o=="key"?r=e[o]:o=="ref"?i=e[o]:s[o]=e[o];if(arguments.length>2&&(s.children=arguments.length>3?se.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)s[o]===void 0&&(s[o]=t.defaultProps[o]);return te(t,s,r,i,null)}function te(t,e,n,r,i){var o={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++et,__i:-1,__u:0};return i==null&&k.vnode!=null&&k.vnode(o),o}function ce(t){return t.children}function ne(t,e){this.props=t,this.context=e}function G(t,e){if(e==null)return t.__?G(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?G(t):null}function it(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return it(t)}}function Te(t){(!t.__d&&(t.__d=!0)&&U.push(t)&&!re.__r++||Me!=k.debounceRendering)&&((Me=k.debounceRendering)||tt)(re)}function re(){for(var t,e,n,r,i,o,s,c=1;U.length;)U.length>c&&U.sort(nt),t=U.shift(),c=U.length,t.__d&&(n=void 0,r=void 0,i=(r=(e=t).__v).__e,o=[],s=[],e.__P&&((n=H({},r)).__v=r.__v+1,k.vnode&&k.vnode(n),Ie(e.__P,n,r,e.__n,e.__P.namespaceURI,32&r.__u?[i]:null,o,i??G(r),!!(32&r.__u),s),n.__v=r.__v,n.__.__k[n.__i]=n,ct(o,n,s),r.__e=r.__=null,n.__e!=i&&it(n)));re.__r=0}function st(t,e,n,r,i,o,s,c,_,l,u){var a,h,f,v,L,b,w,m=r&&r.__k||rt,T=e.length;for(_=wt(n,e,m,_,T),a=0;a<T;a++)(f=n.__k[a])!=null&&(h=f.__i==-1?Y:m[f.__i]||Y,f.__i=a,b=Ie(t,f,h,i,o,s,c,_,l,u),v=f.__e,f.ref&&h.ref!=f.ref&&(h.ref&&Se(h.ref,null,f),u.push(f.ref,f.__c||v,f)),L==null&&v!=null&&(L=v),(w=!!(4&f.__u))||h.__k===f.__k?_=at(f,_,t,w):typeof f.type=="function"&&b!==void 0?_=b:v&&(_=v.nextSibling),f.__u&=-7);return n.__e=L,_}function wt(t,e,n,r,i){var o,s,c,_,l,u=n.length,a=u,h=0;for(t.__k=new Array(i),o=0;o<i;o++)(s=e[o])!=null&&typeof s!="boolean"&&typeof s!="function"?(typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?s=t.__k[o]=te(null,s,null,null,null):ae(s)?s=t.__k[o]=te(ce,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?s=t.__k[o]=te(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):t.__k[o]=s,_=o+h,s.__=t,s.__b=t.__b+1,c=null,(l=s.__i=kt(s,n,_,a))!=-1&&(a--,(c=n[l])&&(c.__u|=2)),c==null||c.__v==null?(l==-1&&(i>u?h--:i<u&&h++),typeof s.type!="function"&&(s.__u|=4)):l!=_&&(l==_-1?h--:l==_+1?h++:(l>_?h--:h++,s.__u|=4))):t.__k[o]=null;if(a)for(o=0;o<u;o++)(c=n[o])!=null&&(2&c.__u)==0&&(c.__e==r&&(r=G(c)),_t(c,c));return r}function at(t,e,n,r){var i,o;if(typeof t.type=="function"){for(i=t.__k,o=0;i&&o<i.length;o++)i[o]&&(i[o].__=t,e=at(i[o],e,n,r));return e}t.__e!=e&&(r&&(e&&t.type&&!e.parentNode&&(e=G(t)),n.insertBefore(t.__e,e||null)),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function kt(t,e,n,r){var i,o,s,c=t.key,_=t.type,l=e[n],u=l!=null&&(2&l.__u)==0;if(l===null&&c==null||u&&c==l.key&&_==l.type)return n;if(r>(u?1:0)){for(i=n-1,o=n+1;i>=0||o<e.length;)if((l=e[s=i>=0?i--:o++])!=null&&(2&l.__u)==0&&c==l.key&&_==l.type)return s}return-1}function De(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||vt.test(e)?n:n+"px"}function Z(t,e,n,r,i){var o,s;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||De(t.style,e,"");if(n)for(e in n)r&&n[e]==r[e]||De(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(ot,"$1")),s=e.toLowerCase(),e=s in t||e=="onFocusOut"||e=="onFocusIn"?s.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=n,n?r?n.u=r.u:(n.u=Pe,t.addEventListener(e,o?me:pe,o)):t.removeEventListener(e,o?me:pe,o);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function $e(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=Pe++;else if(e.t<n.u)return;return n(k.event?k.event(e):e)}}}function Ie(t,e,n,r,i,o,s,c,_,l){var u,a,h,f,v,L,b,w,m,T,D,O,F,X,V,j,Q,S=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(_=!!(32&n.__u),o=[c=e.__e=n.__e]),(u=k.__b)&&u(e);e:if(typeof S=="function")try{if(w=e.props,m="prototype"in S&&S.prototype.render,T=(u=S.contextType)&&r[u.__c],D=u?T?T.props.value:u.__:r,n.__c?b=(a=e.__c=n.__c).__=a.__E:(m?e.__c=a=new S(w,D):(e.__c=a=new ne(w,D),a.constructor=S,a.render=Pt),T&&T.sub(a),a.state||(a.state={}),a.__n=r,h=a.__d=!0,a.__h=[],a._sb=[]),m&&a.__s==null&&(a.__s=a.state),m&&S.getDerivedStateFromProps!=null&&(a.__s==a.state&&(a.__s=H({},a.__s)),H(a.__s,S.getDerivedStateFromProps(w,a.__s))),f=a.props,v=a.state,a.__v=e,h)m&&S.getDerivedStateFromProps==null&&a.componentWillMount!=null&&a.componentWillMount(),m&&a.componentDidMount!=null&&a.__h.push(a.componentDidMount);else{if(m&&S.getDerivedStateFromProps==null&&w!==f&&a.componentWillReceiveProps!=null&&a.componentWillReceiveProps(w,D),e.__v==n.__v||!a.__e&&a.shouldComponentUpdate!=null&&a.shouldComponentUpdate(w,a.__s,D)===!1){for(e.__v!=n.__v&&(a.props=w,a.state=a.__s,a.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(B){B&&(B.__=e)}),O=0;O<a._sb.length;O++)a.__h.push(a._sb[O]);a._sb=[],a.__h.length&&s.push(a);break e}a.componentWillUpdate!=null&&a.componentWillUpdate(w,a.__s,D),m&&a.componentDidUpdate!=null&&a.__h.push(function(){a.componentDidUpdate(f,v,L)})}if(a.context=D,a.props=w,a.__P=t,a.__e=!1,F=k.__r,X=0,m){for(a.state=a.__s,a.__d=!1,F&&F(e),u=a.render(a.props,a.state,a.context),V=0;V<a._sb.length;V++)a.__h.push(a._sb[V]);a._sb=[]}else do a.__d=!1,F&&F(e),u=a.render(a.props,a.state,a.context),a.state=a.__s;while(a.__d&&++X<25);a.state=a.__s,a.getChildContext!=null&&(r=H(H({},r),a.getChildContext())),m&&!h&&a.getSnapshotBeforeUpdate!=null&&(L=a.getSnapshotBeforeUpdate(f,v)),j=u,u!=null&&u.type===ce&&u.key==null&&(j=lt(u.props.children)),c=st(t,ae(j)?j:[j],e,n,r,i,o,s,c,_,l),a.base=e.__e,e.__u&=-161,a.__h.length&&s.push(a),b&&(a.__E=a.__=null)}catch(B){if(e.__v=null,_||o!=null)if(B.then){for(e.__u|=_?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;o[o.indexOf(c)]=null,e.__e=c}else{for(Q=o.length;Q--;)Le(o[Q]);ge(e)}else e.__e=n.__e,e.__k=n.__k,B.then||ge(e);k.__e(B,e,n)}else o==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):c=e.__e=Et(n.__e,e,n,r,i,o,s,_,l);return(u=k.diffed)&&u(e),128&e.__u?void 0:c}function ge(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(ge)}function ct(t,e,n){for(var r=0;r<n.length;r++)Se(n[r],n[++r],n[++r]);k.__c&&k.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(o){o.call(i)})}catch(o){k.__e(o,i.__v)}})}function lt(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:ae(t)?t.map(lt):H({},t)}function Et(t,e,n,r,i,o,s,c,_){var l,u,a,h,f,v,L,b=n.props||Y,w=e.props,m=e.type;if(m=="svg"?i="http://www.w3.org/2000/svg":m=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),o!=null){for(l=0;l<o.length;l++)if((f=o[l])&&"setAttribute"in f==!!m&&(m?f.localName==m:f.nodeType==3)){t=f,o[l]=null;break}}if(t==null){if(m==null)return document.createTextNode(w);t=document.createElementNS(i,m,w.is&&w),c&&(k.__m&&k.__m(e,o),c=!1),o=null}if(m==null)b===w||c&&t.data==w||(t.data=w);else{if(o=o&&se.call(t.childNodes),!c&&o!=null)for(b={},l=0;l<t.attributes.length;l++)b[(f=t.attributes[l]).name]=f.value;for(l in b)if(f=b[l],l!="children"){if(l=="dangerouslySetInnerHTML")a=f;else if(!(l in w)){if(l=="value"&&"defaultValue"in w||l=="checked"&&"defaultChecked"in w)continue;Z(t,l,null,f,i)}}for(l in w)f=w[l],l=="children"?h=f:l=="dangerouslySetInnerHTML"?u=f:l=="value"?v=f:l=="checked"?L=f:c&&typeof f!="function"||b[l]===f||Z(t,l,f,b[l],i);if(u)c||a&&(u.__html==a.__html||u.__html==t.innerHTML)||(t.innerHTML=u.__html),e.__k=[];else if(a&&(t.innerHTML=""),st(e.type=="template"?t.content:t,ae(h)?h:[h],e,n,r,m=="foreignObject"?"http://www.w3.org/1999/xhtml":i,o,s,o?o[0]:n.__k&&G(n,0),c,_),o!=null)for(l=o.length;l--;)Le(o[l]);c||(l="value",m=="progress"&&v==null?t.removeAttribute("value"):v!=null&&(v!==t[l]||m=="progress"&&!v||m=="option"&&v!=b[l])&&Z(t,l,v,b[l],i),l="checked",L!=null&&L!=t[l]&&Z(t,l,L,b[l],i))}return t}function Se(t,e,n){try{if(typeof t=="function"){var r=typeof t.__u=="function";r&&t.__u(),r&&e==null||(t.__u=t(e))}else t.current=e}catch(i){k.__e(i,n)}}function _t(t,e,n){var r,i;if(k.unmount&&k.unmount(t),(r=t.ref)&&(r.current&&r.current!=t.__e||Se(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){k.__e(o,e)}r.base=r.__P=null}if(r=t.__k)for(i=0;i<r.length;i++)r[i]&&_t(r[i],e,n||typeof t.type!="function");n||Le(t.__e),t.__c=t.__=t.__e=void 0}function Pt(t,e,n){return this.constructor(t,n)}function Lt(t,e,n){var r,i,o,s;e==document&&(e=document.documentElement),k.__&&k.__(t,e),i=(r=!1)?null:e.__k,o=[],s=[],Ie(e,t=e.__k=bt(ce,null,[t]),i||Y,Y,e.namespaceURI,i?null:e.firstChild?se.call(e.childNodes):null,o,i?i.__e:e.firstChild,r,s),ct(o,t,s)}se=rt.slice,k={__e:function(t,e,n,r){for(var i,o,s;e=e.__;)if((i=e.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(t)),s=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,r||{}),s=i.__d),s)return i.__E=i}catch(c){t=c}throw t}},et=0,ne.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=H({},this.state),typeof t=="function"&&(t=t(H({},n),this.props)),t&&H(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),Te(this))},ne.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Te(this))},ne.prototype.render=ce,U=[],tt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,nt=function(t,e){return t.__v.__b-e.__v.__b},re.__r=0,ot=/(PointerCapture)$|Capture$/i,Pe=0,pe=$e(!1),me=$e(!0);var It=0;function g(t,e,n,r,i,o){e||(e={});var s,c,_=e;if("ref"in _)for(c in _={},e)c=="ref"?s=e[c]:_[c]=e[c];var l={type:t,props:_,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--It,__i:-1,__u:0,__source:i,__self:o};if(typeof t=="function"&&(s=t.defaultProps))for(c in s)_[c]===void 0&&(_[c]=s[c]);return k.vnode&&k.vnode(l),l}const St="modulepreload",xt=function(t,e){return new URL(t,e).href},Ae={},ee=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let s=function(u){return Promise.all(u.map(a=>Promise.resolve(a).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};const c=document.getElementsByTagName("link"),_=document.querySelector("meta[property=csp-nonce]"),l=_?.nonce||_?.getAttribute("nonce");i=s(n.map(u=>{if(u=xt(u,r),u in Ae)return;Ae[u]=!0;const a=u.endsWith(".css"),h=a?'[rel="stylesheet"]':"";if(!!r)for(let L=c.length-1;L>=0;L--){const b=c[L];if(b.href===u&&(!a||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${h}`))return;const v=document.createElement("link");if(v.rel=a?"stylesheet":St,a||(v.as="script"),v.crossOrigin="",v.href=u,l&&v.setAttribute("nonce",l),document.head.appendChild(v),a)return new Promise((L,b)=>{v.addEventListener("load",L),v.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(s){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=s,window.dispatchEvent(c),!c.defaultPrevented)throw s}return i.then(s=>{for(const c of s||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})};var J,P,ue,Be,ie=0,dt=[],I=k,Ne=I.__b,Re=I.__r,He=I.diffed,Oe=I.__c,Fe=I.unmount,je=I.__;function xe(t,e){I.__h&&I.__h(P,t,ie||e),ie=0;var n=P.__H||(P.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function A(t){return ie=1,Ct(ht,t)}function Ct(t,e,n){var r=xe(J++,2);if(r.t=t,!r.__c&&(r.__=[ht(void 0,e),function(c){var _=r.__N?r.__N[0]:r.__[0],l=r.t(_,c);_!==l&&(r.__N=[l,r.__[1]],r.__c.setState({}))}],r.__c=P,!P.__f)){var i=function(c,_,l){if(!r.__c.__H)return!0;var u=r.__c.__H.__.filter(function(h){return!!h.__c});if(u.every(function(h){return!h.__N}))return!o||o.call(this,c,_,l);var a=r.__c.props!==c;return u.forEach(function(h){if(h.__N){var f=h.__[0];h.__=h.__N,h.__N=void 0,f!==h.__[0]&&(a=!0)}}),o&&o.call(this,c,_,l)||a};P.__f=!0;var o=P.shouldComponentUpdate,s=P.componentWillUpdate;P.componentWillUpdate=function(c,_,l){if(this.__e){var u=o;o=void 0,i(c,_,l),o=u}s&&s.call(this,c,_,l)},P.shouldComponentUpdate=i}return r.__N||r.__}function Ue(t,e){var n=xe(J++,3);!I.__s&&ft(n.__H,e)&&(n.__=t,n.u=e,P.__H.__h.push(n))}function Mt(t){return ie=5,ut(function(){return{current:t}},[])}function ut(t,e){var n=xe(J++,7);return ft(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function Tt(){for(var t;t=dt.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(oe),t.__H.__h.forEach(ye),t.__H.__h=[]}catch(e){t.__H.__h=[],I.__e(e,t.__v)}}I.__b=function(t){P=null,Ne&&Ne(t)},I.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),je&&je(t,e)},I.__r=function(t){Re&&Re(t),J=0;var e=(P=t.__c).__H;e&&(ue===P?(e.__h=[],P.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(oe),e.__h.forEach(ye),e.__h=[],J=0)),ue=P},I.diffed=function(t){He&&He(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(dt.push(e)!==1&&Be===I.requestAnimationFrame||((Be=I.requestAnimationFrame)||Dt)(Tt)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),ue=P=null},I.__c=function(t,e){e.some(function(n){try{n.__h.forEach(oe),n.__h=n.__h.filter(function(r){return!r.__||ye(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],I.__e(r,n.__v)}}),Oe&&Oe(t,e)},I.unmount=function(t){Fe&&Fe(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{oe(r)}catch(i){e=i}}),n.__H=void 0,e&&I.__e(e,n.__v))};var We=typeof requestAnimationFrame=="function";function Dt(t){var e,n=function(){clearTimeout(r),We&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,35);We&&(e=requestAnimationFrame(n))}function oe(t){var e=P,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),P=e}function ye(t){var e=P;t.__c=t.__(),P=e}function ft(t,e){return!t||t.length!==e.length||e.some(function(n,r){return n!==t[r]})}function ht(t,e){return typeof e=="function"?e(t):e}async function $t(){const t=await fetch("./demo-trainings.json",{credentials:"same-origin"});if(!t.ok)throw new Error(`Failed to load demo-trainings.json (${t.status})`);const e=await t.json();if(!Array.isArray(e))throw new Error("demo-trainings.json is not an array");return e}function pt(t){return t.toLowerCase().replace(/[^a-z0-9]+/gi," ").trim().split(/\s+/).filter(e=>e.length>=2)}function Ve(t){const e=new Map,n=[];let r=0;for(const i of t){const o=pt(i.searchText),s=new Map;for(const _ of o)s.set(_,(s.get(_)??0)+1);for(const _ of s.keys())e.set(_,(e.get(_)??0)+1);const c=o.length;r+=c,n.push({record:i,tf:s,len:c})}return{docs:n,df:e,avgLen:n.length?r/n.length:0,n:n.length}}function At(t,e){const i=pt(e),o=new Map;for(const s of t.docs){let c=0;for(const _ of i){const l=s.tf.get(_)??0;if(!l)continue;const u=t.df.get(_)??0,a=Math.log(1+(t.n-u+.5)/(u+.5)),h=l+1.2*(1-.75+.75*s.len/(t.avgLen||1));c+=a*(l*(1.2+1)/h)}c>0&&o.set(s.record.id,c)}return o}function Bt(t,e){return t.filter(n=>{if(e.modality&&n.modality!==e.modality)return!1;if(e.language){const r=e.language.toLowerCase();if(!n.languages.some(i=>i.toLowerCase()===r))return!1}if(e.platform){const r=e.platform.toLowerCase();if(!n.platform.toLowerCase().includes(r))return!1}if(e.audienceContains){const r=e.audienceContains.toLowerCase();if(!n.intendedAudience.toLowerCase().includes(r))return!1}return!0})}function ze(t,e,n){const r=At(n,e),i=[];for(const o of t){const s=r.get(o.id)??0;if(s<=0)continue;const c=[];o.learningName.toLowerCase().includes(e.toLowerCase())&&c.push("title match"),i.push({record:o,score:s,reasons:c})}return i.sort((o,s)=>s.score-o.score),i}const ve=(t,e)=>e.some(n=>t instanceof n);let Ke,qe;function Nt(){return Ke||(Ke=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Rt(){return qe||(qe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const be=new WeakMap,fe=new WeakMap,le=new WeakMap;function Ht(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(W(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return le.set(e,t),e}function Ot(t){if(be.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});be.set(t,e)}let we={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return be.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return W(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function mt(t){we=t(we)}function Ft(t){return Rt().includes(t)?function(...e){return t.apply(ke(this),e),W(this.request)}:function(...e){return W(t.apply(ke(this),e))}}function jt(t){return typeof t=="function"?Ft(t):(t instanceof IDBTransaction&&Ot(t),ve(t,Nt())?new Proxy(t,we):t)}function W(t){if(t instanceof IDBRequest)return Ht(t);if(fe.has(t))return fe.get(t);const e=jt(t);return e!==t&&(fe.set(t,e),le.set(e,t)),e}const ke=t=>le.get(t);function Ut(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),c=W(s);return r&&s.addEventListener("upgradeneeded",_=>{r(W(s.result),_.oldVersion,_.newVersion,W(s.transaction),_)}),n&&s.addEventListener("blocked",_=>n(_.oldVersion,_.newVersion,_)),c.then(_=>{o&&_.addEventListener("close",()=>o()),i&&_.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}const Wt=["get","getKey","getAll","getAllKeys","count"],Vt=["put","add","delete","clear"],he=new Map;function Ge(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(he.get(e))return he.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Vt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Wt.includes(n)))return;const o=async function(s,...c){const _=this.transaction(s,i?"readwrite":"readonly");let l=_.store;return r&&(l=l.index(c.shift())),(await Promise.all([l[n](...c),i&&_.done]))[0]};return he.set(e,o),o}mt(t=>({...t,get:(e,n,r)=>Ge(e,n)||t.get(e,n,r),has:(e,n)=>!!Ge(e,n)||t.has(e,n)}));const zt=["continue","continuePrimaryKey","advance"],Qe={},Ee=new WeakMap,gt=new WeakMap,Kt={get(t,e){if(!zt.includes(e))return t[e];let n=Qe[e];return n||(n=Qe[e]=function(...r){Ee.set(this,gt.get(this)[e](...r))}),n}};async function*qt(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const n=new Proxy(e,Kt);for(gt.set(n,e),le.set(n,ke(e));e;)yield n,e=await(Ee.get(n)||e.continue()),Ee.delete(n)}function Ye(t,e){return e===Symbol.asyncIterator&&ve(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&ve(t,[IDBIndex,IDBObjectStore])}mt(t=>({...t,get(e,n,r){return Ye(e,n)?qt:t.get(e,n,r)},has(e,n){return Ye(e,n)||t.has(e,n)}}));const Gt="who-training-finder-db",Qt=1,yt="trainings";async function _e(){return Ut(Gt,Qt,{upgrade(t){t.objectStoreNames.contains("trainings")||t.createObjectStore("trainings"),t.objectStoreNames.contains("embeddings")||t.createObjectStore("embeddings")}})}async function Je(){return(await(await _e()).get("trainings",yt))?.records??null}async function Yt(t){await(await _e()).put("trainings",{updatedAt:Date.now(),records:t},yt)}async function Xe(t){const n=await(await _e()).get("embeddings",t);return n?new Float32Array(n.data):null}async function Ze(t,e){const n=await _e(),r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),i=new Uint8Array(r.byteLength);i.set(r),await n.put("embeddings",{dims:e.length,data:i.buffer},t)}const C={dataSource:"demo_json",sharepoint:{siteRelativeUrl:"/sites/EuroWCPHE",listTitle:"Copytraininglist2912026"},embeddingModel:"bge-small",enableChatModel:!1,allowRemoteModels:!0,modelsBasePath:"./models"};function Jt(){const[t,e]=A(null),[n,r]=A(null),[i,o]=A("idle"),[s,c]=A(0),[_,l]=A("Initializing..."),[u,a]=A(!1),[h,f]=A([]),[v,L]=A(""),[b,w]=A(null),[m,T]=A(null),D=Mt(null);Ue(()=>{D.current?.scrollIntoView({behavior:"smooth"})},[h.length,b]);const O=ut(()=>i==="ready",[i]);Ue(()=>{F()},[]);async function F(){o("data"),l("Loading training data..."),c(5);try{const d=await Je();d&&d.length&&(e(d),r(Ve(d)),c(15));const y=C.dataSource==="demo_json"?await $t():await X();e(y),r(Ve(y)),await Yt(y),c(30)}catch(d){console.error("Failed to load data:",d),f([{role:"bot",text:"Error loading training data. Please refresh the page."}]);return}o("embeddings"),l("Loading semantic search model...");try{const{loadEmbeddingsPipeline:d}=await ee(async()=>{const{loadEmbeddingsPipeline:y}=await import("./embeddings-B5uUzWVz.js");return{loadEmbeddingsPipeline:y}},[],import.meta.url);await d({modelsBasePath:C.modelsBasePath,allowRemoteModels:C.allowRemoteModels,embeddingModel:C.embeddingModel}),a(!0),c(70)}catch(d){console.error("Failed to load embeddings:",d),c(70)}if(u){o("precompute"),l("Preparing semantic search...");try{const{embedText:d,loadEmbeddingsPipeline:y}=await ee(async()=>{const{embedText:x,loadEmbeddingsPipeline:N}=await import("./embeddings-B5uUzWVz.js");return{embedText:x,loadEmbeddingsPipeline:N}},[],import.meta.url),p=await y({modelsBasePath:C.modelsBasePath,allowRemoteModels:C.allowRemoteModels,embeddingModel:C.embeddingModel}),E=await Je()||[],$=E.length;let M=0;for(const x of E){if(!await Xe(x.id)){const z=await d(p,x.searchText);await Ze(x.id,z)}M++,c(70+Math.round(M/$*30))}}catch(d){console.error("Failed to precompute embeddings:",d)}}c(100),o("ready"),l(""),f([{role:"bot",text:"Hello! Tell me what training you're looking for - describe the topic, your goals, preferred language, or format (online/in-person)."}])}async function X(){const{fetchAllListItems:d}=await ee(async()=>{const{fetchAllListItems:y}=await import("./sharepoint-BSZBMNpd.js");return{fetchAllListItems:y}},[],import.meta.url);return d({siteRelativeUrl:C.sharepoint.siteRelativeUrl,listTitle:C.sharepoint.listTitle})}async function V(d){if(!t||!n)return;const y=h.length;f(N=>[...N,{role:"bot",text:"Searching...",isLoading:!0}]);const p=j(d);T(p);const E=Bt(t,{modality:p.modality,language:p.language,platform:p.platform,audienceContains:p.audience});let $;u?$=await S(E,p.topic,n):$=ze(E,p.topic,n);const M=$.slice(0,10);w(M);const x=Q(p,$.length);f(N=>{const z=[...N];return z[y]={role:"bot",text:x},z})}function j(d){const y=d.toLowerCase();let p=d;const E={topic:d,rawQuery:d},$=["english","french","spanish","russian","arabic","portuguese","chinese","ukrainian","polish"];for(const M of $){const x=new RegExp(`\\b(in\\s+)?${M}\\b`,"gi");if(x.test(y)){E.language=M.charAt(0).toUpperCase()+M.slice(1),p=p.replace(x,"");break}}return/\bonline\b|e-learning/i.test(y)?(E.modality="online",p=p.replace(/\bonline\b|e-learning/gi,"")):/\bin[- ]person\b/i.test(y)?(E.modality="in_person",p=p.replace(/\bin[- ]person\b/gi,"")):/\bblended\b/i.test(y)&&(E.modality="blended",p=p.replace(/\bblended\b/gi,"")),/openwho/i.test(y)?(E.platform="OpenWHO",p=p.replace(/openwho/gi,"")):/who academy/i.test(y)?(E.platform="WHO Academy",p=p.replace(/who academy/gi,"")):/hslp/i.test(y)&&(E.platform="HSLP",p=p.replace(/hslp/gi,"")),/member state|ministry/i.test(y)?E.audience="Member":/who staff/i.test(y)&&(E.audience="WHO"),p=p.replace(/\b(i need|i want|i'm looking for|looking for|find me|show me|a training|training|about|on|for)\b/gi,"").replace(/\s+/g," ").trim(),E.topic=p||"health emergency",E}function Q(d,y){if(y===0)return`I couldn't find any trainings matching "${d.topic}". Try broadening your search.`;const p=[];d.language&&p.push(`in ${d.language}`),d.modality&&p.push(d.modality.replace("_","-")),d.platform&&p.push(`on ${d.platform}`);const E=p.length?` (${p.join(", ")})`:"";return`Found ${y} training(s) for "${d.topic}"${E}:`}async function S(d,y,p){const E=ze(d,y,p);if(E.length===0||!u)return E;try{const{cosineSimilarity:$,embedText:M,loadEmbeddingsPipeline:x}=await ee(async()=>{const{cosineSimilarity:R,embedText:K,loadEmbeddingsPipeline:q}=await import("./embeddings-B5uUzWVz.js");return{cosineSimilarity:R,embedText:K,loadEmbeddingsPipeline:q}},[],import.meta.url),N=await x({modelsBasePath:C.modelsBasePath,allowRemoteModels:C.allowRemoteModels,embeddingModel:C.embeddingModel}),z=await M(N,y),de=E.slice(0,50);for(const R of de){const K=R.record.id;let q=await Xe(K);q||(q=await M(N,R.record.searchText),await Ze(K,q));const Ce=$(z,q);R.score=R.score+Ce*2,Ce>.35&&R.reasons.push("semantic match")}return de.sort((R,K)=>K.score-R.score),de}catch{return E}}async function B(){const d=v.trim();!d||!O||(L(""),f(y=>[...y,{role:"user",text:d}]),await V(d))}return g("div",{class:"embed-container",children:[i!=="ready"&&g("div",{class:"loading-overlay",children:g("div",{class:"loading-content",children:[g("div",{class:"loading-title",children:"WHO Training Finder"}),g("div",{class:"loading-bar-container",children:g("div",{class:"loading-bar",style:{width:`${s}%`}})}),g("div",{class:"loading-text",children:_}),g("div",{class:"loading-percent",children:[s,"%"]})]})}),g("div",{class:`embed-main ${i!=="ready"?"hidden":""}`,children:[g("div",{class:"embed-header",children:g("span",{class:"embed-title",children:"WHO Training Finder"})}),g("div",{class:"embed-chat",children:[g("div",{class:"embed-messages",children:[h.map((d,y)=>g("div",{class:`embed-message ${d.role} ${d.isLoading?"loading":""}`,children:[d.isLoading&&g("span",{class:"spinner"}),d.text]},y)),g("div",{ref:D})]}),g("div",{class:"embed-composer",children:[g("input",{type:"text",value:v,placeholder:"Describe the training you need...",disabled:!O,onInput:d=>L(d.target.value),onKeyDown:d=>{d.key==="Enter"&&B()}}),g("button",{class:"embed-send",disabled:!O,onClick:()=>void B(),children:"Search"})]})]}),b&&b.length>0&&g("div",{class:"embed-results",children:[m&&g("div",{class:"embed-filters",children:[g("strong",{children:"Topic:"})," ",m.topic,m.language&&g("span",{class:"filter-pill",children:m.language}),m.modality&&g("span",{class:"filter-pill",children:m.modality}),m.platform&&g("span",{class:"filter-pill",children:m.platform})]}),b.map((d,y)=>g("div",{class:"embed-card",children:[g("div",{class:"card-title",children:d.record.learningName}),g("div",{class:"card-desc",children:[d.record.description?.slice(0,150),d.record.description?.length>150?"...":""]}),g("div",{class:"card-tags",children:[d.record.technicalArea&&g("span",{class:"tag",children:d.record.technicalArea}),d.record.modality&&d.record.modality!=="unknown"&&g("span",{class:"tag",children:d.record.modality}),d.record.platform&&g("span",{class:"tag",children:d.record.platform}),d.record.languages.length>0&&g("span",{class:"tag",children:d.record.languages.slice(0,3).join(", ")})]}),d.record.normalizedLink&&g("a",{class:"card-link",href:d.record.normalizedLink,target:"_blank",rel:"noreferrer",children:"Open training â†’"})]},y))]})]})]})}Lt(g(Jt,{}),document.getElementById("app"));
//# sourceMappingURL=main-CQaOfDgO.js.map
