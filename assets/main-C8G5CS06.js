(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();var K,k,Oe,T,ve,Re,je,Fe,ue,ne,re,O={},Ue=[],ot=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,q=Array.isArray;function x(e,t){for(var n in t)e[n]=t[n];return e}function fe(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function it(e,t,n){var o,i,r,s={};for(r in t)r=="key"?o=t[r]:r=="ref"?i=t[r]:s[r]=t[r];if(arguments.length>2&&(s.children=arguments.length>3?K.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(r in e.defaultProps)s[r]===void 0&&(s[r]=e.defaultProps[r]);return U(e,s,o,i,null)}function U(e,t,n,o,i){var r={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++Oe,__i:-1,__u:0};return i==null&&k.vnode!=null&&k.vnode(r),r}function G(e){return e.children}function W(e,t){this.props=e,this.context=t}function B(e,t){if(t==null)return e.__?B(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?B(e):null}function We(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return We(e)}}function ye(e){(!e.__d&&(e.__d=!0)&&T.push(e)&&!z.__r++||ve!=k.debounceRendering)&&((ve=k.debounceRendering)||Re)(z)}function z(){for(var e,t,n,o,i,r,s,c=1;T.length;)T.length>c&&T.sort(je),e=T.shift(),c=T.length,e.__d&&(n=void 0,o=void 0,i=(o=(t=e).__v).__e,r=[],s=[],t.__P&&((n=x({},o)).__v=o.__v+1,k.vnode&&k.vnode(n),he(t.__P,n,o,t.__n,t.__P.namespaceURI,32&o.__u?[i]:null,r,i??B(o),!!(32&o.__u),s),n.__v=o.__v,n.__.__k[n.__i]=n,Ke(r,n,s),o.__e=o.__=null,n.__e!=i&&We(n)));z.__r=0}function Ve(e,t,n,o,i,r,s,c,_,l,f){var a,p,h,v,C,y,w,b=o&&o.__k||Ue,D=t.length;for(_=st(n,t,b,_,D),a=0;a<D;a++)(h=n.__k[a])!=null&&(p=h.__i==-1?O:b[h.__i]||O,h.__i=a,y=he(e,h,p,i,r,s,c,_,l,f),v=h.__e,h.ref&&p.ref!=h.ref&&(p.ref&&pe(p.ref,null,h),f.push(h.ref,h.__c||v,h)),C==null&&v!=null&&(C=v),(w=!!(4&h.__u))||p.__k===h.__k?_=ze(h,_,e,w):typeof h.type=="function"&&y!==void 0?_=y:v&&(_=v.nextSibling),h.__u&=-7);return n.__e=C,_}function st(e,t,n,o,i){var r,s,c,_,l,f=n.length,a=f,p=0;for(e.__k=new Array(i),r=0;r<i;r++)(s=t[r])!=null&&typeof s!="boolean"&&typeof s!="function"?(typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?s=e.__k[r]=U(null,s,null,null,null):q(s)?s=e.__k[r]=U(G,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?s=e.__k[r]=U(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):e.__k[r]=s,_=r+p,s.__=e,s.__b=e.__b+1,c=null,(l=s.__i=at(s,n,_,a))!=-1&&(a--,(c=n[l])&&(c.__u|=2)),c==null||c.__v==null?(l==-1&&(i>f?p--:i<f&&p++),typeof s.type!="function"&&(s.__u|=4)):l!=_&&(l==_-1?p--:l==_+1?p++:(l>_?p--:p++,s.__u|=4))):e.__k[r]=null;if(a)for(r=0;r<f;r++)(c=n[r])!=null&&(2&c.__u)==0&&(c.__e==o&&(o=B(c)),Ge(c,c));return o}function ze(e,t,n,o){var i,r;if(typeof e.type=="function"){for(i=e.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=e,t=ze(i[r],t,n,o));return t}e.__e!=t&&(o&&(t&&e.type&&!t.parentNode&&(t=B(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function at(e,t,n,o){var i,r,s,c=e.key,_=e.type,l=t[n],f=l!=null&&(2&l.__u)==0;if(l===null&&c==null||f&&c==l.key&&_==l.type)return n;if(o>(f?1:0)){for(i=n-1,r=n+1;i>=0||r<t.length;)if((l=t[s=i>=0?i--:r++])!=null&&(2&l.__u)==0&&c==l.key&&_==l.type)return s}return-1}function be(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||ot.test(t)?n:n+"px"}function F(e,t,n,o,i){var r,s;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||be(e.style,t,"");if(n)for(t in n)o&&n[t]==o[t]||be(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")r=t!=(t=t.replace(Fe,"$1")),s=t.toLowerCase(),t=s in e||t=="onFocusOut"||t=="onFocusIn"?s.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=n,n?o?n.u=o.u:(n.u=ue,e.addEventListener(t,r?re:ne,r)):e.removeEventListener(t,r?re:ne,r);else{if(i=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function we(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=ue++;else if(t.t<n.u)return;return n(k.event?k.event(t):t)}}}function he(e,t,n,o,i,r,s,c,_,l){var f,a,p,h,v,C,y,w,b,D,S,$,H,j,N,A,u,m=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(_=!!(32&n.__u),r=[c=t.__e=n.__e]),(f=k.__b)&&f(t);e:if(typeof m=="function")try{if(w=t.props,b="prototype"in m&&m.prototype.render,D=(f=m.contextType)&&o[f.__c],S=f?D?D.props.value:f.__:o,n.__c?y=(a=t.__c=n.__c).__=a.__E:(b?t.__c=a=new m(w,S):(t.__c=a=new W(w,S),a.constructor=m,a.render=lt),D&&D.sub(a),a.state||(a.state={}),a.__n=o,p=a.__d=!0,a.__h=[],a._sb=[]),b&&a.__s==null&&(a.__s=a.state),b&&m.getDerivedStateFromProps!=null&&(a.__s==a.state&&(a.__s=x({},a.__s)),x(a.__s,m.getDerivedStateFromProps(w,a.__s))),h=a.props,v=a.state,a.__v=t,p)b&&m.getDerivedStateFromProps==null&&a.componentWillMount!=null&&a.componentWillMount(),b&&a.componentDidMount!=null&&a.__h.push(a.componentDidMount);else{if(b&&m.getDerivedStateFromProps==null&&w!==h&&a.componentWillReceiveProps!=null&&a.componentWillReceiveProps(w,S),t.__v==n.__v||!a.__e&&a.shouldComponentUpdate!=null&&a.shouldComponentUpdate(w,a.__s,S)===!1){for(t.__v!=n.__v&&(a.props=w,a.state=a.__s,a.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(g){g&&(g.__=t)}),$=0;$<a._sb.length;$++)a.__h.push(a._sb[$]);a._sb=[],a.__h.length&&s.push(a);break e}a.componentWillUpdate!=null&&a.componentWillUpdate(w,a.__s,S),b&&a.componentDidUpdate!=null&&a.__h.push(function(){a.componentDidUpdate(h,v,C)})}if(a.context=S,a.props=w,a.__P=e,a.__e=!1,H=k.__r,j=0,b){for(a.state=a.__s,a.__d=!1,H&&H(t),f=a.render(a.props,a.state,a.context),N=0;N<a._sb.length;N++)a.__h.push(a._sb[N]);a._sb=[]}else do a.__d=!1,H&&H(t),f=a.render(a.props,a.state,a.context),a.state=a.__s;while(a.__d&&++j<25);a.state=a.__s,a.getChildContext!=null&&(o=x(x({},o),a.getChildContext())),b&&!p&&a.getSnapshotBeforeUpdate!=null&&(C=a.getSnapshotBeforeUpdate(h,v)),A=f,f!=null&&f.type===G&&f.key==null&&(A=qe(f.props.children)),c=Ve(e,q(A)?A:[A],t,n,o,i,r,s,c,_,l),a.base=t.__e,t.__u&=-161,a.__h.length&&s.push(a),y&&(a.__E=a.__=null)}catch(g){if(t.__v=null,_||r!=null)if(g.then){for(t.__u|=_?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;r[r.indexOf(c)]=null,t.__e=c}else{for(u=r.length;u--;)fe(r[u]);oe(t)}else t.__e=n.__e,t.__k=n.__k,g.then||oe(t);k.__e(g,t,n)}else r==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):c=t.__e=ct(n.__e,t,n,o,i,r,s,_,l);return(f=k.diffed)&&f(t),128&t.__u?void 0:c}function oe(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(oe)}function Ke(e,t,n){for(var o=0;o<n.length;o++)pe(n[o],n[++o],n[++o]);k.__c&&k.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(r){r.call(i)})}catch(r){k.__e(r,i.__v)}})}function qe(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:q(e)?e.map(qe):x({},e)}function ct(e,t,n,o,i,r,s,c,_){var l,f,a,p,h,v,C,y=n.props||O,w=t.props,b=t.type;if(b=="svg"?i="http://www.w3.org/2000/svg":b=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),r!=null){for(l=0;l<r.length;l++)if((h=r[l])&&"setAttribute"in h==!!b&&(b?h.localName==b:h.nodeType==3)){e=h,r[l]=null;break}}if(e==null){if(b==null)return document.createTextNode(w);e=document.createElementNS(i,b,w.is&&w),c&&(k.__m&&k.__m(t,r),c=!1),r=null}if(b==null)y===w||c&&e.data==w||(e.data=w);else{if(r=r&&K.call(e.childNodes),!c&&r!=null)for(y={},l=0;l<e.attributes.length;l++)y[(h=e.attributes[l]).name]=h.value;for(l in y)if(h=y[l],l!="children"){if(l=="dangerouslySetInnerHTML")a=h;else if(!(l in w)){if(l=="value"&&"defaultValue"in w||l=="checked"&&"defaultChecked"in w)continue;F(e,l,null,h,i)}}for(l in w)h=w[l],l=="children"?p=h:l=="dangerouslySetInnerHTML"?f=h:l=="value"?v=h:l=="checked"?C=h:c&&typeof h!="function"||y[l]===h||F(e,l,h,y[l],i);if(f)c||a&&(f.__html==a.__html||f.__html==e.innerHTML)||(e.innerHTML=f.__html),t.__k=[];else if(a&&(e.innerHTML=""),Ve(t.type=="template"?e.content:e,q(p)?p:[p],t,n,o,b=="foreignObject"?"http://www.w3.org/1999/xhtml":i,r,s,r?r[0]:n.__k&&B(n,0),c,_),r!=null)for(l=r.length;l--;)fe(r[l]);c||(l="value",b=="progress"&&v==null?e.removeAttribute("value"):v!=null&&(v!==e[l]||b=="progress"&&!v||b=="option"&&v!=y[l])&&F(e,l,v,y[l],i),l="checked",C!=null&&C!=e[l]&&F(e,l,C,y[l],i))}return e}function pe(e,t,n){try{if(typeof e=="function"){var o=typeof e.__u=="function";o&&e.__u(),o&&t==null||(e.__u=e(t))}else e.current=t}catch(i){k.__e(i,n)}}function Ge(e,t,n){var o,i;if(k.unmount&&k.unmount(e),(o=e.ref)&&(o.current&&o.current!=e.__e||pe(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(r){k.__e(r,t)}o.base=o.__P=null}if(o=e.__k)for(i=0;i<o.length;i++)o[i]&&Ge(o[i],t,n||typeof e.type!="function");n||fe(e.__e),e.__c=e.__=e.__e=void 0}function lt(e,t,n){return this.constructor(e,n)}function _t(e,t,n){var o,i,r,s;t==document&&(t=document.documentElement),k.__&&k.__(e,t),i=(o=!1)?null:t.__k,r=[],s=[],he(t,e=t.__k=it(G,null,[e]),i||O,O,t.namespaceURI,i?null:t.firstChild?K.call(t.childNodes):null,r,i?i.__e:t.firstChild,o,s),Ke(r,e,s)}K=Ue.slice,k={__e:function(e,t,n,o){for(var i,r,s;t=t.__;)if((i=t.__c)&&!i.__)try{if((r=i.constructor)&&r.getDerivedStateFromError!=null&&(i.setState(r.getDerivedStateFromError(e)),s=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,o||{}),s=i.__d),s)return i.__E=i}catch(c){e=c}throw e}},Oe=0,W.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=x({},this.state),typeof e=="function"&&(e=e(x({},n),this.props)),e&&x(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),ye(this))},W.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),ye(this))},W.prototype.render=G,T=[],Re=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,je=function(e,t){return e.__v.__b-t.__v.__b},z.__r=0,Fe=/(PointerCapture)$|Capture$/i,ue=0,ne=we(!1),re=we(!0);var dt=0;function d(e,t,n,o,i,r){t||(t={});var s,c,_=t;if("ref"in _)for(c in _={},t)c=="ref"?s=t[c]:_[c]=t[c];var l={type:e,props:_,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--dt,__i:-1,__u:0,__source:i,__self:r};if(typeof e=="function"&&(s=e.defaultProps))for(c in s)_[c]===void 0&&(_[c]=s[c]);return k.vnode&&k.vnode(l),l}const ut="modulepreload",ft=function(e,t){return new URL(e,t).href},ke={},ht=function(t,n,o){let i=Promise.resolve();if(n&&n.length>0){let s=function(f){return Promise.all(f.map(a=>Promise.resolve(a).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};const c=document.getElementsByTagName("link"),_=document.querySelector("meta[property=csp-nonce]"),l=_?.nonce||_?.getAttribute("nonce");i=s(n.map(f=>{if(f=ft(f,o),f in ke)return;ke[f]=!0;const a=f.endsWith(".css"),p=a?'[rel="stylesheet"]':"";if(!!o)for(let C=c.length-1;C>=0;C--){const y=c[C];if(y.href===f&&(!a||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${p}`))return;const v=document.createElement("link");if(v.rel=a?"stylesheet":ut,a||(v.as="script"),v.crossOrigin="",v.href=f,l&&v.setAttribute("nonce",l),document.head.appendChild(v),a)return new Promise((C,y)=>{v.addEventListener("load",C),v.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${f}`)))})}))}function r(s){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=s,window.dispatchEvent(c),!c.defaultPrevented)throw s}return i.then(s=>{for(const c of s||[])c.status==="rejected"&&r(c.reason);return t().catch(r)})};var R,E,X,Ee,ie=0,Qe=[],P=k,Pe=P.__b,Ce=P.__r,Le=P.diffed,Se=P.__c,De=P.unmount,Ie=P.__;function me(e,t){P.__h&&P.__h(E,e,ie||t),ie=0;var n=E.__H||(E.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function I(e){return ie=1,pt(Je,e)}function pt(e,t,n){var o=me(R++,2);if(o.t=e,!o.__c&&(o.__=[Je(void 0,t),function(c){var _=o.__N?o.__N[0]:o.__[0],l=o.t(_,c);_!==l&&(o.__N=[l,o.__[1]],o.__c.setState({}))}],o.__c=E,!E.__f)){var i=function(c,_,l){if(!o.__c.__H)return!0;var f=o.__c.__H.__.filter(function(p){return!!p.__c});if(f.every(function(p){return!p.__N}))return!r||r.call(this,c,_,l);var a=o.__c.props!==c;return f.forEach(function(p){if(p.__N){var h=p.__[0];p.__=p.__N,p.__N=void 0,h!==p.__[0]&&(a=!0)}}),r&&r.call(this,c,_,l)||a};E.__f=!0;var r=E.shouldComponentUpdate,s=E.componentWillUpdate;E.componentWillUpdate=function(c,_,l){if(this.__e){var f=r;r=void 0,i(c,_,l),r=f}s&&s.call(this,c,_,l)},E.shouldComponentUpdate=i}return o.__N||o.__}function mt(e,t){var n=me(R++,3);!P.__s&&Ye(n.__H,t)&&(n.__=e,n.u=t,E.__H.__h.push(n))}function gt(e,t){var n=me(R++,7);return Ye(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function vt(){for(var e;e=Qe.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(V),e.__H.__h.forEach(se),e.__H.__h=[]}catch(t){e.__H.__h=[],P.__e(t,e.__v)}}P.__b=function(e){E=null,Pe&&Pe(e)},P.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Ie&&Ie(e,t)},P.__r=function(e){Ce&&Ce(e),R=0;var t=(E=e.__c).__H;t&&(X===E?(t.__h=[],E.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(V),t.__h.forEach(se),t.__h=[],R=0)),X=E},P.diffed=function(e){Le&&Le(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Qe.push(t)!==1&&Ee===P.requestAnimationFrame||((Ee=P.requestAnimationFrame)||yt)(vt)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),X=E=null},P.__c=function(e,t){t.some(function(n){try{n.__h.forEach(V),n.__h=n.__h.filter(function(o){return!o.__||se(o)})}catch(o){t.some(function(i){i.__h&&(i.__h=[])}),t=[],P.__e(o,n.__v)}}),Se&&Se(e,t)},P.unmount=function(e){De&&De(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{V(o)}catch(i){t=i}}),n.__H=void 0,t&&P.__e(t,n.__v))};var xe=typeof requestAnimationFrame=="function";function yt(e){var t,n=function(){clearTimeout(o),xe&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,35);xe&&(t=requestAnimationFrame(n))}function V(e){var t=E,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),E=t}function se(e){var t=E;e.__c=e.__(),E=t}function Ye(e,t){return!e||e.length!==t.length||t.some(function(n,o){return n!==e[o]})}function Je(e,t){return typeof t=="function"?t(e):t}async function bt(){const e=await fetch("./demo-trainings.json",{credentials:"same-origin"});if(!e.ok)throw new Error(`Failed to load demo-trainings.json (${e.status})`);const t=await e.json();if(!Array.isArray(t))throw new Error("demo-trainings.json is not an array");return t}function Xe(e){return e.toLowerCase().replace(/[^a-z0-9]+/gi," ").trim().split(/\s+/).filter(t=>t.length>=2)}function Ae(e){const t=new Map,n=[];let o=0;for(const i of e){const r=Xe(i.searchText),s=new Map;for(const _ of r)s.set(_,(s.get(_)??0)+1);for(const _ of s.keys())t.set(_,(t.get(_)??0)+1);const c=r.length;o+=c,n.push({record:i,tf:s,len:c})}return{docs:n,df:t,avgLen:n.length?o/n.length:0,n:n.length}}function wt(e,t){const i=Xe(t),r=new Map;for(const s of e.docs){let c=0;for(const _ of i){const l=s.tf.get(_)??0;if(!l)continue;const f=e.df.get(_)??0,a=Math.log(1+(e.n-f+.5)/(f+.5)),p=l+1.2*(1-.75+.75*s.len/(e.avgLen||1));c+=a*(l*(1.2+1)/p)}c>0&&r.set(s.record.id,c)}return r}function kt(e,t){return e.filter(n=>{if(t.modality&&n.modality!==t.modality)return!1;if(t.language){const o=t.language.toLowerCase();if(!n.languages.some(i=>i.toLowerCase()===o))return!1}if(t.platform){const o=t.platform.toLowerCase();if(!n.platform.toLowerCase().includes(o))return!1}if(t.audienceContains){const o=t.audienceContains.toLowerCase();if(!n.intendedAudience.toLowerCase().includes(o))return!1}return!0})}function Et(e,t,n){const o=wt(n,t),i=[];for(const r of e){const s=o.get(r.id)??0;if(s<=0)continue;const c=[];r.learningName.toLowerCase().includes(t.toLowerCase())&&c.push("title match"),i.push({record:r,score:s,reasons:c})}return i.sort((r,s)=>s.score-r.score),i}const ae=(e,t)=>t.some(n=>e instanceof n);let He,Te;function Pt(){return He||(He=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ct(){return Te||(Te=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ce=new WeakMap,Z=new WeakMap,Q=new WeakMap;function Lt(e){const t=new Promise((n,o)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{n(M(e.result)),i()},s=()=>{o(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",s)});return Q.set(t,e),t}function St(e){if(ce.has(e))return;const t=new Promise((n,o)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{n(),i()},s=()=>{o(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)});ce.set(e,t)}let le={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return ce.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return M(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Ze(e){le=e(le)}function Dt(e){return Ct().includes(e)?function(...t){return e.apply(_e(this),t),M(this.request)}:function(...t){return M(e.apply(_e(this),t))}}function It(e){return typeof e=="function"?Dt(e):(e instanceof IDBTransaction&&St(e),ae(e,Pt())?new Proxy(e,le):e)}function M(e){if(e instanceof IDBRequest)return Lt(e);if(Z.has(e))return Z.get(e);const t=It(e);return t!==e&&(Z.set(e,t),Q.set(t,e)),t}const _e=e=>Q.get(e);function xt(e,t,{blocked:n,upgrade:o,blocking:i,terminated:r}={}){const s=indexedDB.open(e,t),c=M(s);return o&&s.addEventListener("upgradeneeded",_=>{o(M(s.result),_.oldVersion,_.newVersion,M(s.transaction),_)}),n&&s.addEventListener("blocked",_=>n(_.oldVersion,_.newVersion,_)),c.then(_=>{r&&_.addEventListener("close",()=>r()),i&&_.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}const At=["get","getKey","getAll","getAllKeys","count"],Ht=["put","add","delete","clear"],ee=new Map;function Me(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(ee.get(t))return ee.get(t);const n=t.replace(/FromIndex$/,""),o=t!==n,i=Ht.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(i||At.includes(n)))return;const r=async function(s,...c){const _=this.transaction(s,i?"readwrite":"readonly");let l=_.store;return o&&(l=l.index(c.shift())),(await Promise.all([l[n](...c),i&&_.done]))[0]};return ee.set(t,r),r}Ze(e=>({...e,get:(t,n,o)=>Me(t,n)||e.get(t,n,o),has:(t,n)=>!!Me(t,n)||e.has(t,n)}));const Tt=["continue","continuePrimaryKey","advance"],$e={},de=new WeakMap,et=new WeakMap,Mt={get(e,t){if(!Tt.includes(t))return e[t];let n=$e[t];return n||(n=$e[t]=function(...o){de.set(this,et.get(this)[t](...o))}),n}};async function*$t(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const n=new Proxy(t,Mt);for(et.set(n,t),Q.set(n,_e(t));t;)yield n,t=await(de.get(n)||t.continue()),de.delete(n)}function Ne(e,t){return t===Symbol.asyncIterator&&ae(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&ae(e,[IDBIndex,IDBObjectStore])}Ze(e=>({...e,get(t,n,o){return Ne(t,n)?$t:e.get(t,n,o)},has(t,n){return Ne(t,n)||e.has(t,n)}}));const Nt="who-training-finder-db",Bt=1,tt="trainings";async function nt(){return xt(Nt,Bt,{upgrade(e){e.objectStoreNames.contains("trainings")||e.createObjectStore("trainings"),e.objectStoreNames.contains("embeddings")||e.createObjectStore("embeddings")}})}async function Ot(){return(await(await nt()).get("trainings",tt))?.records??null}async function Rt(e){await(await nt()).put("trainings",{updatedAt:Date.now(),records:e},tt)}function rt(){const e=new URLSearchParams(window.location.search);return{site:e.get("site"),list:e.get("list"),mode:e.get("mode")}}function jt(){const e=rt();return e.mode==="sharepoint"?"sharepoint":e.mode==="demo"?"demo_json":window.location.hostname.includes("sharepoint.com")?"sharepoint":"demo_json"}const Be=rt(),te={dataSource:jt(),sharepoint:{siteRelativeUrl:Be.site||"/sites/EuroWCPHE",listTitle:Be.list||"Copytraininglist2912026"},searchMode:"fast",embeddingModel:"bge-small",allowRemoteModels:!0,modelsBasePath:"./models"};function Ft(){const[e,t]=I(null),[n,o]=I(null),[i,r]=I("idle"),[s,c]=I(0),[_,l]=I("Initializing..."),[f,a]=I(!1),[p,h]=I(""),[v,C]=I(null),[y,w]=I(null),[b,D]=I(null),S=gt(()=>i==="ready",[i]);mt(()=>{$()},[]);async function $(){r("data"),l("Loading training data..."),c(5);try{const u=await Ot();u&&u.length&&(t(u),o(Ae(u)),c(15));const m=te.dataSource==="demo_json"?await bt():await H();t(m),o(Ae(m)),await Rt(m),c(30)}catch(u){console.error("Failed to load data:",u),l("Error loading data. Please refresh.");return}c(100),r("ready"),l("")}async function H(){const{fetchAllListItems:u}=await ht(async()=>{const{fetchAllListItems:m}=await import("./sharepoint-BSZBMNpd.js");return{fetchAllListItems:m}},[],import.meta.url);return u({siteRelativeUrl:te.sharepoint.siteRelativeUrl,listTitle:te.sharepoint.listTitle})}async function j(u){if(!e||!n)return;const m=N(u);w(m);const g=kt(e,{modality:m.modality,language:m.language,platform:m.platform,audienceContains:m.audience});let L;L=Et(g,m.topic,n);const Y=L.slice(0,10);C(Y)}function N(u){const m=u.toLowerCase();let g=u;const L={topic:u,rawQuery:u},Y=["english","french","spanish","russian","arabic","portuguese","chinese","ukrainian","polish"];for(const J of Y){const ge=new RegExp(`\\b(in\\s+)?${J}\\b`,"gi");if(ge.test(m)){L.language=J.charAt(0).toUpperCase()+J.slice(1),g=g.replace(ge,"");break}}return/\bonline\b|e-learning/i.test(m)?(L.modality="online",g=g.replace(/\bonline\b|e-learning/gi,"")):/\bin[- ]person\b/i.test(m)?(L.modality="in_person",g=g.replace(/\bin[- ]person\b/gi,"")):/\bblended\b/i.test(m)&&(L.modality="blended",g=g.replace(/\bblended\b/gi,"")),/openwho/i.test(m)?(L.platform="OpenWHO",g=g.replace(/openwho/gi,"")):/who academy/i.test(m)?(L.platform="WHO Academy",g=g.replace(/who academy/gi,"")):/hslp/i.test(m)&&(L.platform="HSLP",g=g.replace(/hslp/gi,"")),/member state|ministry/i.test(m)?L.audience="Member":/who staff/i.test(m)&&(L.audience="WHO"),g=g.replace(/\b(i need|i want|i'm looking for|looking for|find me|show me|a training|training|about|on|for)\b/gi,"").replace(/\s+/g," ").trim(),L.topic=g||"health emergency",L}async function A(){const u=p.trim();!u||!S||(h(""),await j(u))}return d("div",{class:"embed-container",children:[i!=="ready"&&d("div",{class:"loading-overlay",children:d("div",{class:"loading-content",children:[d("div",{class:"loading-title",children:"WHO PHHE Training Finder"}),d("div",{class:"loading-bar-container",children:d("div",{class:"loading-bar",style:{width:`${s}%`}})}),d("div",{class:"loading-text",children:_}),d("div",{class:"loading-percent",children:[s,"%"]})]})}),d("div",{class:`embed-main ${i!=="ready"?"hidden":""}`,children:[d("div",{class:"embed-header",children:d("div",{class:"embed-header-text",children:[d("span",{class:"embed-title",children:"WHO PHHE Training Finder"}),d("span",{class:"embed-subtitle",children:"WHO European Centre for Preparedness for Humanitarian and Health Emergencies (PHHE)"})]})}),d("div",{class:"embed-chat",children:d("div",{class:"embed-composer",children:[d("input",{type:"text",value:p,placeholder:"Describe the training you need...",disabled:!S,onInput:u=>h(u.target.value),onKeyDown:u=>{u.key==="Enter"&&A()}}),d("button",{class:"embed-send",disabled:!S,onClick:()=>void A(),children:"Search"})]})}),v&&v.length>0&&d("div",{class:"embed-results",children:[y&&d("div",{class:"embed-filters",children:[d("strong",{children:"Topic:"})," ",y.topic,y.language&&d("span",{class:"filter-pill",children:y.language}),y.modality&&d("span",{class:"filter-pill",children:y.modality}),y.platform&&d("span",{class:"filter-pill",children:y.platform})]}),v.map((u,m)=>{const g=b===m;return d("div",{class:`embed-card ${g?"expanded":""}`,onClick:()=>D(g?null:m),children:[d("div",{class:"card-header",children:[d("div",{class:"card-title",children:u.record.learningName}),d("span",{class:"card-expand-icon",children:g?"▼":"▶"})]}),!g&&d("div",{class:"card-desc",children:[u.record.description?.slice(0,120),u.record.description&&u.record.description.length>120?"...":""]}),d("div",{class:"card-tags",children:[u.record.technicalArea&&d("span",{class:"tag",children:u.record.technicalArea}),u.record.modality&&u.record.modality!=="unknown"&&d("span",{class:"tag",children:u.record.modality}),u.record.platform&&d("span",{class:"tag",children:u.record.platform}),u.record.languages.length>0&&d("span",{class:"tag",children:u.record.languages.slice(0,3).join(", ")})]}),g&&d("div",{class:"card-details",children:[u.record.description&&d("div",{class:"detail-row",children:[d("span",{class:"detail-label",children:"Description"}),d("p",{class:"detail-value",children:u.record.description})]}),u.record.intendedAudience&&d("div",{class:"detail-row",children:[d("span",{class:"detail-label",children:"Target Audience"}),d("p",{class:"detail-value",children:u.record.intendedAudience})]}),u.record.focusArea&&d("div",{class:"detail-row",children:[d("span",{class:"detail-label",children:"Focus Area"}),d("p",{class:"detail-value",children:u.record.focusArea})]}),u.record.languages.length>0&&d("div",{class:"detail-row",children:[d("span",{class:"detail-label",children:"Languages"}),d("p",{class:"detail-value",children:u.record.languages.join(", ")})]}),u.record.owner&&d("div",{class:"detail-row",children:[d("span",{class:"detail-label",children:"Owner"}),d("p",{class:"detail-value",children:u.record.owner})]}),u.record.developer&&d("div",{class:"detail-row",children:[d("span",{class:"detail-label",children:"Developer"}),d("p",{class:"detail-value",children:u.record.developer})]}),u.record.contactDetails&&d("div",{class:"detail-row",children:[d("span",{class:"detail-label",children:"Contact"}),d("p",{class:"detail-value",children:u.record.contactDetails})]}),u.record.normalizedLink&&d("a",{class:"card-link",href:u.record.normalizedLink,target:"_blank",rel:"noreferrer",onClick:L=>L.stopPropagation(),children:"Open training"})]})]},m)})]})]})]})}_t(d(Ft,{}),document.getElementById("app"));
//# sourceMappingURL=main-C8G5CS06.js.map
