{"version":3,"mappings":"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","names":["n","l","u","i","o","r","e","f","c","s","a","p","v","y","d","w","g","_","t","m","k","x","S","C","M","$","O","N","I","h","b","P","B","A","L","D","T","j","F","H","E","V","z","q","G","loadDemoTrainings","data","tokenize","buildLexicalIndex","records","df","docs","totalLen","terms","tf","len","bm25Score","index","query","qTerms","scores","doc","score","n_t","idf","denom","applyStructuredFilters","filters","wanted","rankLexical","ranked","reasons","instanceOfAny","object","constructors","idbProxyableTypes","cursorAdvanceMethods","getIdbProxyableTypes","getCursorAdvanceMethods","transactionDoneMap","transformCache","reverseTransformCache","promisifyRequest","request","promise","resolve","reject","unlisten","success","error","wrap","cacheDonePromiseForTransaction","tx","done","complete","idbProxyTraps","target","prop","receiver","value","replaceTraps","callback","wrapFunction","func","args","unwrap","transformCachableValue","newValue","openDB","name","version","blocked","upgrade","blocking","terminated","openPromise","event","db","readMethods","writeMethods","cachedMethods","getMethod","targetFuncName","useIndex","isWrite","method","storeName","oldTraps","advanceMethodProps","methodMap","advanceResults","ittrProxiedCursorToOriginalProxy","cursorIteratorTraps","cachedFunc","iterate","cursor","proxiedCursor","isIteratorProp","DB_NAME","DB_VERSION","TRAININGS_KEY","loadCachedTrainings","saveCachedTrainings","CONFIG","AppEmbed","setRecords","useState","setIndex","stage","setStage","progress","setProgress","statusText","setStatusText","embeddingsReady","setEmbeddingsReady","input","setInput","lastResults","setLastResults","lastIntent","setLastIntent","isReady","useMemo","useEffect","initializeApp","cached","fresh","loadSharePointData","fetchAllListItems","__vitePreload","runSearch","userText","intent","fallbackExtractIntent","filtered","top","topic","languages","lang","langPattern","onSend","text","jsxs","jsx","render"],"ignoreList":[0,1,2,5],"sources":["../../node_modules/preact/dist/preact.module.js","../../node_modules/preact/jsx-runtime/dist/jsxRuntime.module.js","../../node_modules/preact/hooks/dist/hooks.module.js","../../src/lib/demo.ts","../../src/lib/search.ts","../../node_modules/idb/build/index.js","../../src/lib/cache.ts","../../src/ui/AppEmbed.tsx","../../src/main-embed.tsx"],"sourcesContent":["var n,l,u,t,i,o,r,e,f,c,s,a,h,p={},v=[],y=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,d=Array.isArray;function w(n,l){for(var u in l)n[u]=l[u];return n}function g(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function _(l,u,t){var i,o,r,e={};for(r in u)\"key\"==r?i=u[r]:\"ref\"==r?o=u[r]:e[r]=u[r];if(arguments.length>2&&(e.children=arguments.length>3?n.call(arguments,2):t),\"function\"==typeof l&&null!=l.defaultProps)for(r in l.defaultProps)void 0===e[r]&&(e[r]=l.defaultProps[r]);return m(l,e,i,o,null)}function m(n,t,i,o,r){var e={type:n,props:t,key:i,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==r?++u:r,__i:-1,__u:0};return null==r&&null!=l.vnode&&l.vnode(e),e}function b(){return{current:null}}function k(n){return n.children}function x(n,l){this.props=n,this.context=l}function S(n,l){if(null==l)return n.__?S(n.__,n.__i+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return\"function\"==typeof n.type?S(n):null}function C(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return C(n)}}function M(n){(!n.__d&&(n.__d=!0)&&i.push(n)&&!$.__r++||o!=l.debounceRendering)&&((o=l.debounceRendering)||r)($)}function $(){for(var n,u,t,o,r,f,c,s=1;i.length;)i.length>s&&i.sort(e),n=i.shift(),s=i.length,n.__d&&(t=void 0,o=void 0,r=(o=(u=n).__v).__e,f=[],c=[],u.__P&&((t=w({},o)).__v=o.__v+1,l.vnode&&l.vnode(t),O(u.__P,t,o,u.__n,u.__P.namespaceURI,32&o.__u?[r]:null,f,null==r?S(o):r,!!(32&o.__u),c),t.__v=o.__v,t.__.__k[t.__i]=t,N(f,t,c),o.__e=o.__=null,t.__e!=r&&C(t)));$.__r=0}function I(n,l,u,t,i,o,r,e,f,c,s){var a,h,y,d,w,g,_,m=t&&t.__k||v,b=l.length;for(f=P(u,l,m,f,b),a=0;a<b;a++)null!=(y=u.__k[a])&&(h=-1==y.__i?p:m[y.__i]||p,y.__i=a,g=O(n,y,h,i,o,r,e,f,c,s),d=y.__e,y.ref&&h.ref!=y.ref&&(h.ref&&B(h.ref,null,y),s.push(y.ref,y.__c||d,y)),null==w&&null!=d&&(w=d),(_=!!(4&y.__u))||h.__k===y.__k?f=A(y,f,n,_):\"function\"==typeof y.type&&void 0!==g?f=g:d&&(f=d.nextSibling),y.__u&=-7);return u.__e=w,f}function P(n,l,u,t,i){var o,r,e,f,c,s=u.length,a=s,h=0;for(n.__k=new Array(i),o=0;o<i;o++)null!=(r=l[o])&&\"boolean\"!=typeof r&&\"function\"!=typeof r?(\"string\"==typeof r||\"number\"==typeof r||\"bigint\"==typeof r||r.constructor==String?r=n.__k[o]=m(null,r,null,null,null):d(r)?r=n.__k[o]=m(k,{children:r},null,null,null):void 0===r.constructor&&r.__b>0?r=n.__k[o]=m(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):n.__k[o]=r,f=o+h,r.__=n,r.__b=n.__b+1,e=null,-1!=(c=r.__i=L(r,u,f,a))&&(a--,(e=u[c])&&(e.__u|=2)),null==e||null==e.__v?(-1==c&&(i>s?h--:i<s&&h++),\"function\"!=typeof r.type&&(r.__u|=4)):c!=f&&(c==f-1?h--:c==f+1?h++:(c>f?h--:h++,r.__u|=4))):n.__k[o]=null;if(a)for(o=0;o<s;o++)null!=(e=u[o])&&0==(2&e.__u)&&(e.__e==t&&(t=S(e)),D(e,e));return t}function A(n,l,u,t){var i,o;if(\"function\"==typeof n.type){for(i=n.__k,o=0;i&&o<i.length;o++)i[o]&&(i[o].__=n,l=A(i[o],l,u,t));return l}n.__e!=l&&(t&&(l&&n.type&&!l.parentNode&&(l=S(n)),u.insertBefore(n.__e,l||null)),l=n.__e);do{l=l&&l.nextSibling}while(null!=l&&8==l.nodeType);return l}function H(n,l){return l=l||[],null==n||\"boolean\"==typeof n||(d(n)?n.some(function(n){H(n,l)}):l.push(n)),l}function L(n,l,u,t){var i,o,r,e=n.key,f=n.type,c=l[u],s=null!=c&&0==(2&c.__u);if(null===c&&null==e||s&&e==c.key&&f==c.type)return u;if(t>(s?1:0))for(i=u-1,o=u+1;i>=0||o<l.length;)if(null!=(c=l[r=i>=0?i--:o++])&&0==(2&c.__u)&&e==c.key&&f==c.type)return r;return-1}function T(n,l,u){\"-\"==l[0]?n.setProperty(l,null==u?\"\":u):n[l]=null==u?\"\":\"number\"!=typeof u||y.test(l)?u:u+\"px\"}function j(n,l,u,t,i){var o,r;n:if(\"style\"==l)if(\"string\"==typeof u)n.style.cssText=u;else{if(\"string\"==typeof t&&(n.style.cssText=t=\"\"),t)for(l in t)u&&l in u||T(n.style,l,\"\");if(u)for(l in u)t&&u[l]==t[l]||T(n.style,l,u[l])}else if(\"o\"==l[0]&&\"n\"==l[1])o=l!=(l=l.replace(f,\"$1\")),r=l.toLowerCase(),l=r in n||\"onFocusOut\"==l||\"onFocusIn\"==l?r.slice(2):l.slice(2),n.l||(n.l={}),n.l[l+o]=u,u?t?u.u=t.u:(u.u=c,n.addEventListener(l,o?a:s,o)):n.removeEventListener(l,o?a:s,o);else{if(\"http://www.w3.org/2000/svg\"==i)l=l.replace(/xlink(H|:h)/,\"h\").replace(/sName$/,\"s\");else if(\"width\"!=l&&\"height\"!=l&&\"href\"!=l&&\"list\"!=l&&\"form\"!=l&&\"tabIndex\"!=l&&\"download\"!=l&&\"rowSpan\"!=l&&\"colSpan\"!=l&&\"role\"!=l&&\"popover\"!=l&&l in n)try{n[l]=null==u?\"\":u;break n}catch(n){}\"function\"==typeof u||(null==u||!1===u&&\"-\"!=l[4]?n.removeAttribute(l):n.setAttribute(l,\"popover\"==l&&1==u?\"\":u))}}function F(n){return function(u){if(this.l){var t=this.l[u.type+n];if(null==u.t)u.t=c++;else if(u.t<t.u)return;return t(l.event?l.event(u):u)}}}function O(n,u,t,i,o,r,e,f,c,s){var a,h,p,v,y,_,m,b,S,C,M,$,P,A,H,L,T,j=u.type;if(void 0!==u.constructor)return null;128&t.__u&&(c=!!(32&t.__u),r=[f=u.__e=t.__e]),(a=l.__b)&&a(u);n:if(\"function\"==typeof j)try{if(b=u.props,S=\"prototype\"in j&&j.prototype.render,C=(a=j.contextType)&&i[a.__c],M=a?C?C.props.value:a.__:i,t.__c?m=(h=u.__c=t.__c).__=h.__E:(S?u.__c=h=new j(b,M):(u.__c=h=new x(b,M),h.constructor=j,h.render=E),C&&C.sub(h),h.state||(h.state={}),h.__n=i,p=h.__d=!0,h.__h=[],h._sb=[]),S&&null==h.__s&&(h.__s=h.state),S&&null!=j.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=w({},h.__s)),w(h.__s,j.getDerivedStateFromProps(b,h.__s))),v=h.props,y=h.state,h.__v=u,p)S&&null==j.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),S&&null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(S&&null==j.getDerivedStateFromProps&&b!==v&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(b,M),u.__v==t.__v||!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(b,h.__s,M)){for(u.__v!=t.__v&&(h.props=b,h.state=h.__s,h.__d=!1),u.__e=t.__e,u.__k=t.__k,u.__k.some(function(n){n&&(n.__=u)}),$=0;$<h._sb.length;$++)h.__h.push(h._sb[$]);h._sb=[],h.__h.length&&e.push(h);break n}null!=h.componentWillUpdate&&h.componentWillUpdate(b,h.__s,M),S&&null!=h.componentDidUpdate&&h.__h.push(function(){h.componentDidUpdate(v,y,_)})}if(h.context=M,h.props=b,h.__P=n,h.__e=!1,P=l.__r,A=0,S){for(h.state=h.__s,h.__d=!1,P&&P(u),a=h.render(h.props,h.state,h.context),H=0;H<h._sb.length;H++)h.__h.push(h._sb[H]);h._sb=[]}else do{h.__d=!1,P&&P(u),a=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++A<25);h.state=h.__s,null!=h.getChildContext&&(i=w(w({},i),h.getChildContext())),S&&!p&&null!=h.getSnapshotBeforeUpdate&&(_=h.getSnapshotBeforeUpdate(v,y)),L=a,null!=a&&a.type===k&&null==a.key&&(L=V(a.props.children)),f=I(n,d(L)?L:[L],u,t,i,o,r,e,f,c,s),h.base=u.__e,u.__u&=-161,h.__h.length&&e.push(h),m&&(h.__E=h.__=null)}catch(n){if(u.__v=null,c||null!=r)if(n.then){for(u.__u|=c?160:128;f&&8==f.nodeType&&f.nextSibling;)f=f.nextSibling;r[r.indexOf(f)]=null,u.__e=f}else{for(T=r.length;T--;)g(r[T]);z(u)}else u.__e=t.__e,u.__k=t.__k,n.then||z(u);l.__e(n,u,t)}else null==r&&u.__v==t.__v?(u.__k=t.__k,u.__e=t.__e):f=u.__e=q(t.__e,u,t,i,o,r,e,c,s);return(a=l.diffed)&&a(u),128&u.__u?void 0:f}function z(n){n&&n.__c&&(n.__c.__e=!0),n&&n.__k&&n.__k.forEach(z)}function N(n,u,t){for(var i=0;i<t.length;i++)B(t[i],t[++i],t[++i]);l.__c&&l.__c(u,n),n.some(function(u){try{n=u.__h,u.__h=[],n.some(function(n){n.call(u)})}catch(n){l.__e(n,u.__v)}})}function V(n){return\"object\"!=typeof n||null==n||n.__b&&n.__b>0?n:d(n)?n.map(V):w({},n)}function q(u,t,i,o,r,e,f,c,s){var a,h,v,y,w,_,m,b=i.props||p,k=t.props,x=t.type;if(\"svg\"==x?r=\"http://www.w3.org/2000/svg\":\"math\"==x?r=\"http://www.w3.org/1998/Math/MathML\":r||(r=\"http://www.w3.org/1999/xhtml\"),null!=e)for(a=0;a<e.length;a++)if((w=e[a])&&\"setAttribute\"in w==!!x&&(x?w.localName==x:3==w.nodeType)){u=w,e[a]=null;break}if(null==u){if(null==x)return document.createTextNode(k);u=document.createElementNS(r,x,k.is&&k),c&&(l.__m&&l.__m(t,e),c=!1),e=null}if(null==x)b===k||c&&u.data==k||(u.data=k);else{if(e=e&&n.call(u.childNodes),!c&&null!=e)for(b={},a=0;a<u.attributes.length;a++)b[(w=u.attributes[a]).name]=w.value;for(a in b)if(w=b[a],\"children\"==a);else if(\"dangerouslySetInnerHTML\"==a)v=w;else if(!(a in k)){if(\"value\"==a&&\"defaultValue\"in k||\"checked\"==a&&\"defaultChecked\"in k)continue;j(u,a,null,w,r)}for(a in k)w=k[a],\"children\"==a?y=w:\"dangerouslySetInnerHTML\"==a?h=w:\"value\"==a?_=w:\"checked\"==a?m=w:c&&\"function\"!=typeof w||b[a]===w||j(u,a,w,b[a],r);if(h)c||v&&(h.__html==v.__html||h.__html==u.innerHTML)||(u.innerHTML=h.__html),t.__k=[];else if(v&&(u.innerHTML=\"\"),I(\"template\"==t.type?u.content:u,d(y)?y:[y],t,i,o,\"foreignObject\"==x?\"http://www.w3.org/1999/xhtml\":r,e,f,e?e[0]:i.__k&&S(i,0),c,s),null!=e)for(a=e.length;a--;)g(e[a]);c||(a=\"value\",\"progress\"==x&&null==_?u.removeAttribute(\"value\"):null!=_&&(_!==u[a]||\"progress\"==x&&!_||\"option\"==x&&_!=b[a])&&j(u,a,_,b[a],r),a=\"checked\",null!=m&&m!=u[a]&&j(u,a,m,b[a],r))}return u}function B(n,u,t){try{if(\"function\"==typeof n){var i=\"function\"==typeof n.__u;i&&n.__u(),i&&null==u||(n.__u=n(u))}else n.current=u}catch(n){l.__e(n,t)}}function D(n,u,t){var i,o;if(l.unmount&&l.unmount(n),(i=n.ref)&&(i.current&&i.current!=n.__e||B(i,null,u)),null!=(i=n.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(n){l.__e(n,u)}i.base=i.__P=null}if(i=n.__k)for(o=0;o<i.length;o++)i[o]&&D(i[o],u,t||\"function\"!=typeof n.type);t||g(n.__e),n.__c=n.__=n.__e=void 0}function E(n,l,u){return this.constructor(n,u)}function G(u,t,i){var o,r,e,f;t==document&&(t=document.documentElement),l.__&&l.__(u,t),r=(o=\"function\"==typeof i)?null:i&&i.__k||t.__k,e=[],f=[],O(t,u=(!o&&i||t).__k=_(k,null,[u]),r||p,p,t.namespaceURI,!o&&i?[i]:r?null:t.firstChild?n.call(t.childNodes):null,e,!o&&i?i:r?r.__e:t.firstChild,o,f),N(e,u,f)}function J(n,l){G(n,l,J)}function K(l,u,t){var i,o,r,e,f=w({},l.props);for(r in l.type&&l.type.defaultProps&&(e=l.type.defaultProps),u)\"key\"==r?i=u[r]:\"ref\"==r?o=u[r]:f[r]=void 0===u[r]&&null!=e?e[r]:u[r];return arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):t),m(l.type,f,i||l.key,o||l.ref,null)}function Q(n){function l(n){var u,t;return this.getChildContext||(u=new Set,(t={})[l.__c]=this,this.getChildContext=function(){return t},this.componentWillUnmount=function(){u=null},this.shouldComponentUpdate=function(n){this.props.value!=n.value&&u.forEach(function(n){n.__e=!0,M(n)})},this.sub=function(n){u.add(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){u&&u.delete(n),l&&l.call(n)}}),n.children}return l.__c=\"__cC\"+h++,l.__=n,l.Provider=l.__l=(l.Consumer=function(n,l){return n.children(l)}).contextType=l,l}n=v.slice,l={__e:function(n,l,u,t){for(var i,o,r;l=l.__;)if((i=l.__c)&&!i.__)try{if((o=i.constructor)&&null!=o.getDerivedStateFromError&&(i.setState(o.getDerivedStateFromError(n)),r=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(n,t||{}),r=i.__d),r)return i.__E=i}catch(l){n=l}throw n}},u=0,t=function(n){return null!=n&&void 0===n.constructor},x.prototype.setState=function(n,l){var u;u=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=w({},this.state),\"function\"==typeof n&&(n=n(w({},u),this.props)),n&&w(u,n),null!=n&&this.__v&&(l&&this._sb.push(l),M(this))},x.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),M(this))},x.prototype.render=k,i=[],r=\"function\"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,e=function(n,l){return n.__v.__b-l.__v.__b},$.__r=0,f=/(PointerCapture)$|Capture$/i,c=0,s=F(!1),a=F(!0),h=0;export{x as Component,k as Fragment,K as cloneElement,Q as createContext,_ as createElement,b as createRef,_ as h,J as hydrate,t as isValidElement,l as options,G as render,H as toChildArray};\n//# sourceMappingURL=preact.module.js.map\n","import{options as r,Fragment as e}from\"preact\";export{Fragment}from\"preact\";var t=/[\"&<]/;function n(r){if(0===r.length||!1===t.test(r))return r;for(var e=0,n=0,o=\"\",f=\"\";n<r.length;n++){switch(r.charCodeAt(n)){case 34:f=\"&quot;\";break;case 38:f=\"&amp;\";break;case 60:f=\"&lt;\";break;default:continue}n!==e&&(o+=r.slice(e,n)),o+=f,e=n+1}return n!==e&&(o+=r.slice(e,n)),o}var o=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,f=0,i=Array.isArray;function u(e,t,n,o,i,u){t||(t={});var a,c,p=t;if(\"ref\"in p)for(c in p={},t)\"ref\"==c?a=t[c]:p[c]=t[c];var l={type:e,props:p,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--f,__i:-1,__u:0,__source:i,__self:u};if(\"function\"==typeof e&&(a=e.defaultProps))for(c in a)void 0===p[c]&&(p[c]=a[c]);return r.vnode&&r.vnode(l),l}function a(r){var t=u(e,{tpl:r,exprs:[].slice.call(arguments,1)});return t.key=t.__v,t}var c={},p=/[A-Z]/g;function l(e,t){if(r.attr){var f=r.attr(e,t);if(\"string\"==typeof f)return f}if(t=function(r){return null!==r&&\"object\"==typeof r&&\"function\"==typeof r.valueOf?r.valueOf():r}(t),\"ref\"===e||\"key\"===e)return\"\";if(\"style\"===e&&\"object\"==typeof t){var i=\"\";for(var u in t){var a=t[u];if(null!=a&&\"\"!==a){var l=\"-\"==u[0]?u:c[u]||(c[u]=u.replace(p,\"-$&\").toLowerCase()),s=\";\";\"number\"!=typeof a||l.startsWith(\"--\")||o.test(l)||(s=\"px;\"),i=i+l+\":\"+a+s}}return e+'=\"'+n(i)+'\"'}return null==t||!1===t||\"function\"==typeof t||\"object\"==typeof t?\"\":!0===t?e:e+'=\"'+n(\"\"+t)+'\"'}function s(r){if(null==r||\"boolean\"==typeof r||\"function\"==typeof r)return null;if(\"object\"==typeof r){if(void 0===r.constructor)return r;if(i(r)){for(var e=0;e<r.length;e++)r[e]=s(r[e]);return r}}return n(\"\"+r)}export{u as jsx,l as jsxAttr,u as jsxDEV,s as jsxEscape,a as jsxTemplate,u as jsxs};\n//# sourceMappingURL=jsxRuntime.module.js.map\n","import{options as n}from\"preact\";var t,r,u,i,o=0,f=[],c=n,e=c.__b,a=c.__r,v=c.diffed,l=c.__c,m=c.unmount,s=c.__;function p(n,t){c.__h&&c.__h(r,n,o||t),o=0;var u=r.__H||(r.__H={__:[],__h:[]});return n>=u.__.length&&u.__.push({}),u.__[n]}function d(n){return o=1,h(D,n)}function h(n,u,i){var o=p(t++,2);if(o.t=n,!o.__c&&(o.__=[i?i(u):D(void 0,u),function(n){var t=o.__N?o.__N[0]:o.__[0],r=o.t(t,n);t!==r&&(o.__N=[r,o.__[1]],o.__c.setState({}))}],o.__c=r,!r.__f)){var f=function(n,t,r){if(!o.__c.__H)return!0;var u=o.__c.__H.__.filter(function(n){return!!n.__c});if(u.every(function(n){return!n.__N}))return!c||c.call(this,n,t,r);var i=o.__c.props!==n;return u.forEach(function(n){if(n.__N){var t=n.__[0];n.__=n.__N,n.__N=void 0,t!==n.__[0]&&(i=!0)}}),c&&c.call(this,n,t,r)||i};r.__f=!0;var c=r.shouldComponentUpdate,e=r.componentWillUpdate;r.componentWillUpdate=function(n,t,r){if(this.__e){var u=c;c=void 0,f(n,t,r),c=u}e&&e.call(this,n,t,r)},r.shouldComponentUpdate=f}return o.__N||o.__}function y(n,u){var i=p(t++,3);!c.__s&&C(i.__H,u)&&(i.__=n,i.u=u,r.__H.__h.push(i))}function _(n,u){var i=p(t++,4);!c.__s&&C(i.__H,u)&&(i.__=n,i.u=u,r.__h.push(i))}function A(n){return o=5,T(function(){return{current:n}},[])}function F(n,t,r){o=6,_(function(){if(\"function\"==typeof n){var r=n(t());return function(){n(null),r&&\"function\"==typeof r&&r()}}if(n)return n.current=t(),function(){return n.current=null}},null==r?r:r.concat(n))}function T(n,r){var u=p(t++,7);return C(u.__H,r)&&(u.__=n(),u.__H=r,u.__h=n),u.__}function q(n,t){return o=8,T(function(){return n},t)}function x(n){var u=r.context[n.__c],i=p(t++,9);return i.c=n,u?(null==i.__&&(i.__=!0,u.sub(r)),u.props.value):n.__}function P(n,t){c.useDebugValue&&c.useDebugValue(t?t(n):n)}function b(n){var u=p(t++,10),i=d();return u.__=n,r.componentDidCatch||(r.componentDidCatch=function(n,t){u.__&&u.__(n,t),i[1](n)}),[i[0],function(){i[1](void 0)}]}function g(){var n=p(t++,11);if(!n.__){for(var u=r.__v;null!==u&&!u.__m&&null!==u.__;)u=u.__;var i=u.__m||(u.__m=[0,0]);n.__=\"P\"+i[0]+\"-\"+i[1]++}return n.__}function j(){for(var n;n=f.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(z),n.__H.__h.forEach(B),n.__H.__h=[]}catch(t){n.__H.__h=[],c.__e(t,n.__v)}}c.__b=function(n){r=null,e&&e(n)},c.__=function(n,t){n&&t.__k&&t.__k.__m&&(n.__m=t.__k.__m),s&&s(n,t)},c.__r=function(n){a&&a(n),t=0;var i=(r=n.__c).__H;i&&(u===r?(i.__h=[],r.__h=[],i.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(i.__h.forEach(z),i.__h.forEach(B),i.__h=[],t=0)),u=r},c.diffed=function(n){v&&v(n);var t=n.__c;t&&t.__H&&(t.__H.__h.length&&(1!==f.push(t)&&i===c.requestAnimationFrame||((i=c.requestAnimationFrame)||w)(j)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),u=r=null},c.__c=function(n,t){t.some(function(n){try{n.__h.forEach(z),n.__h=n.__h.filter(function(n){return!n.__||B(n)})}catch(r){t.some(function(n){n.__h&&(n.__h=[])}),t=[],c.__e(r,n.__v)}}),l&&l(n,t)},c.unmount=function(n){m&&m(n);var t,r=n.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{z(n)}catch(n){t=n}}),r.__H=void 0,t&&c.__e(t,r.__v))};var k=\"function\"==typeof requestAnimationFrame;function w(n){var t,r=function(){clearTimeout(u),k&&cancelAnimationFrame(t),setTimeout(n)},u=setTimeout(r,35);k&&(t=requestAnimationFrame(r))}function z(n){var t=r,u=n.__c;\"function\"==typeof u&&(n.__c=void 0,u()),r=t}function B(n){var t=r;n.__c=n.__(),r=t}function C(n,t){return!n||n.length!==t.length||t.some(function(t,r){return t!==n[r]})}function D(n,t){return\"function\"==typeof t?t(n):t}export{q as useCallback,x as useContext,P as useDebugValue,y as useEffect,b as useErrorBoundary,g as useId,F as useImperativeHandle,_ as useLayoutEffect,T as useMemo,h as useReducer,A as useRef,d as useState};\n//# sourceMappingURL=hooks.module.js.map\n","import type { TrainingRecord } from \"./schema\";\r\n\r\nexport async function loadDemoTrainings(): Promise<TrainingRecord[]> {\r\n  const r = await fetch(\"./demo-trainings.json\", { credentials: \"same-origin\" });\r\n  if (!r.ok) throw new Error(`Failed to load demo-trainings.json (${r.status})`);\r\n  const data = (await r.json()) as unknown;\r\n  if (!Array.isArray(data)) throw new Error(\"demo-trainings.json is not an array\");\r\n  return data as TrainingRecord[];\r\n}\r\n\r\n","import type { RankedTraining, TrainingRecord } from \"./schema\";\r\n\r\nfunction tokenize(s: string): string[] {\r\n  return s\r\n    .toLowerCase()\r\n    .replace(/[^a-z0-9]+/gi, \" \")\r\n    .trim()\r\n    .split(/\\s+/)\r\n    .filter((t) => t.length >= 2);\r\n}\r\n\r\ntype DocIndex = {\r\n  record: TrainingRecord;\r\n  tf: Map<string, number>;\r\n  len: number;\r\n};\r\n\r\nexport type LexicalIndex = {\r\n  docs: DocIndex[];\r\n  df: Map<string, number>;\r\n  avgLen: number;\r\n  n: number;\r\n};\r\n\r\nexport function buildLexicalIndex(records: TrainingRecord[]): LexicalIndex {\r\n  const df = new Map<string, number>();\r\n  const docs: DocIndex[] = [];\r\n  let totalLen = 0;\r\n\r\n  for (const r of records) {\r\n    const terms = tokenize(r.searchText);\r\n    const tf = new Map<string, number>();\r\n    for (const t of terms) tf.set(t, (tf.get(t) ?? 0) + 1);\r\n    for (const t of tf.keys()) df.set(t, (df.get(t) ?? 0) + 1);\r\n    const len = terms.length;\r\n    totalLen += len;\r\n    docs.push({ record: r, tf, len });\r\n  }\r\n\r\n  return { docs, df, avgLen: docs.length ? totalLen / docs.length : 0, n: docs.length };\r\n}\r\n\r\nexport function bm25Score(index: LexicalIndex, query: string): Map<string, number> {\r\n  // Standard BM25\r\n  const k1 = 1.2;\r\n  const b = 0.75;\r\n  const qTerms = tokenize(query);\r\n  const scores = new Map<string, number>();\r\n\r\n  for (const doc of index.docs) {\r\n    let score = 0;\r\n    for (const t of qTerms) {\r\n      const f = doc.tf.get(t) ?? 0;\r\n      if (!f) continue;\r\n      const n_t = index.df.get(t) ?? 0;\r\n      const idf = Math.log(1 + (index.n - n_t + 0.5) / (n_t + 0.5));\r\n      const denom = f + k1 * (1 - b + (b * doc.len) / (index.avgLen || 1));\r\n      score += idf * ((f * (k1 + 1)) / denom);\r\n    }\r\n    if (score > 0) scores.set(doc.record.id, score);\r\n  }\r\n\r\n  return scores;\r\n}\r\n\r\nexport function applyStructuredFilters(\r\n  records: TrainingRecord[],\r\n  filters: {\r\n    modality?: string;\r\n    language?: string;\r\n    platform?: string;\r\n    audienceContains?: string;\r\n  }\r\n): TrainingRecord[] {\r\n  return records.filter((r) => {\r\n    if (filters.modality && r.modality !== filters.modality) return false;\r\n    if (filters.language) {\r\n      const wanted = filters.language.toLowerCase();\r\n      if (!r.languages.some((l) => l.toLowerCase() === wanted)) return false;\r\n    }\r\n    if (filters.platform) {\r\n      const p = filters.platform.toLowerCase();\r\n      if (!r.platform.toLowerCase().includes(p)) return false;\r\n    }\r\n    if (filters.audienceContains) {\r\n      const a = filters.audienceContains.toLowerCase();\r\n      if (!r.intendedAudience.toLowerCase().includes(a)) return false;\r\n    }\r\n    return true;\r\n  });\r\n}\r\n\r\nexport function rankLexical(\r\n  records: TrainingRecord[],\r\n  query: string,\r\n  index: LexicalIndex\r\n): RankedTraining[] {\r\n  const scores = bm25Score(index, query);\r\n  const ranked: RankedTraining[] = [];\r\n  for (const r of records) {\r\n    const s = scores.get(r.id) ?? 0;\r\n    if (s <= 0) continue;\r\n    const reasons: string[] = [];\r\n    if (r.learningName.toLowerCase().includes(query.toLowerCase())) reasons.push(\"title match\");\r\n    ranked.push({ record: r, score: s, reasons });\r\n  }\r\n  ranked.sort((a, b) => b.score - a.score);\r\n  return ranked;\r\n}\r\n\r\n","const instanceOfAny = (object, constructors) => constructors.some((c) => object instanceof c);\n\nlet idbProxyableTypes;\nlet cursorAdvanceMethods;\n// This is a function to prevent it throwing up in node environments.\nfunction getIdbProxyableTypes() {\n    return (idbProxyableTypes ||\n        (idbProxyableTypes = [\n            IDBDatabase,\n            IDBObjectStore,\n            IDBIndex,\n            IDBCursor,\n            IDBTransaction,\n        ]));\n}\n// This is a function to prevent it throwing up in node environments.\nfunction getCursorAdvanceMethods() {\n    return (cursorAdvanceMethods ||\n        (cursorAdvanceMethods = [\n            IDBCursor.prototype.advance,\n            IDBCursor.prototype.continue,\n            IDBCursor.prototype.continuePrimaryKey,\n        ]));\n}\nconst transactionDoneMap = new WeakMap();\nconst transformCache = new WeakMap();\nconst reverseTransformCache = new WeakMap();\nfunction promisifyRequest(request) {\n    const promise = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            request.removeEventListener('success', success);\n            request.removeEventListener('error', error);\n        };\n        const success = () => {\n            resolve(wrap(request.result));\n            unlisten();\n        };\n        const error = () => {\n            reject(request.error);\n            unlisten();\n        };\n        request.addEventListener('success', success);\n        request.addEventListener('error', error);\n    });\n    // This mapping exists in reverseTransformCache but doesn't exist in transformCache. This\n    // is because we create many promises from a single IDBRequest.\n    reverseTransformCache.set(promise, request);\n    return promise;\n}\nfunction cacheDonePromiseForTransaction(tx) {\n    // Early bail if we've already created a done promise for this transaction.\n    if (transactionDoneMap.has(tx))\n        return;\n    const done = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            tx.removeEventListener('complete', complete);\n            tx.removeEventListener('error', error);\n            tx.removeEventListener('abort', error);\n        };\n        const complete = () => {\n            resolve();\n            unlisten();\n        };\n        const error = () => {\n            reject(tx.error || new DOMException('AbortError', 'AbortError'));\n            unlisten();\n        };\n        tx.addEventListener('complete', complete);\n        tx.addEventListener('error', error);\n        tx.addEventListener('abort', error);\n    });\n    // Cache it for later retrieval.\n    transactionDoneMap.set(tx, done);\n}\nlet idbProxyTraps = {\n    get(target, prop, receiver) {\n        if (target instanceof IDBTransaction) {\n            // Special handling for transaction.done.\n            if (prop === 'done')\n                return transactionDoneMap.get(target);\n            // Make tx.store return the only store in the transaction, or undefined if there are many.\n            if (prop === 'store') {\n                return receiver.objectStoreNames[1]\n                    ? undefined\n                    : receiver.objectStore(receiver.objectStoreNames[0]);\n            }\n        }\n        // Else transform whatever we get back.\n        return wrap(target[prop]);\n    },\n    set(target, prop, value) {\n        target[prop] = value;\n        return true;\n    },\n    has(target, prop) {\n        if (target instanceof IDBTransaction &&\n            (prop === 'done' || prop === 'store')) {\n            return true;\n        }\n        return prop in target;\n    },\n};\nfunction replaceTraps(callback) {\n    idbProxyTraps = callback(idbProxyTraps);\n}\nfunction wrapFunction(func) {\n    // Due to expected object equality (which is enforced by the caching in `wrap`), we\n    // only create one new func per func.\n    // Cursor methods are special, as the behaviour is a little more different to standard IDB. In\n    // IDB, you advance the cursor and wait for a new 'success' on the IDBRequest that gave you the\n    // cursor. It's kinda like a promise that can resolve with many values. That doesn't make sense\n    // with real promises, so each advance methods returns a new promise for the cursor object, or\n    // undefined if the end of the cursor has been reached.\n    if (getCursorAdvanceMethods().includes(func)) {\n        return function (...args) {\n            // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n            // the original object.\n            func.apply(unwrap(this), args);\n            return wrap(this.request);\n        };\n    }\n    return function (...args) {\n        // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n        // the original object.\n        return wrap(func.apply(unwrap(this), args));\n    };\n}\nfunction transformCachableValue(value) {\n    if (typeof value === 'function')\n        return wrapFunction(value);\n    // This doesn't return, it just creates a 'done' promise for the transaction,\n    // which is later returned for transaction.done (see idbObjectHandler).\n    if (value instanceof IDBTransaction)\n        cacheDonePromiseForTransaction(value);\n    if (instanceOfAny(value, getIdbProxyableTypes()))\n        return new Proxy(value, idbProxyTraps);\n    // Return the same value back if we're not going to transform it.\n    return value;\n}\nfunction wrap(value) {\n    // We sometimes generate multiple promises from a single IDBRequest (eg when cursoring), because\n    // IDB is weird and a single IDBRequest can yield many responses, so these can't be cached.\n    if (value instanceof IDBRequest)\n        return promisifyRequest(value);\n    // If we've already transformed this value before, reuse the transformed value.\n    // This is faster, but it also provides object equality.\n    if (transformCache.has(value))\n        return transformCache.get(value);\n    const newValue = transformCachableValue(value);\n    // Not all types are transformed.\n    // These may be primitive types, so they can't be WeakMap keys.\n    if (newValue !== value) {\n        transformCache.set(value, newValue);\n        reverseTransformCache.set(newValue, value);\n    }\n    return newValue;\n}\nconst unwrap = (value) => reverseTransformCache.get(value);\n\n/**\n * Open a database.\n *\n * @param name Name of the database.\n * @param version Schema version.\n * @param callbacks Additional callbacks.\n */\nfunction openDB(name, version, { blocked, upgrade, blocking, terminated } = {}) {\n    const request = indexedDB.open(name, version);\n    const openPromise = wrap(request);\n    if (upgrade) {\n        request.addEventListener('upgradeneeded', (event) => {\n            upgrade(wrap(request.result), event.oldVersion, event.newVersion, wrap(request.transaction), event);\n        });\n    }\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event.newVersion, event));\n    }\n    openPromise\n        .then((db) => {\n        if (terminated)\n            db.addEventListener('close', () => terminated());\n        if (blocking) {\n            db.addEventListener('versionchange', (event) => blocking(event.oldVersion, event.newVersion, event));\n        }\n    })\n        .catch(() => { });\n    return openPromise;\n}\n/**\n * Delete a database.\n *\n * @param name Name of the database.\n */\nfunction deleteDB(name, { blocked } = {}) {\n    const request = indexedDB.deleteDatabase(name);\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event));\n    }\n    return wrap(request).then(() => undefined);\n}\n\nconst readMethods = ['get', 'getKey', 'getAll', 'getAllKeys', 'count'];\nconst writeMethods = ['put', 'add', 'delete', 'clear'];\nconst cachedMethods = new Map();\nfunction getMethod(target, prop) {\n    if (!(target instanceof IDBDatabase &&\n        !(prop in target) &&\n        typeof prop === 'string')) {\n        return;\n    }\n    if (cachedMethods.get(prop))\n        return cachedMethods.get(prop);\n    const targetFuncName = prop.replace(/FromIndex$/, '');\n    const useIndex = prop !== targetFuncName;\n    const isWrite = writeMethods.includes(targetFuncName);\n    if (\n    // Bail if the target doesn't exist on the target. Eg, getAll isn't in Edge.\n    !(targetFuncName in (useIndex ? IDBIndex : IDBObjectStore).prototype) ||\n        !(isWrite || readMethods.includes(targetFuncName))) {\n        return;\n    }\n    const method = async function (storeName, ...args) {\n        // isWrite ? 'readwrite' : undefined gzipps better, but fails in Edge :(\n        const tx = this.transaction(storeName, isWrite ? 'readwrite' : 'readonly');\n        let target = tx.store;\n        if (useIndex)\n            target = target.index(args.shift());\n        // Must reject if op rejects.\n        // If it's a write operation, must reject if tx.done rejects.\n        // Must reject with op rejection first.\n        // Must resolve with op value.\n        // Must handle both promises (no unhandled rejections)\n        return (await Promise.all([\n            target[targetFuncName](...args),\n            isWrite && tx.done,\n        ]))[0];\n    };\n    cachedMethods.set(prop, method);\n    return method;\n}\nreplaceTraps((oldTraps) => ({\n    ...oldTraps,\n    get: (target, prop, receiver) => getMethod(target, prop) || oldTraps.get(target, prop, receiver),\n    has: (target, prop) => !!getMethod(target, prop) || oldTraps.has(target, prop),\n}));\n\nconst advanceMethodProps = ['continue', 'continuePrimaryKey', 'advance'];\nconst methodMap = {};\nconst advanceResults = new WeakMap();\nconst ittrProxiedCursorToOriginalProxy = new WeakMap();\nconst cursorIteratorTraps = {\n    get(target, prop) {\n        if (!advanceMethodProps.includes(prop))\n            return target[prop];\n        let cachedFunc = methodMap[prop];\n        if (!cachedFunc) {\n            cachedFunc = methodMap[prop] = function (...args) {\n                advanceResults.set(this, ittrProxiedCursorToOriginalProxy.get(this)[prop](...args));\n            };\n        }\n        return cachedFunc;\n    },\n};\nasync function* iterate(...args) {\n    // tslint:disable-next-line:no-this-assignment\n    let cursor = this;\n    if (!(cursor instanceof IDBCursor)) {\n        cursor = await cursor.openCursor(...args);\n    }\n    if (!cursor)\n        return;\n    cursor = cursor;\n    const proxiedCursor = new Proxy(cursor, cursorIteratorTraps);\n    ittrProxiedCursorToOriginalProxy.set(proxiedCursor, cursor);\n    // Map this double-proxy back to the original, so other cursor methods work.\n    reverseTransformCache.set(proxiedCursor, unwrap(cursor));\n    while (cursor) {\n        yield proxiedCursor;\n        // If one of the advancing methods was not called, call continue().\n        cursor = await (advanceResults.get(proxiedCursor) || cursor.continue());\n        advanceResults.delete(proxiedCursor);\n    }\n}\nfunction isIteratorProp(target, prop) {\n    return ((prop === Symbol.asyncIterator &&\n        instanceOfAny(target, [IDBIndex, IDBObjectStore, IDBCursor])) ||\n        (prop === 'iterate' && instanceOfAny(target, [IDBIndex, IDBObjectStore])));\n}\nreplaceTraps((oldTraps) => ({\n    ...oldTraps,\n    get(target, prop, receiver) {\n        if (isIteratorProp(target, prop))\n            return iterate;\n        return oldTraps.get(target, prop, receiver);\n    },\n    has(target, prop) {\n        return isIteratorProp(target, prop) || oldTraps.has(target, prop);\n    },\n}));\n\nexport { deleteDB, openDB, unwrap, wrap };\n","import { openDB } from \"idb\";\r\nimport type { TrainingRecord } from \"./schema\";\r\n\r\ntype DBSchemaV1 = {\r\n  trainings: {\r\n    key: string;\r\n    value: { updatedAt: number; records: TrainingRecord[] };\r\n  };\r\n  embeddings: {\r\n    key: string; // record.id\r\n    value: { dims: number; data: ArrayBuffer };\r\n  };\r\n};\r\n\r\nconst DB_NAME = \"who-training-finder-db\";\r\nconst DB_VERSION = 1;\r\nconst TRAININGS_KEY = \"trainings\";\r\n\r\nexport async function db(): Promise<ReturnType<typeof openDB<DBSchemaV1>>> {\r\n  return openDB<DBSchemaV1>(DB_NAME, DB_VERSION, {\r\n    upgrade(db) {\r\n      if (!db.objectStoreNames.contains(\"trainings\")) db.createObjectStore(\"trainings\");\r\n      if (!db.objectStoreNames.contains(\"embeddings\")) db.createObjectStore(\"embeddings\");\r\n    }\r\n  });\r\n}\r\n\r\nexport async function loadCachedTrainings(): Promise<TrainingRecord[] | null> {\r\n  const d = await db();\r\n  const entry = await d.get(\"trainings\", TRAININGS_KEY);\r\n  return entry?.records ?? null;\r\n}\r\n\r\nexport async function saveCachedTrainings(records: TrainingRecord[]): Promise<void> {\r\n  const d = await db();\r\n  await d.put(\"trainings\", { updatedAt: Date.now(), records }, TRAININGS_KEY);\r\n}\r\n\r\nexport async function loadEmbedding(id: string): Promise<Float32Array | null> {\r\n  const d = await db();\r\n  const entry = await d.get(\"embeddings\", id);\r\n  if (!entry) return null;\r\n  return new Float32Array(entry.data);\r\n}\r\n\r\nexport async function saveEmbedding(id: string, vec: Float32Array): Promise<void> {\r\n  const d = await db();\r\n  // Copy into a standalone ArrayBuffer so it survives structured clone and has the right type.\r\n  const view = new Uint8Array(vec.buffer, vec.byteOffset, vec.byteLength);\r\n  const copy = new Uint8Array(view.byteLength);\r\n  copy.set(view);\r\n  await d.put(\"embeddings\", { dims: vec.length, data: copy.buffer }, id);\r\n}\r\n\r\n","import { useEffect, useMemo, useState } from \"preact/hooks\";\nimport type { RankedTraining, TrainingRecord } from \"../lib/schema\";\nimport { loadDemoTrainings } from \"../lib/demo\";\nimport { buildLexicalIndex, applyStructuredFilters, rankLexical, type LexicalIndex } from \"../lib/search\";\nimport { loadCachedTrainings, saveCachedTrainings, loadEmbedding, saveEmbedding } from \"../lib/cache\";\nimport { type ExtractedIntent } from \"../lib/chatModel\";\n\n\n// ============ CONFIGURATION - Edit these values ============\nconst CONFIG = {\n  // Data source: \"demo_json\" for standalone, or configure SharePoint below\n  dataSource: \"demo_json\" as \"demo_json\" | \"sharepoint\",\n  \n  // SharePoint settings (only used if dataSource is \"sharepoint\")\n  sharepoint: {\n    siteRelativeUrl: \"/sites/EuroWCPHE\",\n    listTitle: \"Copytraininglist2912026\"\n  },\n  \n  // Search mode: \"fast\" (instant lexical) or \"semantic\" (slower but smarter)\n  searchMode: \"fast\" as \"fast\" | \"semantic\",\n  \n  // AI Models (only used if searchMode is \"semantic\")\n  embeddingModel: \"bge-small\" as const,\n  allowRemoteModels: true,\n  modelsBasePath: \"./models\"\n};\n// ===========================================================\n\ntype LoadingStage = \"idle\" | \"data\" | \"embeddings\" | \"precompute\" | \"ready\";\n\nexport function AppEmbed() {\n  const [records, setRecords] = useState<TrainingRecord[] | null>(null);\n  const [index, setIndex] = useState<LexicalIndex | null>(null);\n  \n  // Loading state\n  const [stage, setStage] = useState<LoadingStage>(\"idle\");\n  const [progress, setProgress] = useState(0);\n  const [statusText, setStatusText] = useState(\"Initializing...\");\n  \n  // Model readiness\n  const [embeddingsReady, setEmbeddingsReady] = useState(false);\n  \n  const [input, setInput] = useState(\"\");\n  const [lastResults, setLastResults] = useState<RankedTraining[] | null>(null);\n  const [lastIntent, setLastIntent] = useState<ExtractedIntent | null>(null);\n\n  const isReady = useMemo(() => stage === \"ready\", [stage]);\n\n  // Initialize everything on mount\n  useEffect(() => {\n    initializeApp();\n  }, []);\n\n  async function initializeApp() {\n    // Stage 1: Load data (0-30%)\n    setStage(\"data\");\n    setStatusText(\"Loading training data...\");\n    setProgress(5);\n    \n    try {\n      const cached = await loadCachedTrainings();\n      if (cached && cached.length) {\n        setRecords(cached);\n        setIndex(buildLexicalIndex(cached));\n        setProgress(15);\n      }\n\n      const fresh = CONFIG.dataSource === \"demo_json\"\n        ? await loadDemoTrainings()\n        : await loadSharePointData();\n      \n      setRecords(fresh);\n      setIndex(buildLexicalIndex(fresh));\n      await saveCachedTrainings(fresh);\n      setProgress(30);\n      \n    } catch (e) {\n      console.error(\"Failed to load data:\", e);\n      setStatusText(\"Error loading data. Please refresh.\");\n      return;\n    }\n\n    // Stage 2: Load embeddings (only for semantic mode)\n    if (CONFIG.searchMode === \"semantic\") {\n      setStage(\"embeddings\");\n      setStatusText(\"Loading semantic search model...\");\n      \n      try {\n        const { loadEmbeddingsPipeline } = await import(\"../lib/embeddings\");\n        await loadEmbeddingsPipeline({\n          modelsBasePath: CONFIG.modelsBasePath,\n          allowRemoteModels: CONFIG.allowRemoteModels,\n          embeddingModel: CONFIG.embeddingModel\n        });\n        setEmbeddingsReady(true);\n        setProgress(100);\n      } catch (e) {\n        console.error(\"Failed to load embeddings:\", e);\n        setProgress(100);\n      }\n    } else {\n      // Fast mode - skip embedding loading entirely\n      setProgress(100);\n    }\n\n    // Ready!\n    setStage(\"ready\");\n    setStatusText(\"\");\n  }\n\n  async function loadSharePointData(): Promise<TrainingRecord[]> {\n    const { fetchAllListItems } = await import(\"../lib/sharepoint\");\n    return fetchAllListItems({\n      siteRelativeUrl: CONFIG.sharepoint.siteRelativeUrl,\n      listTitle: CONFIG.sharepoint.listTitle\n    });\n  }\n\n  async function runSearch(userText: string) {\n    if (!records || !index) return;\n\n    // Fast intent extraction (no AI model, instant)\n    const intent = fallbackExtractIntent(userText);\n    setLastIntent(intent);\n\n    // Apply filters\n    const filtered = applyStructuredFilters(records, {\n      modality: intent.modality,\n      language: intent.language,\n      platform: intent.platform,\n      audienceContains: intent.audience\n    });\n\n    // Rank results - lexical is instant, hybrid is slower but smarter\n    let ranked: RankedTraining[];\n    \n    if (CONFIG.searchMode === \"semantic\" && embeddingsReady) {\n      ranked = await rankHybrid(filtered, intent.topic, index);\n    } else {\n      // Fast mode: lexical search is instant\n      ranked = rankLexical(filtered, intent.topic, index);\n    }\n\n    const top = ranked.slice(0, 10);\n    setLastResults(top);\n  }\n\n  function fallbackExtractIntent(query: string): ExtractedIntent {\n    const t = query.toLowerCase();\n    let topic = query;\n    \n    const intent: ExtractedIntent = {\n      topic: query,\n      rawQuery: query\n    };\n\n    const languages = [\"english\", \"french\", \"spanish\", \"russian\", \"arabic\", \"portuguese\", \"chinese\", \"ukrainian\", \"polish\"];\n    for (const lang of languages) {\n      const langPattern = new RegExp(`\\\\b(in\\\\s+)?${lang}\\\\b`, \"gi\");\n      if (langPattern.test(t)) {\n        intent.language = lang.charAt(0).toUpperCase() + lang.slice(1);\n        topic = topic.replace(langPattern, \"\");\n        break;\n      }\n    }\n\n    if (/\\bonline\\b|e-learning/i.test(t)) {\n      intent.modality = \"online\";\n      topic = topic.replace(/\\bonline\\b|e-learning/gi, \"\");\n    } else if (/\\bin[- ]person\\b/i.test(t)) {\n      intent.modality = \"in_person\";\n      topic = topic.replace(/\\bin[- ]person\\b/gi, \"\");\n    } else if (/\\bblended\\b/i.test(t)) {\n      intent.modality = \"blended\";\n      topic = topic.replace(/\\bblended\\b/gi, \"\");\n    }\n\n    if (/openwho/i.test(t)) {\n      intent.platform = \"OpenWHO\";\n      topic = topic.replace(/openwho/gi, \"\");\n    } else if (/who academy/i.test(t)) {\n      intent.platform = \"WHO Academy\";\n      topic = topic.replace(/who academy/gi, \"\");\n    } else if (/hslp/i.test(t)) {\n      intent.platform = \"HSLP\";\n      topic = topic.replace(/hslp/gi, \"\");\n    }\n\n    if (/member state|ministry/i.test(t)) intent.audience = \"Member\";\n    else if (/who staff/i.test(t)) intent.audience = \"WHO\";\n\n    topic = topic\n      .replace(/\\b(i need|i want|i'm looking for|looking for|find me|show me|a training|training|about|on|for)\\b/gi, \"\")\n      .replace(/\\s+/g, \" \")\n      .trim();\n    \n    intent.topic = topic || \"health emergency\";\n    return intent;\n  }\n\n  async function rankHybrid(\n    filteredRecords: TrainingRecord[],\n    query: string,\n    idx: LexicalIndex\n  ): Promise<RankedTraining[]> {\n    const lexical = rankLexical(filteredRecords, query, idx);\n    if (lexical.length === 0 || !embeddingsReady) return lexical;\n\n    try {\n      const { cosineSimilarity, embedText, loadEmbeddingsPipeline } = await import(\"../lib/embeddings\");\n      const pipe = await loadEmbeddingsPipeline({\n        modelsBasePath: CONFIG.modelsBasePath,\n        allowRemoteModels: CONFIG.allowRemoteModels,\n        embeddingModel: CONFIG.embeddingModel\n      });\n      const qVec = await embedText(pipe, query);\n\n      const top = lexical.slice(0, 50);\n      for (const entry of top) {\n        const id = entry.record.id;\n        let vec = await loadEmbedding(id);\n        if (!vec) {\n          vec = await embedText(pipe, entry.record.searchText);\n          await saveEmbedding(id, vec);\n        }\n        const sim = cosineSimilarity(qVec, vec);\n        entry.score = entry.score + sim * 2.0;\n        if (sim > 0.35) entry.reasons.push(\"semantic match\");\n      }\n\n      top.sort((a, b) => b.score - a.score);\n      return top;\n    } catch {\n      return lexical;\n    }\n  }\n\n  async function onSend() {\n    const text = input.trim();\n    if (!text || !isReady) return;\n    setInput(\"\");\n    await runSearch(text);\n  }\n\n  return (\n    <div class=\"embed-container\">\n      {/* Loading overlay */}\n      {stage !== \"ready\" && (\n        <div class=\"loading-overlay\">\n          <div class=\"loading-content\">\n            <div class=\"loading-title\">WHO Training Finder</div>\n            <div class=\"loading-bar-container\">\n              <div class=\"loading-bar\" style={{ width: `${progress}%` }} />\n            </div>\n            <div class=\"loading-text\">{statusText}</div>\n            <div class=\"loading-percent\">{progress}%</div>\n          </div>\n        </div>\n      )}\n\n      {/* Main UI */}\n      <div class={`embed-main ${stage !== \"ready\" ? \"hidden\" : \"\"}`}>\n        <div class=\"embed-header\">\n          <span class=\"embed-title\">WHO Training Finder</span>\n        </div>\n\n        <div class=\"embed-chat\">\n          <div class=\"embed-composer\">\n            <input\n              type=\"text\"\n              value={input}\n              placeholder=\"Describe the training you need...\"\n              disabled={!isReady}\n              onInput={(e) => setInput((e.target as HTMLInputElement).value)}\n              onKeyDown={(e) => {\n                if (e.key === \"Enter\") void onSend();\n              }}\n            />\n            <button class=\"embed-send\" disabled={!isReady} onClick={() => void onSend()}>\n              Search\n            </button>\n          </div>\n        </div>\n\n        {lastResults && lastResults.length > 0 && (\n          <div class=\"embed-results\">\n            {lastIntent && (\n              <div class=\"embed-filters\">\n                <strong>Topic:</strong> {lastIntent.topic}\n                {lastIntent.language && <span class=\"filter-pill\">{lastIntent.language}</span>}\n                {lastIntent.modality && <span class=\"filter-pill\">{lastIntent.modality}</span>}\n                {lastIntent.platform && <span class=\"filter-pill\">{lastIntent.platform}</span>}\n              </div>\n            )}\n            {lastResults.map((r, i) => (\n              <div key={i} class=\"embed-card\">\n                <div class=\"card-title\">{r.record.learningName}</div>\n                <div class=\"card-desc\">{r.record.description?.slice(0, 150)}{r.record.description?.length > 150 ? \"...\" : \"\"}</div>\n                <div class=\"card-tags\">\n                  {r.record.technicalArea && <span class=\"tag\">{r.record.technicalArea}</span>}\n                  {r.record.modality && r.record.modality !== \"unknown\" && <span class=\"tag\">{r.record.modality}</span>}\n                  {r.record.platform && <span class=\"tag\">{r.record.platform}</span>}\n                  {r.record.languages.length > 0 && <span class=\"tag\">{r.record.languages.slice(0, 3).join(\", \")}</span>}\n                </div>\n                {r.record.normalizedLink && (\n                  <a class=\"card-link\" href={r.record.normalizedLink} target=\"_blank\" rel=\"noreferrer\">\n                    Open training \n                  </a>\n                )}\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { render } from \"preact\";\nimport { AppEmbed } from \"./ui/AppEmbed\";\nimport \"./ui/styles-embed.css\";\n\nrender(<AppEmbed />, document.getElementById(\"app\")!);\n"],"file":"assets/main-CdKmw_QB.js"}