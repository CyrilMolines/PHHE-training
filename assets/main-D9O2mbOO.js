(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();var z,w,Ne,M,ge,Be,Oe,Re,ue,te,ne,O={},Fe=[],tt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,K=Array.isArray;function H(t,e){for(var n in e)t[n]=e[n];return t}function de(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function nt(t,e,n){var o,i,r,s={};for(r in e)r=="key"?o=e[r]:r=="ref"?i=e[r]:s[r]=e[r];if(arguments.length>2&&(s.children=arguments.length>3?z.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(r in t.defaultProps)s[r]===void 0&&(s[r]=t.defaultProps[r]);return U(t,s,o,i,null)}function U(t,e,n,o,i){var r={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++Ne,__i:-1,__u:0};return i==null&&w.vnode!=null&&w.vnode(r),r}function q(t){return t.children}function j(t,e){this.props=t,this.context=e}function N(t,e){if(e==null)return t.__?N(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?N(t):null}function Ue(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return Ue(t)}}function ye(t){(!t.__d&&(t.__d=!0)&&M.push(t)&&!V.__r++||ge!=w.debounceRendering)&&((ge=w.debounceRendering)||Be)(V)}function V(){for(var t,e,n,o,i,r,s,_=1;M.length;)M.length>_&&M.sort(Oe),t=M.shift(),_=M.length,t.__d&&(n=void 0,o=void 0,i=(o=(e=t).__v).__e,r=[],s=[],e.__P&&((n=H({},o)).__v=o.__v+1,w.vnode&&w.vnode(n),fe(e.__P,n,o,e.__n,e.__P.namespaceURI,32&o.__u?[i]:null,r,i??N(o),!!(32&o.__u),s),n.__v=o.__v,n.__.__k[n.__i]=n,Ve(r,n,s),o.__e=o.__=null,n.__e!=i&&Ue(n)));V.__r=0}function je(t,e,n,o,i,r,s,_,l,c,u){var a,f,d,m,C,g,b,y=o&&o.__k||Fe,S=e.length;for(l=rt(n,e,y,l,S),a=0;a<S;a++)(d=n.__k[a])!=null&&(f=d.__i==-1?O:y[d.__i]||O,d.__i=a,g=fe(t,d,f,i,r,s,_,l,c,u),m=d.__e,d.ref&&f.ref!=d.ref&&(f.ref&&he(f.ref,null,d),u.push(d.ref,d.__c||m,d)),C==null&&m!=null&&(C=m),(b=!!(4&d.__u))||f.__k===d.__k?l=We(d,l,t,b):typeof d.type=="function"&&g!==void 0?l=g:m&&(l=m.nextSibling),d.__u&=-7);return n.__e=C,l}function rt(t,e,n,o,i){var r,s,_,l,c,u=n.length,a=u,f=0;for(t.__k=new Array(i),r=0;r<i;r++)(s=e[r])!=null&&typeof s!="boolean"&&typeof s!="function"?(typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?s=t.__k[r]=U(null,s,null,null,null):K(s)?s=t.__k[r]=U(q,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?s=t.__k[r]=U(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):t.__k[r]=s,l=r+f,s.__=t,s.__b=t.__b+1,_=null,(c=s.__i=ot(s,n,l,a))!=-1&&(a--,(_=n[c])&&(_.__u|=2)),_==null||_.__v==null?(c==-1&&(i>u?f--:i<u&&f++),typeof s.type!="function"&&(s.__u|=4)):c!=l&&(c==l-1?f--:c==l+1?f++:(c>l?f--:f++,s.__u|=4))):t.__k[r]=null;if(a)for(r=0;r<u;r++)(_=n[r])!=null&&(2&_.__u)==0&&(_.__e==o&&(o=N(_)),Ke(_,_));return o}function We(t,e,n,o){var i,r;if(typeof t.type=="function"){for(i=t.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=t,e=We(i[r],e,n,o));return e}t.__e!=e&&(o&&(e&&t.type&&!e.parentNode&&(e=N(t)),n.insertBefore(t.__e,e||null)),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function ot(t,e,n,o){var i,r,s,_=t.key,l=t.type,c=e[n],u=c!=null&&(2&c.__u)==0;if(c===null&&_==null||u&&_==c.key&&l==c.type)return n;if(o>(u?1:0)){for(i=n-1,r=n+1;i>=0||r<e.length;)if((c=e[s=i>=0?i--:r++])!=null&&(2&c.__u)==0&&_==c.key&&l==c.type)return s}return-1}function ve(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||tt.test(e)?n:n+"px"}function F(t,e,n,o,i){var r,s;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||ve(t.style,e,"");if(n)for(e in n)o&&n[e]==o[e]||ve(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")r=e!=(e=e.replace(Re,"$1")),s=e.toLowerCase(),e=s in t||e=="onFocusOut"||e=="onFocusIn"?s.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+r]=n,n?o?n.u=o.u:(n.u=ue,t.addEventListener(e,r?ne:te,r)):t.removeEventListener(e,r?ne:te,r);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function be(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=ue++;else if(e.t<n.u)return;return n(w.event?w.event(e):e)}}}function fe(t,e,n,o,i,r,s,_,l,c){var u,a,f,d,m,C,g,b,y,S,D,$,T,B,h,v,E,k=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(l=!!(32&n.__u),r=[_=e.__e=n.__e]),(u=w.__b)&&u(e);e:if(typeof k=="function")try{if(b=e.props,y="prototype"in k&&k.prototype.render,S=(u=k.contextType)&&o[u.__c],D=u?S?S.props.value:u.__:o,n.__c?g=(a=e.__c=n.__c).__=a.__E:(y?e.__c=a=new k(b,D):(e.__c=a=new j(b,D),a.constructor=k,a.render=st),S&&S.sub(a),a.state||(a.state={}),a.__n=o,f=a.__d=!0,a.__h=[],a._sb=[]),y&&a.__s==null&&(a.__s=a.state),y&&k.getDerivedStateFromProps!=null&&(a.__s==a.state&&(a.__s=H({},a.__s)),H(a.__s,k.getDerivedStateFromProps(b,a.__s))),d=a.props,m=a.state,a.__v=e,f)y&&k.getDerivedStateFromProps==null&&a.componentWillMount!=null&&a.componentWillMount(),y&&a.componentDidMount!=null&&a.__h.push(a.componentDidMount);else{if(y&&k.getDerivedStateFromProps==null&&b!==d&&a.componentWillReceiveProps!=null&&a.componentWillReceiveProps(b,D),e.__v==n.__v||!a.__e&&a.shouldComponentUpdate!=null&&a.shouldComponentUpdate(b,a.__s,D)===!1){for(e.__v!=n.__v&&(a.props=b,a.state=a.__s,a.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(I){I&&(I.__=e)}),$=0;$<a._sb.length;$++)a.__h.push(a._sb[$]);a._sb=[],a.__h.length&&s.push(a);break e}a.componentWillUpdate!=null&&a.componentWillUpdate(b,a.__s,D),y&&a.componentDidUpdate!=null&&a.__h.push(function(){a.componentDidUpdate(d,m,C)})}if(a.context=D,a.props=b,a.__P=t,a.__e=!1,T=w.__r,B=0,y){for(a.state=a.__s,a.__d=!1,T&&T(e),u=a.render(a.props,a.state,a.context),h=0;h<a._sb.length;h++)a.__h.push(a._sb[h]);a._sb=[]}else do a.__d=!1,T&&T(e),u=a.render(a.props,a.state,a.context),a.state=a.__s;while(a.__d&&++B<25);a.state=a.__s,a.getChildContext!=null&&(o=H(H({},o),a.getChildContext())),y&&!f&&a.getSnapshotBeforeUpdate!=null&&(C=a.getSnapshotBeforeUpdate(d,m)),v=u,u!=null&&u.type===q&&u.key==null&&(v=ze(u.props.children)),_=je(t,K(v)?v:[v],e,n,o,i,r,s,_,l,c),a.base=e.__e,e.__u&=-161,a.__h.length&&s.push(a),g&&(a.__E=a.__=null)}catch(I){if(e.__v=null,l||r!=null)if(I.then){for(e.__u|=l?160:128;_&&_.nodeType==8&&_.nextSibling;)_=_.nextSibling;r[r.indexOf(_)]=null,e.__e=_}else{for(E=r.length;E--;)de(r[E]);re(e)}else e.__e=n.__e,e.__k=n.__k,I.then||re(e);w.__e(I,e,n)}else r==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):_=e.__e=it(n.__e,e,n,o,i,r,s,l,c);return(u=w.diffed)&&u(e),128&e.__u?void 0:_}function re(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(re)}function Ve(t,e,n){for(var o=0;o<n.length;o++)he(n[o],n[++o],n[++o]);w.__c&&w.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(r){r.call(i)})}catch(r){w.__e(r,i.__v)}})}function ze(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:K(t)?t.map(ze):H({},t)}function it(t,e,n,o,i,r,s,_,l){var c,u,a,f,d,m,C,g=n.props||O,b=e.props,y=e.type;if(y=="svg"?i="http://www.w3.org/2000/svg":y=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),r!=null){for(c=0;c<r.length;c++)if((d=r[c])&&"setAttribute"in d==!!y&&(y?d.localName==y:d.nodeType==3)){t=d,r[c]=null;break}}if(t==null){if(y==null)return document.createTextNode(b);t=document.createElementNS(i,y,b.is&&b),_&&(w.__m&&w.__m(e,r),_=!1),r=null}if(y==null)g===b||_&&t.data==b||(t.data=b);else{if(r=r&&z.call(t.childNodes),!_&&r!=null)for(g={},c=0;c<t.attributes.length;c++)g[(d=t.attributes[c]).name]=d.value;for(c in g)if(d=g[c],c!="children"){if(c=="dangerouslySetInnerHTML")a=d;else if(!(c in b)){if(c=="value"&&"defaultValue"in b||c=="checked"&&"defaultChecked"in b)continue;F(t,c,null,d,i)}}for(c in b)d=b[c],c=="children"?f=d:c=="dangerouslySetInnerHTML"?u=d:c=="value"?m=d:c=="checked"?C=d:_&&typeof d!="function"||g[c]===d||F(t,c,d,g[c],i);if(u)_||a&&(u.__html==a.__html||u.__html==t.innerHTML)||(t.innerHTML=u.__html),e.__k=[];else if(a&&(t.innerHTML=""),je(e.type=="template"?t.content:t,K(f)?f:[f],e,n,o,y=="foreignObject"?"http://www.w3.org/1999/xhtml":i,r,s,r?r[0]:n.__k&&N(n,0),_,l),r!=null)for(c=r.length;c--;)de(r[c]);_||(c="value",y=="progress"&&m==null?t.removeAttribute("value"):m!=null&&(m!==t[c]||y=="progress"&&!m||y=="option"&&m!=g[c])&&F(t,c,m,g[c],i),c="checked",C!=null&&C!=t[c]&&F(t,c,C,g[c],i))}return t}function he(t,e,n){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&e==null||(t.__u=t(e))}else t.current=e}catch(i){w.__e(i,n)}}function Ke(t,e,n){var o,i;if(w.unmount&&w.unmount(t),(o=t.ref)&&(o.current&&o.current!=t.__e||he(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(r){w.__e(r,e)}o.base=o.__P=null}if(o=t.__k)for(i=0;i<o.length;i++)o[i]&&Ke(o[i],e,n||typeof t.type!="function");n||de(t.__e),t.__c=t.__=t.__e=void 0}function st(t,e,n){return this.constructor(t,n)}function at(t,e,n){var o,i,r,s;e==document&&(e=document.documentElement),w.__&&w.__(t,e),i=(o=!1)?null:e.__k,r=[],s=[],fe(e,t=e.__k=nt(q,null,[t]),i||O,O,e.namespaceURI,i?null:e.firstChild?z.call(e.childNodes):null,r,i?i.__e:e.firstChild,o,s),Ve(r,t,s)}z=Fe.slice,w={__e:function(t,e,n,o){for(var i,r,s;e=e.__;)if((i=e.__c)&&!i.__)try{if((r=i.constructor)&&r.getDerivedStateFromError!=null&&(i.setState(r.getDerivedStateFromError(t)),s=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,o||{}),s=i.__d),s)return i.__E=i}catch(_){t=_}throw t}},Ne=0,j.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=H({},this.state),typeof t=="function"&&(t=t(H({},n),this.props)),t&&H(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),ye(this))},j.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ye(this))},j.prototype.render=q,M=[],Be=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Oe=function(t,e){return t.__v.__b-e.__v.__b},V.__r=0,Re=/(PointerCapture)$|Capture$/i,ue=0,te=be(!1),ne=be(!0);var _t=0;function p(t,e,n,o,i,r){e||(e={});var s,_,l=e;if("ref"in l)for(_ in l={},e)_=="ref"?s=e[_]:l[_]=e[_];var c={type:t,props:l,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--_t,__i:-1,__u:0,__source:i,__self:r};if(typeof t=="function"&&(s=t.defaultProps))for(_ in s)l[_]===void 0&&(l[_]=s[_]);return w.vnode&&w.vnode(c),c}const ct="modulepreload",lt=function(t,e){return new URL(t,e).href},we={},ut=function(e,n,o){let i=Promise.resolve();if(n&&n.length>0){let s=function(u){return Promise.all(u.map(a=>Promise.resolve(a).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};const _=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");i=s(n.map(u=>{if(u=lt(u,o),u in we)return;we[u]=!0;const a=u.endsWith(".css"),f=a?'[rel="stylesheet"]':"";if(!!o)for(let C=_.length-1;C>=0;C--){const g=_[C];if(g.href===u&&(!a||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${f}`))return;const m=document.createElement("link");if(m.rel=a?"stylesheet":ct,a||(m.as="script"),m.crossOrigin="",m.href=u,c&&m.setAttribute("nonce",c),document.head.appendChild(m),a)return new Promise((C,g)=>{m.addEventListener("load",C),m.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function r(s){const _=new Event("vite:preloadError",{cancelable:!0});if(_.payload=s,window.dispatchEvent(_),!_.defaultPrevented)throw s}return i.then(s=>{for(const _ of s||[])_.status==="rejected"&&r(_.reason);return e().catch(r)})};var R,P,Y,ke,oe=0,qe=[],L=w,Ee=L.__b,Pe=L.__r,Le=L.diffed,Ce=L.__c,Se=L.unmount,Ie=L.__;function pe(t,e){L.__h&&L.__h(P,t,oe||e),oe=0;var n=P.__H||(P.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function x(t){return oe=1,dt(Qe,t)}function dt(t,e,n){var o=pe(R++,2);if(o.t=t,!o.__c&&(o.__=[Qe(void 0,e),function(_){var l=o.__N?o.__N[0]:o.__[0],c=o.t(l,_);l!==c&&(o.__N=[c,o.__[1]],o.__c.setState({}))}],o.__c=P,!P.__f)){var i=function(_,l,c){if(!o.__c.__H)return!0;var u=o.__c.__H.__.filter(function(f){return!!f.__c});if(u.every(function(f){return!f.__N}))return!r||r.call(this,_,l,c);var a=o.__c.props!==_;return u.forEach(function(f){if(f.__N){var d=f.__[0];f.__=f.__N,f.__N=void 0,d!==f.__[0]&&(a=!0)}}),r&&r.call(this,_,l,c)||a};P.__f=!0;var r=P.shouldComponentUpdate,s=P.componentWillUpdate;P.componentWillUpdate=function(_,l,c){if(this.__e){var u=r;r=void 0,i(_,l,c),r=u}s&&s.call(this,_,l,c)},P.shouldComponentUpdate=i}return o.__N||o.__}function ft(t,e){var n=pe(R++,3);!L.__s&&Ge(n.__H,e)&&(n.__=t,n.u=e,P.__H.__h.push(n))}function ht(t,e){var n=pe(R++,7);return Ge(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function pt(){for(var t;t=qe.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(W),t.__H.__h.forEach(ie),t.__H.__h=[]}catch(e){t.__H.__h=[],L.__e(e,t.__v)}}L.__b=function(t){P=null,Ee&&Ee(t)},L.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Ie&&Ie(t,e)},L.__r=function(t){Pe&&Pe(t),R=0;var e=(P=t.__c).__H;e&&(Y===P?(e.__h=[],P.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(W),e.__h.forEach(ie),e.__h=[],R=0)),Y=P},L.diffed=function(t){Le&&Le(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(qe.push(e)!==1&&ke===L.requestAnimationFrame||((ke=L.requestAnimationFrame)||mt)(pt)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),Y=P=null},L.__c=function(t,e){e.some(function(n){try{n.__h.forEach(W),n.__h=n.__h.filter(function(o){return!o.__||ie(o)})}catch(o){e.some(function(i){i.__h&&(i.__h=[])}),e=[],L.__e(o,n.__v)}}),Ce&&Ce(t,e)},L.unmount=function(t){Se&&Se(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{W(o)}catch(i){e=i}}),n.__H=void 0,e&&L.__e(e,n.__v))};var De=typeof requestAnimationFrame=="function";function mt(t){var e,n=function(){clearTimeout(o),De&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,35);De&&(e=requestAnimationFrame(n))}function W(t){var e=P,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),P=e}function ie(t){var e=P;t.__c=t.__(),P=e}function Ge(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function Qe(t,e){return typeof e=="function"?e(t):e}async function gt(){const t=await fetch("./demo-trainings.json",{credentials:"same-origin"});if(!t.ok)throw new Error(`Failed to load demo-trainings.json (${t.status})`);const e=await t.json();if(!Array.isArray(e))throw new Error("demo-trainings.json is not an array");return e}function Ye(t){return t.toLowerCase().replace(/[^a-z0-9]+/gi," ").trim().split(/\s+/).filter(e=>e.length>=2)}function xe(t){const e=new Map,n=[];let o=0;for(const i of t){const r=Ye(i.searchText),s=new Map;for(const l of r)s.set(l,(s.get(l)??0)+1);for(const l of s.keys())e.set(l,(e.get(l)??0)+1);const _=r.length;o+=_,n.push({record:i,tf:s,len:_})}return{docs:n,df:e,avgLen:n.length?o/n.length:0,n:n.length}}function yt(t,e){const i=Ye(e),r=new Map;for(const s of t.docs){let _=0;for(const l of i){const c=s.tf.get(l)??0;if(!c)continue;const u=t.df.get(l)??0,a=Math.log(1+(t.n-u+.5)/(u+.5)),f=c+1.2*(1-.75+.75*s.len/(t.avgLen||1));_+=a*(c*(1.2+1)/f)}_>0&&r.set(s.record.id,_)}return r}function vt(t,e){return t.filter(n=>{if(e.modality&&n.modality!==e.modality)return!1;if(e.language){const o=e.language.toLowerCase();if(!n.languages.some(i=>i.toLowerCase()===o))return!1}if(e.platform){const o=e.platform.toLowerCase();if(!n.platform.toLowerCase().includes(o))return!1}if(e.audienceContains){const o=e.audienceContains.toLowerCase();if(!n.intendedAudience.toLowerCase().includes(o))return!1}return!0})}function bt(t,e,n){const o=yt(n,e),i=[];for(const r of t){const s=o.get(r.id)??0;if(s<=0)continue;const _=[];r.learningName.toLowerCase().includes(e.toLowerCase())&&_.push("title match"),i.push({record:r,score:s,reasons:_})}return i.sort((r,s)=>s.score-r.score),i}const se=(t,e)=>e.some(n=>t instanceof n);let He,Te;function wt(){return He||(He=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kt(){return Te||(Te=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ae=new WeakMap,J=new WeakMap,G=new WeakMap;function Et(t){const e=new Promise((n,o)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{n(A(t.result)),i()},s=()=>{o(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",s)});return G.set(e,t),e}function Pt(t){if(ae.has(t))return;const e=new Promise((n,o)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{n(),i()},s=()=>{o(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)});ae.set(t,e)}let _e={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ae.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return A(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Je(t){_e=t(_e)}function Lt(t){return kt().includes(t)?function(...e){return t.apply(ce(this),e),A(this.request)}:function(...e){return A(t.apply(ce(this),e))}}function Ct(t){return typeof t=="function"?Lt(t):(t instanceof IDBTransaction&&Pt(t),se(t,wt())?new Proxy(t,_e):t)}function A(t){if(t instanceof IDBRequest)return Et(t);if(J.has(t))return J.get(t);const e=Ct(t);return e!==t&&(J.set(t,e),G.set(e,t)),e}const ce=t=>G.get(t);function St(t,e,{blocked:n,upgrade:o,blocking:i,terminated:r}={}){const s=indexedDB.open(t,e),_=A(s);return o&&s.addEventListener("upgradeneeded",l=>{o(A(s.result),l.oldVersion,l.newVersion,A(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),_.then(l=>{r&&l.addEventListener("close",()=>r()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),_}const It=["get","getKey","getAll","getAllKeys","count"],Dt=["put","add","delete","clear"],X=new Map;function Me(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(X.get(e))return X.get(e);const n=e.replace(/FromIndex$/,""),o=e!==n,i=Dt.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(i||It.includes(n)))return;const r=async function(s,..._){const l=this.transaction(s,i?"readwrite":"readonly");let c=l.store;return o&&(c=c.index(_.shift())),(await Promise.all([c[n](..._),i&&l.done]))[0]};return X.set(e,r),r}Je(t=>({...t,get:(e,n,o)=>Me(e,n)||t.get(e,n,o),has:(e,n)=>!!Me(e,n)||t.has(e,n)}));const xt=["continue","continuePrimaryKey","advance"],Ae={},le=new WeakMap,Xe=new WeakMap,Ht={get(t,e){if(!xt.includes(e))return t[e];let n=Ae[e];return n||(n=Ae[e]=function(...o){le.set(this,Xe.get(this)[e](...o))}),n}};async function*Tt(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const n=new Proxy(e,Ht);for(Xe.set(n,e),G.set(n,ce(e));e;)yield n,e=await(le.get(n)||e.continue()),le.delete(n)}function $e(t,e){return e===Symbol.asyncIterator&&se(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&se(t,[IDBIndex,IDBObjectStore])}Je(t=>({...t,get(e,n,o){return $e(e,n)?Tt:t.get(e,n,o)},has(e,n){return $e(e,n)||t.has(e,n)}}));const Mt="who-training-finder-db",At=1,Ze="trainings";async function et(){return St(Mt,At,{upgrade(t){t.objectStoreNames.contains("trainings")||t.createObjectStore("trainings"),t.objectStoreNames.contains("embeddings")||t.createObjectStore("embeddings")}})}async function $t(){return(await(await et()).get("trainings",Ze))?.records??null}async function Nt(t){await(await et()).put("trainings",{updatedAt:Date.now(),records:t},Ze)}function Bt(){const t=new URLSearchParams(window.location.search);return{site:t.get("site"),list:t.get("list"),mode:t.get("mode")}}const Z=Bt(),ee={dataSource:Z.mode==="demo"?"demo_json":"sharepoint",sharepoint:{siteRelativeUrl:Z.site||"/sites/EuroWCPHE",listTitle:Z.list||"Copytraininglist2912026"},searchMode:"fast",embeddingModel:"bge-small",allowRemoteModels:!0,modelsBasePath:"./models"};function Ot(){const[t,e]=x(null),[n,o]=x(null),[i,r]=x("idle"),[s,_]=x(0),[l,c]=x("Initializing..."),[u,a]=x(!1),[f,d]=x(""),[m,C]=x(null),[g,b]=x(null),y=ht(()=>i==="ready",[i]);ft(()=>{S()},[]);async function S(){r("data"),c("Loading training data..."),_(5);try{const h=await $t();h&&h.length&&(e(h),o(xe(h)),_(15));const v=ee.dataSource==="demo_json"?await gt():await D();e(v),o(xe(v)),await Nt(v),_(30)}catch(h){console.error("Failed to load data:",h),c("Error loading data. Please refresh.");return}_(100),r("ready"),c("")}async function D(){const{fetchAllListItems:h}=await ut(async()=>{const{fetchAllListItems:v}=await import("./sharepoint-BSZBMNpd.js");return{fetchAllListItems:v}},[],import.meta.url);return h({siteRelativeUrl:ee.sharepoint.siteRelativeUrl,listTitle:ee.sharepoint.listTitle})}async function $(h){if(!t||!n)return;const v=T(h);b(v);const E=vt(t,{modality:v.modality,language:v.language,platform:v.platform,audienceContains:v.audience});let k;k=bt(E,v.topic,n);const I=k.slice(0,10);C(I)}function T(h){const v=h.toLowerCase();let E=h;const k={topic:h,rawQuery:h},I=["english","french","spanish","russian","arabic","portuguese","chinese","ukrainian","polish"];for(const Q of I){const me=new RegExp(`\\b(in\\s+)?${Q}\\b`,"gi");if(me.test(v)){k.language=Q.charAt(0).toUpperCase()+Q.slice(1),E=E.replace(me,"");break}}return/\bonline\b|e-learning/i.test(v)?(k.modality="online",E=E.replace(/\bonline\b|e-learning/gi,"")):/\bin[- ]person\b/i.test(v)?(k.modality="in_person",E=E.replace(/\bin[- ]person\b/gi,"")):/\bblended\b/i.test(v)&&(k.modality="blended",E=E.replace(/\bblended\b/gi,"")),/openwho/i.test(v)?(k.platform="OpenWHO",E=E.replace(/openwho/gi,"")):/who academy/i.test(v)?(k.platform="WHO Academy",E=E.replace(/who academy/gi,"")):/hslp/i.test(v)&&(k.platform="HSLP",E=E.replace(/hslp/gi,"")),/member state|ministry/i.test(v)?k.audience="Member":/who staff/i.test(v)&&(k.audience="WHO"),E=E.replace(/\b(i need|i want|i'm looking for|looking for|find me|show me|a training|training|about|on|for)\b/gi,"").replace(/\s+/g," ").trim(),k.topic=E||"health emergency",k}async function B(){const h=f.trim();!h||!y||(d(""),await $(h))}return p("div",{class:"embed-container",children:[i!=="ready"&&p("div",{class:"loading-overlay",children:p("div",{class:"loading-content",children:[p("div",{class:"loading-title",children:"WHO PHHE Training Finder"}),p("div",{class:"loading-bar-container",children:p("div",{class:"loading-bar",style:{width:`${s}%`}})}),p("div",{class:"loading-text",children:l}),p("div",{class:"loading-percent",children:[s,"%"]})]})}),p("div",{class:`embed-main ${i!=="ready"?"hidden":""}`,children:[p("div",{class:"embed-header",children:p("div",{class:"embed-header-text",children:[p("span",{class:"embed-title",children:"WHO PHHE Training Finder"}),p("span",{class:"embed-subtitle",children:"WHO European Centre for Preparedness for Humanitarian and Health Emergencies (PHHE)"})]})}),p("div",{class:"embed-chat",children:p("div",{class:"embed-composer",children:[p("input",{type:"text",value:f,placeholder:"Describe the training you need...",disabled:!y,onInput:h=>d(h.target.value),onKeyDown:h=>{h.key==="Enter"&&B()}}),p("button",{class:"embed-send",disabled:!y,onClick:()=>void B(),children:"Search"})]})}),m&&m.length>0&&p("div",{class:"embed-results",children:[g&&p("div",{class:"embed-filters",children:[p("strong",{children:"Topic:"})," ",g.topic,g.language&&p("span",{class:"filter-pill",children:g.language}),g.modality&&p("span",{class:"filter-pill",children:g.modality}),g.platform&&p("span",{class:"filter-pill",children:g.platform})]}),m.map((h,v)=>p("div",{class:"embed-card",children:[p("div",{class:"card-title",children:h.record.learningName}),p("div",{class:"card-desc",children:[h.record.description?.slice(0,150),h.record.description?.length>150?"...":""]}),p("div",{class:"card-tags",children:[h.record.technicalArea&&p("span",{class:"tag",children:h.record.technicalArea}),h.record.modality&&h.record.modality!=="unknown"&&p("span",{class:"tag",children:h.record.modality}),h.record.platform&&p("span",{class:"tag",children:h.record.platform}),h.record.languages.length>0&&p("span",{class:"tag",children:h.record.languages.slice(0,3).join(", ")})]}),h.record.normalizedLink&&p("a",{class:"card-link",href:h.record.normalizedLink,target:"_blank",rel:"noreferrer",children:"Open training"})]},v))]})]})]})}at(p(Ot,{}),document.getElementById("app"));
//# sourceMappingURL=main-D9O2mbOO.js.map
