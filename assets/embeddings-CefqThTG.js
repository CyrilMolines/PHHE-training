import{_ as a,a as r}from"./transformers.web-Bp_hl43Q.js";let n=null,i=null;const s={minilm:"Xenova/all-MiniLM-L6-v2","bge-small":"Xenova/bge-small-en-v1.5","gte-small":"Xenova/gte-small"};function d(e){const o=e.trim();return o?o.replace(/\/+$/,""):"./models"}async function c(e){const o=s[e.embeddingModel]||s["bge-small"];if(n&&i===o)return n;n&&i!==o&&(n=null),a.allowLocalModels=!e.allowRemoteModels,a.allowRemoteModels=e.allowRemoteModels,e.allowRemoteModels||(a.localModelPath=d(e.modelsBasePath)),console.log(`[Embeddings] Loading model: ${o}`);const t=performance.now();return n=await r("feature-extraction",o,{dtype:"fp32",progress_callback:l=>{l.progress!==void 0&&console.log(`[Embeddings] ${l.status}: ${Math.round(l.progress)}%`)}}),i=o,console.log(`[Embeddings] Model loaded in ${Math.round(performance.now()-t)}ms`),n}async function u(e,o){return(await e(o,{pooling:"mean",normalize:!0})).data}function p(e,o){if(e.length!==o.length)throw new Error(`cosine dims mismatch: ${e.length} vs ${o.length}`);let t=0;for(let l=0;l<e.length;l++)t+=e[l]*o[l];return t}export{p as cosineSimilarity,u as embedText,c as loadEmbeddingsPipeline};
//# sourceMappingURL=embeddings-CefqThTG.js.map
