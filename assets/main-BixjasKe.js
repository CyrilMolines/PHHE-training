(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var K,k,Re,M,ve,je,Fe,Ue,ue,ne,re,O={},We=[],it=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,G=Array.isArray;function x(e,t){for(var n in t)e[n]=t[n];return e}function fe(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function st(e,t,n){var r,o,i,s={};for(i in t)i=="key"?r=t[i]:i=="ref"?o=t[i]:s[i]=t[i];if(arguments.length>2&&(s.children=arguments.length>3?K.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)s[i]===void 0&&(s[i]=e.defaultProps[i]);return U(e,s,r,o,null)}function U(e,t,n,r,o){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++Re,__i:-1,__u:0};return o==null&&k.vnode!=null&&k.vnode(i),i}function Q(e){return e.children}function W(e,t){this.props=e,this.context=t}function B(e,t){if(t==null)return e.__?B(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?B(e):null}function ze(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return ze(e)}}function ye(e){(!e.__d&&(e.__d=!0)&&M.push(e)&&!V.__r++||ve!=k.debounceRendering)&&((ve=k.debounceRendering)||je)(V)}function V(){for(var e,t,n,r,o,i,s,c=1;M.length;)M.length>c&&M.sort(Fe),e=M.shift(),c=M.length,e.__d&&(n=void 0,r=void 0,o=(r=(t=e).__v).__e,i=[],s=[],t.__P&&((n=x({},r)).__v=r.__v+1,k.vnode&&k.vnode(n),he(t.__P,n,r,t.__n,t.__P.namespaceURI,32&r.__u?[o]:null,i,o??B(r),!!(32&r.__u),s),n.__v=r.__v,n.__.__k[n.__i]=n,Ge(i,n,s),r.__e=r.__=null,n.__e!=o&&ze(n)));V.__r=0}function Ve(e,t,n,r,o,i,s,c,_,l,u){var a,p,h,g,E,v,b,w=r&&r.__k||We,D=t.length;for(_=at(n,t,w,_,D),a=0;a<D;a++)(h=n.__k[a])!=null&&(p=h.__i==-1?O:w[h.__i]||O,h.__i=a,v=he(e,h,p,o,i,s,c,_,l,u),g=h.__e,h.ref&&p.ref!=h.ref&&(p.ref&&pe(p.ref,null,h),u.push(h.ref,h.__c||g,h)),E==null&&g!=null&&(E=g),(b=!!(4&h.__u))||p.__k===h.__k?_=Ke(h,_,e,b):typeof h.type=="function"&&v!==void 0?_=v:g&&(_=g.nextSibling),h.__u&=-7);return n.__e=E,_}function at(e,t,n,r,o){var i,s,c,_,l,u=n.length,a=u,p=0;for(e.__k=new Array(o),i=0;i<o;i++)(s=t[i])!=null&&typeof s!="boolean"&&typeof s!="function"?(typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?s=e.__k[i]=U(null,s,null,null,null):G(s)?s=e.__k[i]=U(Q,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?s=e.__k[i]=U(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):e.__k[i]=s,_=i+p,s.__=e,s.__b=e.__b+1,c=null,(l=s.__i=ct(s,n,_,a))!=-1&&(a--,(c=n[l])&&(c.__u|=2)),c==null||c.__v==null?(l==-1&&(o>u?p--:o<u&&p++),typeof s.type!="function"&&(s.__u|=4)):l!=_&&(l==_-1?p--:l==_+1?p++:(l>_?p--:p++,s.__u|=4))):e.__k[i]=null;if(a)for(i=0;i<u;i++)(c=n[i])!=null&&(2&c.__u)==0&&(c.__e==r&&(r=B(c)),Ye(c,c));return r}function Ke(e,t,n,r){var o,i;if(typeof e.type=="function"){for(o=e.__k,i=0;o&&i<o.length;i++)o[i]&&(o[i].__=e,t=Ke(o[i],t,n,r));return t}e.__e!=t&&(r&&(t&&e.type&&!t.parentNode&&(t=B(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function ct(e,t,n,r){var o,i,s,c=e.key,_=e.type,l=t[n],u=l!=null&&(2&l.__u)==0;if(l===null&&c==null||u&&c==l.key&&_==l.type)return n;if(r>(u?1:0)){for(o=n-1,i=n+1;o>=0||i<t.length;)if((l=t[s=o>=0?o--:i++])!=null&&(2&l.__u)==0&&c==l.key&&_==l.type)return s}return-1}function be(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||it.test(t)?n:n+"px"}function F(e,t,n,r,o){var i,s;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||be(e.style,t,"");if(n)for(t in n)r&&n[t]==r[t]||be(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")i=t!=(t=t.replace(Ue,"$1")),s=t.toLowerCase(),t=s in e||t=="onFocusOut"||t=="onFocusIn"?s.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r?n.u=r.u:(n.u=ue,e.addEventListener(t,i?re:ne,i)):e.removeEventListener(t,i?re:ne,i);else{if(o=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function we(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=ue++;else if(t.t<n.u)return;return n(k.event?k.event(t):t)}}}function he(e,t,n,r,o,i,s,c,_,l){var u,a,p,h,g,E,v,b,w,D,S,$,T,j,N,A,f,m=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(_=!!(32&n.__u),i=[c=t.__e=n.__e]),(u=k.__b)&&u(t);e:if(typeof m=="function")try{if(b=t.props,w="prototype"in m&&m.prototype.render,D=(u=m.contextType)&&r[u.__c],S=u?D?D.props.value:u.__:r,n.__c?v=(a=t.__c=n.__c).__=a.__E:(w?t.__c=a=new m(b,S):(t.__c=a=new W(b,S),a.constructor=m,a.render=_t),D&&D.sub(a),a.state||(a.state={}),a.__n=r,p=a.__d=!0,a.__h=[],a._sb=[]),w&&a.__s==null&&(a.__s=a.state),w&&m.getDerivedStateFromProps!=null&&(a.__s==a.state&&(a.__s=x({},a.__s)),x(a.__s,m.getDerivedStateFromProps(b,a.__s))),h=a.props,g=a.state,a.__v=t,p)w&&m.getDerivedStateFromProps==null&&a.componentWillMount!=null&&a.componentWillMount(),w&&a.componentDidMount!=null&&a.__h.push(a.componentDidMount);else{if(w&&m.getDerivedStateFromProps==null&&b!==h&&a.componentWillReceiveProps!=null&&a.componentWillReceiveProps(b,S),t.__v==n.__v||!a.__e&&a.shouldComponentUpdate!=null&&a.shouldComponentUpdate(b,a.__s,S)===!1){for(t.__v!=n.__v&&(a.props=b,a.state=a.__s,a.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(y){y&&(y.__=t)}),$=0;$<a._sb.length;$++)a.__h.push(a._sb[$]);a._sb=[],a.__h.length&&s.push(a);break e}a.componentWillUpdate!=null&&a.componentWillUpdate(b,a.__s,S),w&&a.componentDidUpdate!=null&&a.__h.push(function(){a.componentDidUpdate(h,g,E)})}if(a.context=S,a.props=b,a.__P=e,a.__e=!1,T=k.__r,j=0,w){for(a.state=a.__s,a.__d=!1,T&&T(t),u=a.render(a.props,a.state,a.context),N=0;N<a._sb.length;N++)a.__h.push(a._sb[N]);a._sb=[]}else do a.__d=!1,T&&T(t),u=a.render(a.props,a.state,a.context),a.state=a.__s;while(a.__d&&++j<25);a.state=a.__s,a.getChildContext!=null&&(r=x(x({},r),a.getChildContext())),w&&!p&&a.getSnapshotBeforeUpdate!=null&&(E=a.getSnapshotBeforeUpdate(h,g)),A=u,u!=null&&u.type===Q&&u.key==null&&(A=Qe(u.props.children)),c=Ve(e,G(A)?A:[A],t,n,r,o,i,s,c,_,l),a.base=t.__e,t.__u&=-161,a.__h.length&&s.push(a),v&&(a.__E=a.__=null)}catch(y){if(t.__v=null,_||i!=null)if(y.then){for(t.__u|=_?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;i[i.indexOf(c)]=null,t.__e=c}else{for(f=i.length;f--;)fe(i[f]);oe(t)}else t.__e=n.__e,t.__k=n.__k,y.then||oe(t);k.__e(y,t,n)}else i==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):c=t.__e=lt(n.__e,t,n,r,o,i,s,_,l);return(u=k.diffed)&&u(t),128&t.__u?void 0:c}function oe(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(oe)}function Ge(e,t,n){for(var r=0;r<n.length;r++)pe(n[r],n[++r],n[++r]);k.__c&&k.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(i){i.call(o)})}catch(i){k.__e(i,o.__v)}})}function Qe(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:G(e)?e.map(Qe):x({},e)}function lt(e,t,n,r,o,i,s,c,_){var l,u,a,p,h,g,E,v=n.props||O,b=t.props,w=t.type;if(w=="svg"?o="http://www.w3.org/2000/svg":w=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),i!=null){for(l=0;l<i.length;l++)if((h=i[l])&&"setAttribute"in h==!!w&&(w?h.localName==w:h.nodeType==3)){e=h,i[l]=null;break}}if(e==null){if(w==null)return document.createTextNode(b);e=document.createElementNS(o,w,b.is&&b),c&&(k.__m&&k.__m(t,i),c=!1),i=null}if(w==null)v===b||c&&e.data==b||(e.data=b);else{if(i=i&&K.call(e.childNodes),!c&&i!=null)for(v={},l=0;l<e.attributes.length;l++)v[(h=e.attributes[l]).name]=h.value;for(l in v)if(h=v[l],l!="children"){if(l=="dangerouslySetInnerHTML")a=h;else if(!(l in b)){if(l=="value"&&"defaultValue"in b||l=="checked"&&"defaultChecked"in b)continue;F(e,l,null,h,o)}}for(l in b)h=b[l],l=="children"?p=h:l=="dangerouslySetInnerHTML"?u=h:l=="value"?g=h:l=="checked"?E=h:c&&typeof h!="function"||v[l]===h||F(e,l,h,v[l],o);if(u)c||a&&(u.__html==a.__html||u.__html==e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(a&&(e.innerHTML=""),Ve(t.type=="template"?e.content:e,G(p)?p:[p],t,n,r,w=="foreignObject"?"http://www.w3.org/1999/xhtml":o,i,s,i?i[0]:n.__k&&B(n,0),c,_),i!=null)for(l=i.length;l--;)fe(i[l]);c||(l="value",w=="progress"&&g==null?e.removeAttribute("value"):g!=null&&(g!==e[l]||w=="progress"&&!g||w=="option"&&g!=v[l])&&F(e,l,g,v[l],o),l="checked",E!=null&&E!=e[l]&&F(e,l,E,v[l],o))}return e}function pe(e,t,n){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(o){k.__e(o,n)}}function Ye(e,t,n){var r,o;if(k.unmount&&k.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||pe(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){k.__e(i,t)}r.base=r.__P=null}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&Ye(r[o],t,n||typeof e.type!="function");n||fe(e.__e),e.__c=e.__=e.__e=void 0}function _t(e,t,n){return this.constructor(e,n)}function dt(e,t,n){var r,o,i,s;t==document&&(t=document.documentElement),k.__&&k.__(e,t),o=(r=!1)?null:t.__k,i=[],s=[],he(t,e=t.__k=st(Q,null,[e]),o||O,O,t.namespaceURI,o?null:t.firstChild?K.call(t.childNodes):null,i,o?o.__e:t.firstChild,r,s),Ge(i,e,s)}K=We.slice,k={__e:function(e,t,n,r){for(var o,i,s;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&i.getDerivedStateFromError!=null&&(o.setState(i.getDerivedStateFromError(e)),s=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,r||{}),s=o.__d),s)return o.__E=o}catch(c){e=c}throw e}},Re=0,W.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=x({},this.state),typeof e=="function"&&(e=e(x({},n),this.props)),e&&x(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),ye(this))},W.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),ye(this))},W.prototype.render=Q,M=[],je=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Fe=function(e,t){return e.__v.__b-t.__v.__b},V.__r=0,Ue=/(PointerCapture)$|Capture$/i,ue=0,ne=we(!1),re=we(!0);var ut=0;function d(e,t,n,r,o,i){t||(t={});var s,c,_=t;if("ref"in _)for(c in _={},t)c=="ref"?s=t[c]:_[c]=t[c];var l={type:e,props:_,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--ut,__i:-1,__u:0,__source:o,__self:i};if(typeof e=="function"&&(s=e.defaultProps))for(c in s)_[c]===void 0&&(_[c]=s[c]);return k.vnode&&k.vnode(l),l}const ft="modulepreload",ht=function(e,t){return new URL(e,t).href},ke={},pt=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){let s=function(u){return Promise.all(u.map(a=>Promise.resolve(a).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};const c=document.getElementsByTagName("link"),_=document.querySelector("meta[property=csp-nonce]"),l=_?.nonce||_?.getAttribute("nonce");o=s(n.map(u=>{if(u=ht(u,r),u in ke)return;ke[u]=!0;const a=u.endsWith(".css"),p=a?'[rel="stylesheet"]':"";if(!!r)for(let E=c.length-1;E>=0;E--){const v=c[E];if(v.href===u&&(!a||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${p}`))return;const g=document.createElement("link");if(g.rel=a?"stylesheet":ft,a||(g.as="script"),g.crossOrigin="",g.href=u,l&&g.setAttribute("nonce",l),document.head.appendChild(g),a)return new Promise((E,v)=>{g.addEventListener("load",E),g.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(s){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=s,window.dispatchEvent(c),!c.defaultPrevented)throw s}return o.then(s=>{for(const c of s||[])c.status==="rejected"&&i(c.reason);return t().catch(i)})};var R,P,Z,Ee,ie=0,Je=[],C=k,Pe=C.__b,Ce=C.__r,Le=C.diffed,Se=C.__c,De=C.unmount,Ie=C.__;function me(e,t){C.__h&&C.__h(P,e,ie||t),ie=0;var n=P.__H||(P.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function I(e){return ie=1,mt(Ze,e)}function mt(e,t,n){var r=me(R++,2);if(r.t=e,!r.__c&&(r.__=[Ze(void 0,t),function(c){var _=r.__N?r.__N[0]:r.__[0],l=r.t(_,c);_!==l&&(r.__N=[l,r.__[1]],r.__c.setState({}))}],r.__c=P,!P.__f)){var o=function(c,_,l){if(!r.__c.__H)return!0;var u=r.__c.__H.__.filter(function(p){return!!p.__c});if(u.every(function(p){return!p.__N}))return!i||i.call(this,c,_,l);var a=r.__c.props!==c;return u.forEach(function(p){if(p.__N){var h=p.__[0];p.__=p.__N,p.__N=void 0,h!==p.__[0]&&(a=!0)}}),i&&i.call(this,c,_,l)||a};P.__f=!0;var i=P.shouldComponentUpdate,s=P.componentWillUpdate;P.componentWillUpdate=function(c,_,l){if(this.__e){var u=i;i=void 0,o(c,_,l),i=u}s&&s.call(this,c,_,l)},P.shouldComponentUpdate=o}return r.__N||r.__}function gt(e,t){var n=me(R++,3);!C.__s&&Xe(n.__H,t)&&(n.__=e,n.u=t,P.__H.__h.push(n))}function vt(e,t){var n=me(R++,7);return Xe(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function yt(){for(var e;e=Je.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(z),e.__H.__h.forEach(se),e.__H.__h=[]}catch(t){e.__H.__h=[],C.__e(t,e.__v)}}C.__b=function(e){P=null,Pe&&Pe(e)},C.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Ie&&Ie(e,t)},C.__r=function(e){Ce&&Ce(e),R=0;var t=(P=e.__c).__H;t&&(Z===P?(t.__h=[],P.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(z),t.__h.forEach(se),t.__h=[],R=0)),Z=P},C.diffed=function(e){Le&&Le(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Je.push(t)!==1&&Ee===C.requestAnimationFrame||((Ee=C.requestAnimationFrame)||bt)(yt)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),Z=P=null},C.__c=function(e,t){t.some(function(n){try{n.__h.forEach(z),n.__h=n.__h.filter(function(r){return!r.__||se(r)})}catch(r){t.some(function(o){o.__h&&(o.__h=[])}),t=[],C.__e(r,n.__v)}}),Se&&Se(e,t)},C.unmount=function(e){De&&De(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{z(r)}catch(o){t=o}}),n.__H=void 0,t&&C.__e(t,n.__v))};var xe=typeof requestAnimationFrame=="function";function bt(e){var t,n=function(){clearTimeout(r),xe&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,35);xe&&(t=requestAnimationFrame(n))}function z(e){var t=P,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),P=t}function se(e){var t=P;e.__c=e.__(),P=t}function Xe(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function Ze(e,t){return typeof t=="function"?t(e):t}async function wt(){const e=await fetch("./demo-trainings.json",{credentials:"same-origin"});if(!e.ok)throw new Error(`Failed to load demo-trainings.json (${e.status})`);const t=await e.json();if(!Array.isArray(t))throw new Error("demo-trainings.json is not an array");return t}function qe(e){return e.toLowerCase().replace(/[^a-z0-9]+/gi," ").trim().split(/\s+/).filter(t=>t.length>=2)}function kt(e,t){if(e.length===0)return t.length;if(t.length===0)return e.length;const n=[];for(let r=0;r<=t.length;r++)n[r]=[r];for(let r=0;r<=e.length;r++)n[0][r]=r;for(let r=1;r<=t.length;r++)for(let o=1;o<=e.length;o++)t.charAt(r-1)===e.charAt(o-1)?n[r][o]=n[r-1][o-1]:n[r][o]=Math.min(n[r-1][o-1]+1,n[r][o-1]+1,n[r-1][o]+1);return n[t.length][e.length]}function Et(e,t,n=2){if(e===t||t.startsWith(e)&&e.length>=3||e.length>=4&&t.includes(e))return!0;if(e.length>=4){const i=kt(e,t),s=Math.min(n,Math.floor(e.length/3));if(i<=s)return!0}const r=Ae(e),o=Ae(t);return r.length>=4&&r===o}function Ae(e){return e.replace(/(ing|ed|tion|ment|ness|ity|ies|es|s)$/,"").replace(/(.)\1+$/,"$1")}function Te(e){const t=new Map,n=[];let r=0;for(const o of e){const i=qe(o.searchText),s=new Map;for(const _ of i)s.set(_,(s.get(_)??0)+1);for(const _ of s.keys())t.set(_,(t.get(_)??0)+1);const c=i.length;r+=c,n.push({record:o,tf:s,len:c})}return{docs:n,df:t,avgLen:n.length?r/n.length:0,n:n.length}}function Pt(e,t,n=!0){const i=qe(t),s=new Map;for(const c of e.docs){let _=0;for(const l of i){let u=c.tf.get(l)??0,a="exact";if(u===0&&n){for(const[v,b]of c.tf.entries())if(Et(l,v)){u=b,a="fuzzy";break}}if(!u)continue;const p=e.df.get(l)??1,h=Math.log(1+(e.n-p+.5)/(p+.5)),g=u+1.2*(1-.75+.75*c.len/(e.avgLen||1));let E=h*(u*(1.2+1)/g);a==="fuzzy"&&(E*=.8),_+=E}_>0&&s.set(c.record.id,_)}return s}function Ct(e,t){return e.filter(n=>{if(t.modality&&n.modality!==t.modality)return!1;if(t.language){const r=t.language.toLowerCase();if(!n.languages.some(o=>o.toLowerCase()===r))return!1}if(t.platform){const r=t.platform.toLowerCase();if(!n.platform.toLowerCase().includes(r))return!1}if(t.audienceContains){const r=t.audienceContains.toLowerCase();if(!n.intendedAudience.toLowerCase().includes(r))return!1}return!0})}function Lt(e,t,n){const r=Pt(n,t),o=[];for(const i of e){const s=r.get(i.id)??0;if(s<=0)continue;const c=[];i.learningName.toLowerCase().includes(t.toLowerCase())&&c.push("title match"),o.push({record:i,score:s,reasons:c})}return o.sort((i,s)=>s.score-i.score),o}const ae=(e,t)=>t.some(n=>e instanceof n);let Me,He;function St(){return Me||(Me=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Dt(){return He||(He=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ce=new WeakMap,q=new WeakMap,Y=new WeakMap;function It(e){const t=new Promise((n,r)=>{const o=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{n(H(e.result)),o()},s=()=>{r(e.error),o()};e.addEventListener("success",i),e.addEventListener("error",s)});return Y.set(t,e),t}function xt(e){if(ce.has(e))return;const t=new Promise((n,r)=>{const o=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{n(),o()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});ce.set(e,t)}let le={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return ce.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return H(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function et(e){le=e(le)}function At(e){return Dt().includes(e)?function(...t){return e.apply(_e(this),t),H(this.request)}:function(...t){return H(e.apply(_e(this),t))}}function Tt(e){return typeof e=="function"?At(e):(e instanceof IDBTransaction&&xt(e),ae(e,St())?new Proxy(e,le):e)}function H(e){if(e instanceof IDBRequest)return It(e);if(q.has(e))return q.get(e);const t=Tt(e);return t!==e&&(q.set(e,t),Y.set(t,e)),t}const _e=e=>Y.get(e);function Mt(e,t,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){const s=indexedDB.open(e,t),c=H(s);return r&&s.addEventListener("upgradeneeded",_=>{r(H(s.result),_.oldVersion,_.newVersion,H(s.transaction),_)}),n&&s.addEventListener("blocked",_=>n(_.oldVersion,_.newVersion,_)),c.then(_=>{i&&_.addEventListener("close",()=>i()),o&&_.addEventListener("versionchange",l=>o(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}const Ht=["get","getKey","getAll","getAllKeys","count"],$t=["put","add","delete","clear"],ee=new Map;function $e(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(ee.get(t))return ee.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=$t.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||Ht.includes(n)))return;const i=async function(s,...c){const _=this.transaction(s,o?"readwrite":"readonly");let l=_.store;return r&&(l=l.index(c.shift())),(await Promise.all([l[n](...c),o&&_.done]))[0]};return ee.set(t,i),i}et(e=>({...e,get:(t,n,r)=>$e(t,n)||e.get(t,n,r),has:(t,n)=>!!$e(t,n)||e.has(t,n)}));const Nt=["continue","continuePrimaryKey","advance"],Ne={},de=new WeakMap,tt=new WeakMap,Bt={get(e,t){if(!Nt.includes(t))return e[t];let n=Ne[t];return n||(n=Ne[t]=function(...r){de.set(this,tt.get(this)[t](...r))}),n}};async function*Ot(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const n=new Proxy(t,Bt);for(tt.set(n,t),Y.set(n,_e(t));t;)yield n,t=await(de.get(n)||t.continue()),de.delete(n)}function Be(e,t){return t===Symbol.asyncIterator&&ae(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&ae(e,[IDBIndex,IDBObjectStore])}et(e=>({...e,get(t,n,r){return Be(t,n)?Ot:e.get(t,n,r)},has(t,n){return Be(t,n)||e.has(t,n)}}));const Rt="who-training-finder-db",jt=1,nt="trainings";async function rt(){return Mt(Rt,jt,{upgrade(e){e.objectStoreNames.contains("trainings")||e.createObjectStore("trainings"),e.objectStoreNames.contains("embeddings")||e.createObjectStore("embeddings")}})}async function Ft(){return(await(await rt()).get("trainings",nt))?.records??null}async function Ut(e){await(await rt()).put("trainings",{updatedAt:Date.now(),records:e},nt)}function ot(){const e=new URLSearchParams(window.location.search);return{site:e.get("site"),list:e.get("list"),mode:e.get("mode")}}function Wt(){const e=ot();return e.mode==="sharepoint"?"sharepoint":e.mode==="demo"?"demo_json":window.location.hostname.includes("sharepoint.com")?"sharepoint":"demo_json"}const Oe=ot(),te={dataSource:Wt(),sharepoint:{siteRelativeUrl:Oe.site||"/sites/EuroWCPHE",listTitle:Oe.list||"Copytraininglist2912026"},searchMode:"fast",embeddingModel:"bge-small",allowRemoteModels:!0,modelsBasePath:"./models"};function zt(){const[e,t]=I(null),[n,r]=I(null),[o,i]=I("idle"),[s,c]=I(0),[_,l]=I("Initializing..."),[u,a]=I(!1),[p,h]=I(""),[g,E]=I(null),[v,b]=I(null),[w,D]=I(null),S=vt(()=>o==="ready",[o]);gt(()=>{$()},[]);async function $(){i("data"),l("Loading training data..."),c(5);try{const f=await Ft();f&&f.length&&(t(f),r(Te(f)),c(15));const m=te.dataSource==="demo_json"?await wt():await T();t(m),r(Te(m)),await Ut(m),c(30)}catch(f){console.error("Failed to load data:",f),l("Error loading data. Please refresh.");return}c(100),i("ready"),l("")}async function T(){const{fetchAllListItems:f}=await pt(async()=>{const{fetchAllListItems:m}=await import("./sharepoint-BSZBMNpd.js");return{fetchAllListItems:m}},[],import.meta.url);return f({siteRelativeUrl:te.sharepoint.siteRelativeUrl,listTitle:te.sharepoint.listTitle})}async function j(f){if(!e||!n)return;const m=N(f);b(m);const y=Ct(e,{modality:m.modality,language:m.language,platform:m.platform,audienceContains:m.audience});let L;L=Lt(y,m.topic,n);const J=L.slice(0,10);E(J)}function N(f){const m=f.toLowerCase();let y=f;const L={topic:f,rawQuery:f},J=["english","french","spanish","russian","arabic","portuguese","chinese","ukrainian","polish"];for(const X of J){const ge=new RegExp(`\\b(in\\s+)?${X}\\b`,"gi");if(ge.test(m)){L.language=X.charAt(0).toUpperCase()+X.slice(1),y=y.replace(ge,"");break}}return/\bonline\b|e-learning/i.test(m)?(L.modality="online",y=y.replace(/\bonline\b|e-learning/gi,"")):/\bin[- ]person\b/i.test(m)?(L.modality="in_person",y=y.replace(/\bin[- ]person\b/gi,"")):/\bblended\b/i.test(m)&&(L.modality="blended",y=y.replace(/\bblended\b/gi,"")),/openwho/i.test(m)?(L.platform="OpenWHO",y=y.replace(/openwho/gi,"")):/who academy/i.test(m)?(L.platform="WHO Academy",y=y.replace(/who academy/gi,"")):/hslp/i.test(m)&&(L.platform="HSLP",y=y.replace(/hslp/gi,"")),/member state|ministry/i.test(m)?L.audience="Member":/who staff/i.test(m)&&(L.audience="WHO"),y=y.replace(/\b(i need|i want|i'm looking for|looking for|find me|show me|a training|training|about|on|for)\b/gi,"").replace(/\s+/g," ").trim(),L.topic=y||"health emergency",L}async function A(){const f=p.trim();!f||!S||(h(""),await j(f))}return d("div",{class:"embed-container",children:[o!=="ready"&&d("div",{class:"loading-overlay",children:d("div",{class:"loading-content",children:[d("div",{class:"loading-title",children:"WHO PHHE Training Finder"}),d("div",{class:"loading-bar-container",children:d("div",{class:"loading-bar",style:{width:`${s}%`}})}),d("div",{class:"loading-text",children:_}),d("div",{class:"loading-percent",children:[s,"%"]})]})}),d("div",{class:`embed-main ${o!=="ready"?"hidden":""}`,children:[d("div",{class:"embed-header",children:d("div",{class:"embed-header-text",children:[d("span",{class:"embed-title",children:"WHO PHHE Training Finder"}),d("span",{class:"embed-subtitle",children:"WHO European Centre for Preparedness for Humanitarian and Health Emergencies (PHHE)"})]})}),d("div",{class:"embed-chat",children:d("div",{class:"embed-composer",children:[d("input",{type:"text",value:p,placeholder:"Describe the training you need...",disabled:!S,onInput:f=>h(f.target.value),onKeyDown:f=>{f.key==="Enter"&&A()}}),d("button",{class:"embed-send",disabled:!S,onClick:()=>void A(),children:"Search"})]})}),g!==null&&d("div",{class:"embed-results",children:[v&&d("div",{class:"embed-filters",children:[d("strong",{children:"Topic:"})," ",v.topic,v.language&&d("span",{class:"filter-pill",children:v.language}),v.modality&&d("span",{class:"filter-pill",children:v.modality}),v.platform&&d("span",{class:"filter-pill",children:v.platform})]}),g.length===0&&d("div",{class:"no-results",children:[d("div",{class:"no-results-icon",children:"ðŸ”"}),d("div",{class:"no-results-text",children:"No trainings found"}),d("div",{class:"no-results-hint",children:"Try different keywords or remove filters like language/modality"})]}),g.map((f,m)=>{const y=w===m;return d("div",{class:`embed-card ${y?"expanded":""}`,onClick:()=>D(y?null:m),children:[d("div",{class:"card-header",children:[d("div",{class:"card-title",children:f.record.learningName}),d("span",{class:"card-expand-icon",children:y?"â–¼":"â–¶"})]}),!y&&d("div",{class:"card-desc",children:[f.record.description?.slice(0,120),f.record.description&&f.record.description.length>120?"...":""]}),d("div",{class:"card-tags",children:[f.record.technicalArea&&d("span",{class:"tag",children:f.record.technicalArea}),f.record.modality&&f.record.modality!=="unknown"&&d("span",{class:"tag",children:f.record.modality}),f.record.platform&&d("span",{class:"tag",children:f.record.platform}),f.record.languages.length>0&&d("span",{class:"tag",children:f.record.languages.slice(0,3).join(", ")})]}),y&&d("div",{class:"card-details",children:[f.record.description&&d("div",{class:"detail-row",children:[d("span",{class:"detail-label",children:"Description"}),d("p",{class:"detail-value",children:f.record.description})]}),f.record.intendedAudience&&d("div",{class:"detail-row",children:[d("span",{class:"detail-label",children:"Target Audience"}),d("p",{class:"detail-value",children:f.record.intendedAudience})]}),f.record.focusArea&&d("div",{class:"detail-row",children:[d("span",{class:"detail-label",children:"Focus Area"}),d("p",{class:"detail-value",children:f.record.focusArea})]}),f.record.languages.length>0&&d("div",{class:"detail-row",children:[d("span",{class:"detail-label",children:"Languages"}),d("p",{class:"detail-value",children:f.record.languages.join(", ")})]}),f.record.owner&&d("div",{class:"detail-row",children:[d("span",{class:"detail-label",children:"Owner"}),d("p",{class:"detail-value",children:f.record.owner})]}),f.record.developer&&d("div",{class:"detail-row",children:[d("span",{class:"detail-label",children:"Developer"}),d("p",{class:"detail-value",children:f.record.developer})]}),f.record.contactDetails&&d("div",{class:"detail-row",children:[d("span",{class:"detail-label",children:"Contact"}),d("p",{class:"detail-value",children:f.record.contactDetails})]}),f.record.normalizedLink&&d("a",{class:"card-link",href:f.record.normalizedLink,target:"_blank",rel:"noreferrer",onClick:L=>L.stopPropagation(),children:"Open training"})]})]},m)})]})]})]})}dt(d(zt,{}),document.getElementById("app"));
//# sourceMappingURL=main-BixjasKe.js.map
