(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();var z,w,Ae,M,me,Ne,Be,Oe,le,ee,te,O={},Re=[],et=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,K=Array.isArray;function H(t,e){for(var n in e)t[n]=e[n];return t}function ue(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function tt(t,e,n){var o,i,r,s={};for(r in e)r=="key"?o=e[r]:r=="ref"?i=e[r]:s[r]=e[r];if(arguments.length>2&&(s.children=arguments.length>3?z.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(r in t.defaultProps)s[r]===void 0&&(s[r]=t.defaultProps[r]);return j(t,s,o,i,null)}function j(t,e,n,o,i){var r={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++Ae,__i:-1,__u:0};return i==null&&w.vnode!=null&&w.vnode(r),r}function q(t){return t.children}function W(t,e){this.props=t,this.context=e}function N(t,e){if(e==null)return t.__?N(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?N(t):null}function Fe(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return Fe(t)}}function ge(t){(!t.__d&&(t.__d=!0)&&M.push(t)&&!V.__r++||me!=w.debounceRendering)&&((me=w.debounceRendering)||Ne)(V)}function V(){for(var t,e,n,o,i,r,s,a=1;M.length;)M.length>a&&M.sort(Be),t=M.shift(),a=M.length,t.__d&&(n=void 0,o=void 0,i=(o=(e=t).__v).__e,r=[],s=[],e.__P&&((n=H({},o)).__v=o.__v+1,w.vnode&&w.vnode(n),de(e.__P,n,o,e.__n,e.__P.namespaceURI,32&o.__u?[i]:null,r,i??N(o),!!(32&o.__u),s),n.__v=o.__v,n.__.__k[n.__i]=n,Ue(r,n,s),o.__e=o.__=null,n.__e!=i&&Fe(n)));V.__r=0}function je(t,e,n,o,i,r,s,a,l,c,u){var _,f,d,m,C,g,b,y=o&&o.__k||Re,I=e.length;for(l=nt(n,e,y,l,I),_=0;_<I;_++)(d=n.__k[_])!=null&&(f=d.__i==-1?O:y[d.__i]||O,d.__i=_,g=de(t,d,f,i,r,s,a,l,c,u),m=d.__e,d.ref&&f.ref!=d.ref&&(f.ref&&fe(f.ref,null,d),u.push(d.ref,d.__c||m,d)),C==null&&m!=null&&(C=m),(b=!!(4&d.__u))||f.__k===d.__k?l=We(d,l,t,b):typeof d.type=="function"&&g!==void 0?l=g:m&&(l=m.nextSibling),d.__u&=-7);return n.__e=C,l}function nt(t,e,n,o,i){var r,s,a,l,c,u=n.length,_=u,f=0;for(t.__k=new Array(i),r=0;r<i;r++)(s=e[r])!=null&&typeof s!="boolean"&&typeof s!="function"?(typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?s=t.__k[r]=j(null,s,null,null,null):K(s)?s=t.__k[r]=j(q,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?s=t.__k[r]=j(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):t.__k[r]=s,l=r+f,s.__=t,s.__b=t.__b+1,a=null,(c=s.__i=rt(s,n,l,_))!=-1&&(_--,(a=n[c])&&(a.__u|=2)),a==null||a.__v==null?(c==-1&&(i>u?f--:i<u&&f++),typeof s.type!="function"&&(s.__u|=4)):c!=l&&(c==l-1?f--:c==l+1?f++:(c>l?f--:f++,s.__u|=4))):t.__k[r]=null;if(_)for(r=0;r<u;r++)(a=n[r])!=null&&(2&a.__u)==0&&(a.__e==o&&(o=N(a)),ze(a,a));return o}function We(t,e,n,o){var i,r;if(typeof t.type=="function"){for(i=t.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=t,e=We(i[r],e,n,o));return e}t.__e!=e&&(o&&(e&&t.type&&!e.parentNode&&(e=N(t)),n.insertBefore(t.__e,e||null)),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function rt(t,e,n,o){var i,r,s,a=t.key,l=t.type,c=e[n],u=c!=null&&(2&c.__u)==0;if(c===null&&a==null||u&&a==c.key&&l==c.type)return n;if(o>(u?1:0)){for(i=n-1,r=n+1;i>=0||r<e.length;)if((c=e[s=i>=0?i--:r++])!=null&&(2&c.__u)==0&&a==c.key&&l==c.type)return s}return-1}function ye(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||et.test(e)?n:n+"px"}function F(t,e,n,o,i){var r,s;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||ye(t.style,e,"");if(n)for(e in n)o&&n[e]==o[e]||ye(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")r=e!=(e=e.replace(Oe,"$1")),s=e.toLowerCase(),e=s in t||e=="onFocusOut"||e=="onFocusIn"?s.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+r]=n,n?o?n.u=o.u:(n.u=le,t.addEventListener(e,r?te:ee,r)):t.removeEventListener(e,r?te:ee,r);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function ve(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=le++;else if(e.t<n.u)return;return n(w.event?w.event(e):e)}}}function de(t,e,n,o,i,r,s,a,l,c){var u,_,f,d,m,C,g,b,y,I,D,A,T,B,h,v,E,k=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(l=!!(32&n.__u),r=[a=e.__e=n.__e]),(u=w.__b)&&u(e);e:if(typeof k=="function")try{if(b=e.props,y="prototype"in k&&k.prototype.render,I=(u=k.contextType)&&o[u.__c],D=u?I?I.props.value:u.__:o,n.__c?g=(_=e.__c=n.__c).__=_.__E:(y?e.__c=_=new k(b,D):(e.__c=_=new W(b,D),_.constructor=k,_.render=it),I&&I.sub(_),_.state||(_.state={}),_.__n=o,f=_.__d=!0,_.__h=[],_._sb=[]),y&&_.__s==null&&(_.__s=_.state),y&&k.getDerivedStateFromProps!=null&&(_.__s==_.state&&(_.__s=H({},_.__s)),H(_.__s,k.getDerivedStateFromProps(b,_.__s))),d=_.props,m=_.state,_.__v=e,f)y&&k.getDerivedStateFromProps==null&&_.componentWillMount!=null&&_.componentWillMount(),y&&_.componentDidMount!=null&&_.__h.push(_.componentDidMount);else{if(y&&k.getDerivedStateFromProps==null&&b!==d&&_.componentWillReceiveProps!=null&&_.componentWillReceiveProps(b,D),e.__v==n.__v||!_.__e&&_.shouldComponentUpdate!=null&&_.shouldComponentUpdate(b,_.__s,D)===!1){for(e.__v!=n.__v&&(_.props=b,_.state=_.__s,_.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(S){S&&(S.__=e)}),A=0;A<_._sb.length;A++)_.__h.push(_._sb[A]);_._sb=[],_.__h.length&&s.push(_);break e}_.componentWillUpdate!=null&&_.componentWillUpdate(b,_.__s,D),y&&_.componentDidUpdate!=null&&_.__h.push(function(){_.componentDidUpdate(d,m,C)})}if(_.context=D,_.props=b,_.__P=t,_.__e=!1,T=w.__r,B=0,y){for(_.state=_.__s,_.__d=!1,T&&T(e),u=_.render(_.props,_.state,_.context),h=0;h<_._sb.length;h++)_.__h.push(_._sb[h]);_._sb=[]}else do _.__d=!1,T&&T(e),u=_.render(_.props,_.state,_.context),_.state=_.__s;while(_.__d&&++B<25);_.state=_.__s,_.getChildContext!=null&&(o=H(H({},o),_.getChildContext())),y&&!f&&_.getSnapshotBeforeUpdate!=null&&(C=_.getSnapshotBeforeUpdate(d,m)),v=u,u!=null&&u.type===q&&u.key==null&&(v=Ve(u.props.children)),a=je(t,K(v)?v:[v],e,n,o,i,r,s,a,l,c),_.base=e.__e,e.__u&=-161,_.__h.length&&s.push(_),g&&(_.__E=_.__=null)}catch(S){if(e.__v=null,l||r!=null)if(S.then){for(e.__u|=l?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;r[r.indexOf(a)]=null,e.__e=a}else{for(E=r.length;E--;)ue(r[E]);ne(e)}else e.__e=n.__e,e.__k=n.__k,S.then||ne(e);w.__e(S,e,n)}else r==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):a=e.__e=ot(n.__e,e,n,o,i,r,s,l,c);return(u=w.diffed)&&u(e),128&e.__u?void 0:a}function ne(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(ne)}function Ue(t,e,n){for(var o=0;o<n.length;o++)fe(n[o],n[++o],n[++o]);w.__c&&w.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(r){r.call(i)})}catch(r){w.__e(r,i.__v)}})}function Ve(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:K(t)?t.map(Ve):H({},t)}function ot(t,e,n,o,i,r,s,a,l){var c,u,_,f,d,m,C,g=n.props||O,b=e.props,y=e.type;if(y=="svg"?i="http://www.w3.org/2000/svg":y=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),r!=null){for(c=0;c<r.length;c++)if((d=r[c])&&"setAttribute"in d==!!y&&(y?d.localName==y:d.nodeType==3)){t=d,r[c]=null;break}}if(t==null){if(y==null)return document.createTextNode(b);t=document.createElementNS(i,y,b.is&&b),a&&(w.__m&&w.__m(e,r),a=!1),r=null}if(y==null)g===b||a&&t.data==b||(t.data=b);else{if(r=r&&z.call(t.childNodes),!a&&r!=null)for(g={},c=0;c<t.attributes.length;c++)g[(d=t.attributes[c]).name]=d.value;for(c in g)if(d=g[c],c!="children"){if(c=="dangerouslySetInnerHTML")_=d;else if(!(c in b)){if(c=="value"&&"defaultValue"in b||c=="checked"&&"defaultChecked"in b)continue;F(t,c,null,d,i)}}for(c in b)d=b[c],c=="children"?f=d:c=="dangerouslySetInnerHTML"?u=d:c=="value"?m=d:c=="checked"?C=d:a&&typeof d!="function"||g[c]===d||F(t,c,d,g[c],i);if(u)a||_&&(u.__html==_.__html||u.__html==t.innerHTML)||(t.innerHTML=u.__html),e.__k=[];else if(_&&(t.innerHTML=""),je(e.type=="template"?t.content:t,K(f)?f:[f],e,n,o,y=="foreignObject"?"http://www.w3.org/1999/xhtml":i,r,s,r?r[0]:n.__k&&N(n,0),a,l),r!=null)for(c=r.length;c--;)ue(r[c]);a||(c="value",y=="progress"&&m==null?t.removeAttribute("value"):m!=null&&(m!==t[c]||y=="progress"&&!m||y=="option"&&m!=g[c])&&F(t,c,m,g[c],i),c="checked",C!=null&&C!=t[c]&&F(t,c,C,g[c],i))}return t}function fe(t,e,n){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&e==null||(t.__u=t(e))}else t.current=e}catch(i){w.__e(i,n)}}function ze(t,e,n){var o,i;if(w.unmount&&w.unmount(t),(o=t.ref)&&(o.current&&o.current!=t.__e||fe(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(r){w.__e(r,e)}o.base=o.__P=null}if(o=t.__k)for(i=0;i<o.length;i++)o[i]&&ze(o[i],e,n||typeof t.type!="function");n||ue(t.__e),t.__c=t.__=t.__e=void 0}function it(t,e,n){return this.constructor(t,n)}function st(t,e,n){var o,i,r,s;e==document&&(e=document.documentElement),w.__&&w.__(t,e),i=(o=!1)?null:e.__k,r=[],s=[],de(e,t=e.__k=tt(q,null,[t]),i||O,O,e.namespaceURI,i?null:e.firstChild?z.call(e.childNodes):null,r,i?i.__e:e.firstChild,o,s),Ue(r,t,s)}z=Re.slice,w={__e:function(t,e,n,o){for(var i,r,s;e=e.__;)if((i=e.__c)&&!i.__)try{if((r=i.constructor)&&r.getDerivedStateFromError!=null&&(i.setState(r.getDerivedStateFromError(t)),s=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,o||{}),s=i.__d),s)return i.__E=i}catch(a){t=a}throw t}},Ae=0,W.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=H({},this.state),typeof t=="function"&&(t=t(H({},n),this.props)),t&&H(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),ge(this))},W.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ge(this))},W.prototype.render=q,M=[],Ne=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Be=function(t,e){return t.__v.__b-e.__v.__b},V.__r=0,Oe=/(PointerCapture)$|Capture$/i,le=0,ee=ve(!1),te=ve(!0);var _t=0;function p(t,e,n,o,i,r){e||(e={});var s,a,l=e;if("ref"in l)for(a in l={},e)a=="ref"?s=e[a]:l[a]=e[a];var c={type:t,props:l,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--_t,__i:-1,__u:0,__source:i,__self:r};if(typeof t=="function"&&(s=t.defaultProps))for(a in s)l[a]===void 0&&(l[a]=s[a]);return w.vnode&&w.vnode(c),c}const at="modulepreload",ct=function(t,e){return new URL(t,e).href},be={},lt=function(e,n,o){let i=Promise.resolve();if(n&&n.length>0){let s=function(u){return Promise.all(u.map(_=>Promise.resolve(_).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};const a=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");i=s(n.map(u=>{if(u=ct(u,o),u in be)return;be[u]=!0;const _=u.endsWith(".css"),f=_?'[rel="stylesheet"]':"";if(!!o)for(let C=a.length-1;C>=0;C--){const g=a[C];if(g.href===u&&(!_||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${f}`))return;const m=document.createElement("link");if(m.rel=_?"stylesheet":at,_||(m.as="script"),m.crossOrigin="",m.href=u,c&&m.setAttribute("nonce",c),document.head.appendChild(m),_)return new Promise((C,g)=>{m.addEventListener("load",C),m.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function r(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return i.then(s=>{for(const a of s||[])a.status==="rejected"&&r(a.reason);return e().catch(r)})};var R,P,Y,we,re=0,Ke=[],L=w,ke=L.__b,Ee=L.__r,Pe=L.diffed,Le=L.__c,Ce=L.unmount,Ie=L.__;function he(t,e){L.__h&&L.__h(P,t,re||e),re=0;var n=P.__H||(P.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function x(t){return re=1,ut(Ge,t)}function ut(t,e,n){var o=he(R++,2);if(o.t=t,!o.__c&&(o.__=[Ge(void 0,e),function(a){var l=o.__N?o.__N[0]:o.__[0],c=o.t(l,a);l!==c&&(o.__N=[c,o.__[1]],o.__c.setState({}))}],o.__c=P,!P.__f)){var i=function(a,l,c){if(!o.__c.__H)return!0;var u=o.__c.__H.__.filter(function(f){return!!f.__c});if(u.every(function(f){return!f.__N}))return!r||r.call(this,a,l,c);var _=o.__c.props!==a;return u.forEach(function(f){if(f.__N){var d=f.__[0];f.__=f.__N,f.__N=void 0,d!==f.__[0]&&(_=!0)}}),r&&r.call(this,a,l,c)||_};P.__f=!0;var r=P.shouldComponentUpdate,s=P.componentWillUpdate;P.componentWillUpdate=function(a,l,c){if(this.__e){var u=r;r=void 0,i(a,l,c),r=u}s&&s.call(this,a,l,c)},P.shouldComponentUpdate=i}return o.__N||o.__}function dt(t,e){var n=he(R++,3);!L.__s&&qe(n.__H,e)&&(n.__=t,n.u=e,P.__H.__h.push(n))}function ft(t,e){var n=he(R++,7);return qe(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function ht(){for(var t;t=Ke.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(U),t.__H.__h.forEach(oe),t.__H.__h=[]}catch(e){t.__H.__h=[],L.__e(e,t.__v)}}L.__b=function(t){P=null,ke&&ke(t)},L.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Ie&&Ie(t,e)},L.__r=function(t){Ee&&Ee(t),R=0;var e=(P=t.__c).__H;e&&(Y===P?(e.__h=[],P.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(U),e.__h.forEach(oe),e.__h=[],R=0)),Y=P},L.diffed=function(t){Pe&&Pe(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ke.push(e)!==1&&we===L.requestAnimationFrame||((we=L.requestAnimationFrame)||pt)(ht)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),Y=P=null},L.__c=function(t,e){e.some(function(n){try{n.__h.forEach(U),n.__h=n.__h.filter(function(o){return!o.__||oe(o)})}catch(o){e.some(function(i){i.__h&&(i.__h=[])}),e=[],L.__e(o,n.__v)}}),Le&&Le(t,e)},L.unmount=function(t){Ce&&Ce(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{U(o)}catch(i){e=i}}),n.__H=void 0,e&&L.__e(e,n.__v))};var Se=typeof requestAnimationFrame=="function";function pt(t){var e,n=function(){clearTimeout(o),Se&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,35);Se&&(e=requestAnimationFrame(n))}function U(t){var e=P,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),P=e}function oe(t){var e=P;t.__c=t.__(),P=e}function qe(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function Ge(t,e){return typeof e=="function"?e(t):e}async function mt(){const t=await fetch("./demo-trainings.json",{credentials:"same-origin"});if(!t.ok)throw new Error(`Failed to load demo-trainings.json (${t.status})`);const e=await t.json();if(!Array.isArray(e))throw new Error("demo-trainings.json is not an array");return e}function Qe(t){return t.toLowerCase().replace(/[^a-z0-9]+/gi," ").trim().split(/\s+/).filter(e=>e.length>=2)}function De(t){const e=new Map,n=[];let o=0;for(const i of t){const r=Qe(i.searchText),s=new Map;for(const l of r)s.set(l,(s.get(l)??0)+1);for(const l of s.keys())e.set(l,(e.get(l)??0)+1);const a=r.length;o+=a,n.push({record:i,tf:s,len:a})}return{docs:n,df:e,avgLen:n.length?o/n.length:0,n:n.length}}function gt(t,e){const i=Qe(e),r=new Map;for(const s of t.docs){let a=0;for(const l of i){const c=s.tf.get(l)??0;if(!c)continue;const u=t.df.get(l)??0,_=Math.log(1+(t.n-u+.5)/(u+.5)),f=c+1.2*(1-.75+.75*s.len/(t.avgLen||1));a+=_*(c*(1.2+1)/f)}a>0&&r.set(s.record.id,a)}return r}function yt(t,e){return t.filter(n=>{if(e.modality&&n.modality!==e.modality)return!1;if(e.language){const o=e.language.toLowerCase();if(!n.languages.some(i=>i.toLowerCase()===o))return!1}if(e.platform){const o=e.platform.toLowerCase();if(!n.platform.toLowerCase().includes(o))return!1}if(e.audienceContains){const o=e.audienceContains.toLowerCase();if(!n.intendedAudience.toLowerCase().includes(o))return!1}return!0})}function vt(t,e,n){const o=gt(n,e),i=[];for(const r of t){const s=o.get(r.id)??0;if(s<=0)continue;const a=[];r.learningName.toLowerCase().includes(e.toLowerCase())&&a.push("title match"),i.push({record:r,score:s,reasons:a})}return i.sort((r,s)=>s.score-r.score),i}const ie=(t,e)=>e.some(n=>t instanceof n);let xe,He;function bt(){return xe||(xe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wt(){return He||(He=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const se=new WeakMap,J=new WeakMap,G=new WeakMap;function kt(t){const e=new Promise((n,o)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{n($(t.result)),i()},s=()=>{o(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",s)});return G.set(e,t),e}function Et(t){if(se.has(t))return;const e=new Promise((n,o)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{n(),i()},s=()=>{o(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)});se.set(t,e)}let _e={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return se.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Ye(t){_e=t(_e)}function Pt(t){return wt().includes(t)?function(...e){return t.apply(ae(this),e),$(this.request)}:function(...e){return $(t.apply(ae(this),e))}}function Lt(t){return typeof t=="function"?Pt(t):(t instanceof IDBTransaction&&Et(t),ie(t,bt())?new Proxy(t,_e):t)}function $(t){if(t instanceof IDBRequest)return kt(t);if(J.has(t))return J.get(t);const e=Lt(t);return e!==t&&(J.set(t,e),G.set(e,t)),e}const ae=t=>G.get(t);function Ct(t,e,{blocked:n,upgrade:o,blocking:i,terminated:r}={}){const s=indexedDB.open(t,e),a=$(s);return o&&s.addEventListener("upgradeneeded",l=>{o($(s.result),l.oldVersion,l.newVersion,$(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const It=["get","getKey","getAll","getAllKeys","count"],St=["put","add","delete","clear"],X=new Map;function Te(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(X.get(e))return X.get(e);const n=e.replace(/FromIndex$/,""),o=e!==n,i=St.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(i||It.includes(n)))return;const r=async function(s,...a){const l=this.transaction(s,i?"readwrite":"readonly");let c=l.store;return o&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return X.set(e,r),r}Ye(t=>({...t,get:(e,n,o)=>Te(e,n)||t.get(e,n,o),has:(e,n)=>!!Te(e,n)||t.has(e,n)}));const Dt=["continue","continuePrimaryKey","advance"],Me={},ce=new WeakMap,Je=new WeakMap,xt={get(t,e){if(!Dt.includes(e))return t[e];let n=Me[e];return n||(n=Me[e]=function(...o){ce.set(this,Je.get(this)[e](...o))}),n}};async function*Ht(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const n=new Proxy(e,xt);for(Je.set(n,e),G.set(n,ae(e));e;)yield n,e=await(ce.get(n)||e.continue()),ce.delete(n)}function $e(t,e){return e===Symbol.asyncIterator&&ie(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&ie(t,[IDBIndex,IDBObjectStore])}Ye(t=>({...t,get(e,n,o){return $e(e,n)?Ht:t.get(e,n,o)},has(e,n){return $e(e,n)||t.has(e,n)}}));const Tt="who-training-finder-db",Mt=1,Xe="trainings";async function Ze(){return Ct(Tt,Mt,{upgrade(t){t.objectStoreNames.contains("trainings")||t.createObjectStore("trainings"),t.objectStoreNames.contains("embeddings")||t.createObjectStore("embeddings")}})}async function $t(){return(await(await Ze()).get("trainings",Xe))?.records??null}async function At(t){await(await Ze()).put("trainings",{updatedAt:Date.now(),records:t},Xe)}const Z={dataSource:"demo_json",sharepoint:{siteRelativeUrl:"/sites/EuroWCPHE",listTitle:"Copytraininglist2912026"},searchMode:"fast",embeddingModel:"bge-small",allowRemoteModels:!0,modelsBasePath:"./models"};function Nt(){const[t,e]=x(null),[n,o]=x(null),[i,r]=x("idle"),[s,a]=x(0),[l,c]=x("Initializing..."),[u,_]=x(!1),[f,d]=x(""),[m,C]=x(null),[g,b]=x(null),y=ft(()=>i==="ready",[i]);dt(()=>{I()},[]);async function I(){r("data"),c("Loading training data..."),a(5);try{const h=await $t();h&&h.length&&(e(h),o(De(h)),a(15));const v=Z.dataSource==="demo_json"?await mt():await D();e(v),o(De(v)),await At(v),a(30)}catch(h){console.error("Failed to load data:",h),c("Error loading data. Please refresh.");return}a(100),r("ready"),c("")}async function D(){const{fetchAllListItems:h}=await lt(async()=>{const{fetchAllListItems:v}=await import("./sharepoint-BSZBMNpd.js");return{fetchAllListItems:v}},[],import.meta.url);return h({siteRelativeUrl:Z.sharepoint.siteRelativeUrl,listTitle:Z.sharepoint.listTitle})}async function A(h){if(!t||!n)return;const v=T(h);b(v);const E=yt(t,{modality:v.modality,language:v.language,platform:v.platform,audienceContains:v.audience});let k;k=vt(E,v.topic,n);const S=k.slice(0,10);C(S)}function T(h){const v=h.toLowerCase();let E=h;const k={topic:h,rawQuery:h},S=["english","french","spanish","russian","arabic","portuguese","chinese","ukrainian","polish"];for(const Q of S){const pe=new RegExp(`\\b(in\\s+)?${Q}\\b`,"gi");if(pe.test(v)){k.language=Q.charAt(0).toUpperCase()+Q.slice(1),E=E.replace(pe,"");break}}return/\bonline\b|e-learning/i.test(v)?(k.modality="online",E=E.replace(/\bonline\b|e-learning/gi,"")):/\bin[- ]person\b/i.test(v)?(k.modality="in_person",E=E.replace(/\bin[- ]person\b/gi,"")):/\bblended\b/i.test(v)&&(k.modality="blended",E=E.replace(/\bblended\b/gi,"")),/openwho/i.test(v)?(k.platform="OpenWHO",E=E.replace(/openwho/gi,"")):/who academy/i.test(v)?(k.platform="WHO Academy",E=E.replace(/who academy/gi,"")):/hslp/i.test(v)&&(k.platform="HSLP",E=E.replace(/hslp/gi,"")),/member state|ministry/i.test(v)?k.audience="Member":/who staff/i.test(v)&&(k.audience="WHO"),E=E.replace(/\b(i need|i want|i'm looking for|looking for|find me|show me|a training|training|about|on|for)\b/gi,"").replace(/\s+/g," ").trim(),k.topic=E||"health emergency",k}async function B(){const h=f.trim();!h||!y||(d(""),await A(h))}return p("div",{class:"embed-container",children:[i!=="ready"&&p("div",{class:"loading-overlay",children:p("div",{class:"loading-content",children:[p("div",{class:"loading-title",children:"WHO PHHE Training Finder"}),p("div",{class:"loading-bar-container",children:p("div",{class:"loading-bar",style:{width:`${s}%`}})}),p("div",{class:"loading-text",children:l}),p("div",{class:"loading-percent",children:[s,"%"]})]})}),p("div",{class:`embed-main ${i!=="ready"?"hidden":""}`,children:[p("div",{class:"embed-header",children:p("div",{class:"embed-header-text",children:[p("span",{class:"embed-title",children:"WHO PHHE Training Finder"}),p("span",{class:"embed-subtitle",children:"WHO European Centre for Preparedness for Humanitarian and Health Emergencies (PHHE)"})]})}),p("div",{class:"embed-chat",children:p("div",{class:"embed-composer",children:[p("input",{type:"text",value:f,placeholder:"Describe the training you need...",disabled:!y,onInput:h=>d(h.target.value),onKeyDown:h=>{h.key==="Enter"&&B()}}),p("button",{class:"embed-send",disabled:!y,onClick:()=>void B(),children:"Search"})]})}),m&&m.length>0&&p("div",{class:"embed-results",children:[g&&p("div",{class:"embed-filters",children:[p("strong",{children:"Topic:"})," ",g.topic,g.language&&p("span",{class:"filter-pill",children:g.language}),g.modality&&p("span",{class:"filter-pill",children:g.modality}),g.platform&&p("span",{class:"filter-pill",children:g.platform})]}),m.map((h,v)=>p("div",{class:"embed-card",children:[p("div",{class:"card-title",children:h.record.learningName}),p("div",{class:"card-desc",children:[h.record.description?.slice(0,150),h.record.description?.length>150?"...":""]}),p("div",{class:"card-tags",children:[h.record.technicalArea&&p("span",{class:"tag",children:h.record.technicalArea}),h.record.modality&&h.record.modality!=="unknown"&&p("span",{class:"tag",children:h.record.modality}),h.record.platform&&p("span",{class:"tag",children:h.record.platform}),h.record.languages.length>0&&p("span",{class:"tag",children:h.record.languages.slice(0,3).join(", ")})]}),h.record.normalizedLink&&p("a",{class:"card-link",href:h.record.normalizedLink,target:"_blank",rel:"noreferrer",children:"Open training"})]},v))]})]})]})}st(p(Nt,{}),document.getElementById("app"));
//# sourceMappingURL=main-BVitIxip.js.map
