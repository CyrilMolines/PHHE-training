(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();var K,k,Oe,T,ye,Re,Fe,je,fe,re,oe,O={},Ue=[],rt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,q=Array.isArray;function x(t,e){for(var n in e)t[n]=e[n];return t}function he(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function ot(t,e,n){var o,i,r,s={};for(r in e)r=="key"?o=e[r]:r=="ref"?i=e[r]:s[r]=e[r];if(arguments.length>2&&(s.children=arguments.length>3?K.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(r in t.defaultProps)s[r]===void 0&&(s[r]=t.defaultProps[r]);return U(t,s,o,i,null)}function U(t,e,n,o,i){var r={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++Oe,__i:-1,__u:0};return i==null&&k.vnode!=null&&k.vnode(r),r}function G(t){return t.children}function W(t,e){this.props=t,this.context=e}function B(t,e){if(e==null)return t.__?B(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?B(t):null}function We(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return We(t)}}function be(t){(!t.__d&&(t.__d=!0)&&T.push(t)&&!z.__r++||ye!=k.debounceRendering)&&((ye=k.debounceRendering)||Re)(z)}function z(){for(var t,e,n,o,i,r,s,c=1;T.length;)T.length>c&&T.sort(Fe),t=T.shift(),c=T.length,t.__d&&(n=void 0,o=void 0,i=(o=(e=t).__v).__e,r=[],s=[],e.__P&&((n=x({},o)).__v=o.__v+1,k.vnode&&k.vnode(n),pe(e.__P,n,o,e.__n,e.__P.namespaceURI,32&o.__u?[i]:null,r,i??B(o),!!(32&o.__u),s),n.__v=o.__v,n.__.__k[n.__i]=n,Ke(r,n,s),o.__e=o.__=null,n.__e!=i&&We(n)));z.__r=0}function Ve(t,e,n,o,i,r,s,c,_,l,f){var a,p,h,v,C,y,w,b=o&&o.__k||Ue,I=e.length;for(_=it(n,e,b,_,I),a=0;a<I;a++)(h=n.__k[a])!=null&&(p=h.__i==-1?O:b[h.__i]||O,h.__i=a,y=pe(t,h,p,i,r,s,c,_,l,f),v=h.__e,h.ref&&p.ref!=h.ref&&(p.ref&&me(p.ref,null,h),f.push(h.ref,h.__c||v,h)),C==null&&v!=null&&(C=v),(w=!!(4&h.__u))||p.__k===h.__k?_=ze(h,_,t,w):typeof h.type=="function"&&y!==void 0?_=y:v&&(_=v.nextSibling),h.__u&=-7);return n.__e=C,_}function it(t,e,n,o,i){var r,s,c,_,l,f=n.length,a=f,p=0;for(t.__k=new Array(i),r=0;r<i;r++)(s=e[r])!=null&&typeof s!="boolean"&&typeof s!="function"?(typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?s=t.__k[r]=U(null,s,null,null,null):q(s)?s=t.__k[r]=U(G,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?s=t.__k[r]=U(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):t.__k[r]=s,_=r+p,s.__=t,s.__b=t.__b+1,c=null,(l=s.__i=st(s,n,_,a))!=-1&&(a--,(c=n[l])&&(c.__u|=2)),c==null||c.__v==null?(l==-1&&(i>f?p--:i<f&&p++),typeof s.type!="function"&&(s.__u|=4)):l!=_&&(l==_-1?p--:l==_+1?p++:(l>_?p--:p++,s.__u|=4))):t.__k[r]=null;if(a)for(r=0;r<f;r++)(c=n[r])!=null&&(2&c.__u)==0&&(c.__e==o&&(o=B(c)),Ge(c,c));return o}function ze(t,e,n,o){var i,r;if(typeof t.type=="function"){for(i=t.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=t,e=ze(i[r],e,n,o));return e}t.__e!=e&&(o&&(e&&t.type&&!e.parentNode&&(e=B(t)),n.insertBefore(t.__e,e||null)),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function st(t,e,n,o){var i,r,s,c=t.key,_=t.type,l=e[n],f=l!=null&&(2&l.__u)==0;if(l===null&&c==null||f&&c==l.key&&_==l.type)return n;if(o>(f?1:0)){for(i=n-1,r=n+1;i>=0||r<e.length;)if((l=e[s=i>=0?i--:r++])!=null&&(2&l.__u)==0&&c==l.key&&_==l.type)return s}return-1}function we(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||rt.test(e)?n:n+"px"}function j(t,e,n,o,i){var r,s;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||we(t.style,e,"");if(n)for(e in n)o&&n[e]==o[e]||we(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")r=e!=(e=e.replace(je,"$1")),s=e.toLowerCase(),e=s in t||e=="onFocusOut"||e=="onFocusIn"?s.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+r]=n,n?o?n.u=o.u:(n.u=fe,t.addEventListener(e,r?oe:re,r)):t.removeEventListener(e,r?oe:re,r);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function ke(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=fe++;else if(e.t<n.u)return;return n(k.event?k.event(e):e)}}}function pe(t,e,n,o,i,r,s,c,_,l){var f,a,p,h,v,C,y,w,b,I,S,$,H,F,N,A,u,m=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(_=!!(32&n.__u),r=[c=e.__e=n.__e]),(f=k.__b)&&f(e);e:if(typeof m=="function")try{if(w=e.props,b="prototype"in m&&m.prototype.render,I=(f=m.contextType)&&o[f.__c],S=f?I?I.props.value:f.__:o,n.__c?y=(a=e.__c=n.__c).__=a.__E:(b?e.__c=a=new m(w,S):(e.__c=a=new W(w,S),a.constructor=m,a.render=ct),I&&I.sub(a),a.state||(a.state={}),a.__n=o,p=a.__d=!0,a.__h=[],a._sb=[]),b&&a.__s==null&&(a.__s=a.state),b&&m.getDerivedStateFromProps!=null&&(a.__s==a.state&&(a.__s=x({},a.__s)),x(a.__s,m.getDerivedStateFromProps(w,a.__s))),h=a.props,v=a.state,a.__v=e,p)b&&m.getDerivedStateFromProps==null&&a.componentWillMount!=null&&a.componentWillMount(),b&&a.componentDidMount!=null&&a.__h.push(a.componentDidMount);else{if(b&&m.getDerivedStateFromProps==null&&w!==h&&a.componentWillReceiveProps!=null&&a.componentWillReceiveProps(w,S),e.__v==n.__v||!a.__e&&a.shouldComponentUpdate!=null&&a.shouldComponentUpdate(w,a.__s,S)===!1){for(e.__v!=n.__v&&(a.props=w,a.state=a.__s,a.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(g){g&&(g.__=e)}),$=0;$<a._sb.length;$++)a.__h.push(a._sb[$]);a._sb=[],a.__h.length&&s.push(a);break e}a.componentWillUpdate!=null&&a.componentWillUpdate(w,a.__s,S),b&&a.componentDidUpdate!=null&&a.__h.push(function(){a.componentDidUpdate(h,v,C)})}if(a.context=S,a.props=w,a.__P=t,a.__e=!1,H=k.__r,F=0,b){for(a.state=a.__s,a.__d=!1,H&&H(e),f=a.render(a.props,a.state,a.context),N=0;N<a._sb.length;N++)a.__h.push(a._sb[N]);a._sb=[]}else do a.__d=!1,H&&H(e),f=a.render(a.props,a.state,a.context),a.state=a.__s;while(a.__d&&++F<25);a.state=a.__s,a.getChildContext!=null&&(o=x(x({},o),a.getChildContext())),b&&!p&&a.getSnapshotBeforeUpdate!=null&&(C=a.getSnapshotBeforeUpdate(h,v)),A=f,f!=null&&f.type===G&&f.key==null&&(A=qe(f.props.children)),c=Ve(t,q(A)?A:[A],e,n,o,i,r,s,c,_,l),a.base=e.__e,e.__u&=-161,a.__h.length&&s.push(a),y&&(a.__E=a.__=null)}catch(g){if(e.__v=null,_||r!=null)if(g.then){for(e.__u|=_?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;r[r.indexOf(c)]=null,e.__e=c}else{for(u=r.length;u--;)he(r[u]);ie(e)}else e.__e=n.__e,e.__k=n.__k,g.then||ie(e);k.__e(g,e,n)}else r==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):c=e.__e=at(n.__e,e,n,o,i,r,s,_,l);return(f=k.diffed)&&f(e),128&e.__u?void 0:c}function ie(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(ie)}function Ke(t,e,n){for(var o=0;o<n.length;o++)me(n[o],n[++o],n[++o]);k.__c&&k.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(r){r.call(i)})}catch(r){k.__e(r,i.__v)}})}function qe(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:q(t)?t.map(qe):x({},t)}function at(t,e,n,o,i,r,s,c,_){var l,f,a,p,h,v,C,y=n.props||O,w=e.props,b=e.type;if(b=="svg"?i="http://www.w3.org/2000/svg":b=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),r!=null){for(l=0;l<r.length;l++)if((h=r[l])&&"setAttribute"in h==!!b&&(b?h.localName==b:h.nodeType==3)){t=h,r[l]=null;break}}if(t==null){if(b==null)return document.createTextNode(w);t=document.createElementNS(i,b,w.is&&w),c&&(k.__m&&k.__m(e,r),c=!1),r=null}if(b==null)y===w||c&&t.data==w||(t.data=w);else{if(r=r&&K.call(t.childNodes),!c&&r!=null)for(y={},l=0;l<t.attributes.length;l++)y[(h=t.attributes[l]).name]=h.value;for(l in y)if(h=y[l],l!="children"){if(l=="dangerouslySetInnerHTML")a=h;else if(!(l in w)){if(l=="value"&&"defaultValue"in w||l=="checked"&&"defaultChecked"in w)continue;j(t,l,null,h,i)}}for(l in w)h=w[l],l=="children"?p=h:l=="dangerouslySetInnerHTML"?f=h:l=="value"?v=h:l=="checked"?C=h:c&&typeof h!="function"||y[l]===h||j(t,l,h,y[l],i);if(f)c||a&&(f.__html==a.__html||f.__html==t.innerHTML)||(t.innerHTML=f.__html),e.__k=[];else if(a&&(t.innerHTML=""),Ve(e.type=="template"?t.content:t,q(p)?p:[p],e,n,o,b=="foreignObject"?"http://www.w3.org/1999/xhtml":i,r,s,r?r[0]:n.__k&&B(n,0),c,_),r!=null)for(l=r.length;l--;)he(r[l]);c||(l="value",b=="progress"&&v==null?t.removeAttribute("value"):v!=null&&(v!==t[l]||b=="progress"&&!v||b=="option"&&v!=y[l])&&j(t,l,v,y[l],i),l="checked",C!=null&&C!=t[l]&&j(t,l,C,y[l],i))}return t}function me(t,e,n){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&e==null||(t.__u=t(e))}else t.current=e}catch(i){k.__e(i,n)}}function Ge(t,e,n){var o,i;if(k.unmount&&k.unmount(t),(o=t.ref)&&(o.current&&o.current!=t.__e||me(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(r){k.__e(r,e)}o.base=o.__P=null}if(o=t.__k)for(i=0;i<o.length;i++)o[i]&&Ge(o[i],e,n||typeof t.type!="function");n||he(t.__e),t.__c=t.__=t.__e=void 0}function ct(t,e,n){return this.constructor(t,n)}function lt(t,e,n){var o,i,r,s;e==document&&(e=document.documentElement),k.__&&k.__(t,e),i=(o=!1)?null:e.__k,r=[],s=[],pe(e,t=e.__k=ot(G,null,[t]),i||O,O,e.namespaceURI,i?null:e.firstChild?K.call(e.childNodes):null,r,i?i.__e:e.firstChild,o,s),Ke(r,t,s)}K=Ue.slice,k={__e:function(t,e,n,o){for(var i,r,s;e=e.__;)if((i=e.__c)&&!i.__)try{if((r=i.constructor)&&r.getDerivedStateFromError!=null&&(i.setState(r.getDerivedStateFromError(t)),s=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,o||{}),s=i.__d),s)return i.__E=i}catch(c){t=c}throw t}},Oe=0,W.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=x({},this.state),typeof t=="function"&&(t=t(x({},n),this.props)),t&&x(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),be(this))},W.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),be(this))},W.prototype.render=G,T=[],Re=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Fe=function(t,e){return t.__v.__b-e.__v.__b},z.__r=0,je=/(PointerCapture)$|Capture$/i,fe=0,re=ke(!1),oe=ke(!0);var _t=0;function d(t,e,n,o,i,r){e||(e={});var s,c,_=e;if("ref"in _)for(c in _={},e)c=="ref"?s=e[c]:_[c]=e[c];var l={type:t,props:_,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--_t,__i:-1,__u:0,__source:i,__self:r};if(typeof t=="function"&&(s=t.defaultProps))for(c in s)_[c]===void 0&&(_[c]=s[c]);return k.vnode&&k.vnode(l),l}const dt="modulepreload",ut=function(t,e){return new URL(t,e).href},Ee={},ft=function(e,n,o){let i=Promise.resolve();if(n&&n.length>0){let s=function(f){return Promise.all(f.map(a=>Promise.resolve(a).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};const c=document.getElementsByTagName("link"),_=document.querySelector("meta[property=csp-nonce]"),l=_?.nonce||_?.getAttribute("nonce");i=s(n.map(f=>{if(f=ut(f,o),f in Ee)return;Ee[f]=!0;const a=f.endsWith(".css"),p=a?'[rel="stylesheet"]':"";if(!!o)for(let C=c.length-1;C>=0;C--){const y=c[C];if(y.href===f&&(!a||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${p}`))return;const v=document.createElement("link");if(v.rel=a?"stylesheet":dt,a||(v.as="script"),v.crossOrigin="",v.href=f,l&&v.setAttribute("nonce",l),document.head.appendChild(v),a)return new Promise((C,y)=>{v.addEventListener("load",C),v.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${f}`)))})}))}function r(s){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=s,window.dispatchEvent(c),!c.defaultPrevented)throw s}return i.then(s=>{for(const c of s||[])c.status==="rejected"&&r(c.reason);return e().catch(r)})};var R,E,X,Pe,se=0,Qe=[],P=k,Ce=P.__b,Le=P.__r,Se=P.diffed,Ie=P.__c,De=P.unmount,xe=P.__;function ge(t,e){P.__h&&P.__h(E,t,se||e),se=0;var n=E.__H||(E.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function D(t){return se=1,ht(Je,t)}function ht(t,e,n){var o=ge(R++,2);if(o.t=t,!o.__c&&(o.__=[Je(void 0,e),function(c){var _=o.__N?o.__N[0]:o.__[0],l=o.t(_,c);_!==l&&(o.__N=[l,o.__[1]],o.__c.setState({}))}],o.__c=E,!E.__f)){var i=function(c,_,l){if(!o.__c.__H)return!0;var f=o.__c.__H.__.filter(function(p){return!!p.__c});if(f.every(function(p){return!p.__N}))return!r||r.call(this,c,_,l);var a=o.__c.props!==c;return f.forEach(function(p){if(p.__N){var h=p.__[0];p.__=p.__N,p.__N=void 0,h!==p.__[0]&&(a=!0)}}),r&&r.call(this,c,_,l)||a};E.__f=!0;var r=E.shouldComponentUpdate,s=E.componentWillUpdate;E.componentWillUpdate=function(c,_,l){if(this.__e){var f=r;r=void 0,i(c,_,l),r=f}s&&s.call(this,c,_,l)},E.shouldComponentUpdate=i}return o.__N||o.__}function pt(t,e){var n=ge(R++,3);!P.__s&&Ye(n.__H,e)&&(n.__=t,n.u=e,E.__H.__h.push(n))}function mt(t,e){var n=ge(R++,7);return Ye(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function gt(){for(var t;t=Qe.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(V),t.__H.__h.forEach(ae),t.__H.__h=[]}catch(e){t.__H.__h=[],P.__e(e,t.__v)}}P.__b=function(t){E=null,Ce&&Ce(t)},P.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),xe&&xe(t,e)},P.__r=function(t){Le&&Le(t),R=0;var e=(E=t.__c).__H;e&&(X===E?(e.__h=[],E.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(V),e.__h.forEach(ae),e.__h=[],R=0)),X=E},P.diffed=function(t){Se&&Se(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Qe.push(e)!==1&&Pe===P.requestAnimationFrame||((Pe=P.requestAnimationFrame)||vt)(gt)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),X=E=null},P.__c=function(t,e){e.some(function(n){try{n.__h.forEach(V),n.__h=n.__h.filter(function(o){return!o.__||ae(o)})}catch(o){e.some(function(i){i.__h&&(i.__h=[])}),e=[],P.__e(o,n.__v)}}),Ie&&Ie(t,e)},P.unmount=function(t){De&&De(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{V(o)}catch(i){e=i}}),n.__H=void 0,e&&P.__e(e,n.__v))};var Ae=typeof requestAnimationFrame=="function";function vt(t){var e,n=function(){clearTimeout(o),Ae&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,35);Ae&&(e=requestAnimationFrame(n))}function V(t){var e=E,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),E=e}function ae(t){var e=E;t.__c=t.__(),E=e}function Ye(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function Je(t,e){return typeof e=="function"?e(t):e}async function yt(){const t=await fetch("./demo-trainings.json",{credentials:"same-origin"});if(!t.ok)throw new Error(`Failed to load demo-trainings.json (${t.status})`);const e=await t.json();if(!Array.isArray(e))throw new Error("demo-trainings.json is not an array");return e}function Xe(t){return t.toLowerCase().replace(/[^a-z0-9]+/gi," ").trim().split(/\s+/).filter(e=>e.length>=2)}function He(t){const e=new Map,n=[];let o=0;for(const i of t){const r=Xe(i.searchText),s=new Map;for(const _ of r)s.set(_,(s.get(_)??0)+1);for(const _ of s.keys())e.set(_,(e.get(_)??0)+1);const c=r.length;o+=c,n.push({record:i,tf:s,len:c})}return{docs:n,df:e,avgLen:n.length?o/n.length:0,n:n.length}}function bt(t,e){const i=Xe(e),r=new Map;for(const s of t.docs){let c=0;for(const _ of i){const l=s.tf.get(_)??0;if(!l)continue;const f=t.df.get(_)??0,a=Math.log(1+(t.n-f+.5)/(f+.5)),p=l+1.2*(1-.75+.75*s.len/(t.avgLen||1));c+=a*(l*(1.2+1)/p)}c>0&&r.set(s.record.id,c)}return r}function wt(t,e){return t.filter(n=>{if(e.modality&&n.modality!==e.modality)return!1;if(e.language){const o=e.language.toLowerCase();if(!n.languages.some(i=>i.toLowerCase()===o))return!1}if(e.platform){const o=e.platform.toLowerCase();if(!n.platform.toLowerCase().includes(o))return!1}if(e.audienceContains){const o=e.audienceContains.toLowerCase();if(!n.intendedAudience.toLowerCase().includes(o))return!1}return!0})}function kt(t,e,n){const o=bt(n,e),i=[];for(const r of t){const s=o.get(r.id)??0;if(s<=0)continue;const c=[];r.learningName.toLowerCase().includes(e.toLowerCase())&&c.push("title match"),i.push({record:r,score:s,reasons:c})}return i.sort((r,s)=>s.score-r.score),i}const ce=(t,e)=>e.some(n=>t instanceof n);let Te,Me;function Et(){return Te||(Te=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Pt(){return Me||(Me=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const le=new WeakMap,Z=new WeakMap,Q=new WeakMap;function Ct(t){const e=new Promise((n,o)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{n(M(t.result)),i()},s=()=>{o(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",s)});return Q.set(e,t),e}function Lt(t){if(le.has(t))return;const e=new Promise((n,o)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{n(),i()},s=()=>{o(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)});le.set(t,e)}let _e={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return le.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return M(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Ze(t){_e=t(_e)}function St(t){return Pt().includes(t)?function(...e){return t.apply(de(this),e),M(this.request)}:function(...e){return M(t.apply(de(this),e))}}function It(t){return typeof t=="function"?St(t):(t instanceof IDBTransaction&&Lt(t),ce(t,Et())?new Proxy(t,_e):t)}function M(t){if(t instanceof IDBRequest)return Ct(t);if(Z.has(t))return Z.get(t);const e=It(t);return e!==t&&(Z.set(t,e),Q.set(e,t)),e}const de=t=>Q.get(t);function Dt(t,e,{blocked:n,upgrade:o,blocking:i,terminated:r}={}){const s=indexedDB.open(t,e),c=M(s);return o&&s.addEventListener("upgradeneeded",_=>{o(M(s.result),_.oldVersion,_.newVersion,M(s.transaction),_)}),n&&s.addEventListener("blocked",_=>n(_.oldVersion,_.newVersion,_)),c.then(_=>{r&&_.addEventListener("close",()=>r()),i&&_.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}const xt=["get","getKey","getAll","getAllKeys","count"],At=["put","add","delete","clear"],ee=new Map;function $e(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ee.get(e))return ee.get(e);const n=e.replace(/FromIndex$/,""),o=e!==n,i=At.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(i||xt.includes(n)))return;const r=async function(s,...c){const _=this.transaction(s,i?"readwrite":"readonly");let l=_.store;return o&&(l=l.index(c.shift())),(await Promise.all([l[n](...c),i&&_.done]))[0]};return ee.set(e,r),r}Ze(t=>({...t,get:(e,n,o)=>$e(e,n)||t.get(e,n,o),has:(e,n)=>!!$e(e,n)||t.has(e,n)}));const Ht=["continue","continuePrimaryKey","advance"],Ne={},ue=new WeakMap,et=new WeakMap,Tt={get(t,e){if(!Ht.includes(e))return t[e];let n=Ne[e];return n||(n=Ne[e]=function(...o){ue.set(this,et.get(this)[e](...o))}),n}};async function*Mt(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const n=new Proxy(e,Tt);for(et.set(n,e),Q.set(n,de(e));e;)yield n,e=await(ue.get(n)||e.continue()),ue.delete(n)}function Be(t,e){return e===Symbol.asyncIterator&&ce(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&ce(t,[IDBIndex,IDBObjectStore])}Ze(t=>({...t,get(e,n,o){return Be(e,n)?Mt:t.get(e,n,o)},has(e,n){return Be(e,n)||t.has(e,n)}}));const $t="who-training-finder-db",Nt=1,tt="trainings";async function nt(){return Dt($t,Nt,{upgrade(t){t.objectStoreNames.contains("trainings")||t.createObjectStore("trainings"),t.objectStoreNames.contains("embeddings")||t.createObjectStore("embeddings")}})}async function Bt(){return(await(await nt()).get("trainings",tt))?.records??null}async function Ot(t){await(await nt()).put("trainings",{updatedAt:Date.now(),records:t},tt)}function Rt(){const t=new URLSearchParams(window.location.search);return{site:t.get("site"),list:t.get("list"),mode:t.get("mode")}}const te=Rt(),ne={dataSource:te.mode==="demo"?"demo_json":"sharepoint",sharepoint:{siteRelativeUrl:te.site||"/sites/EuroWCPHE",listTitle:te.list||"Copytraininglist2912026"},searchMode:"fast",embeddingModel:"bge-small",allowRemoteModels:!0,modelsBasePath:"./models"};function Ft(){const[t,e]=D(null),[n,o]=D(null),[i,r]=D("idle"),[s,c]=D(0),[_,l]=D("Initializing..."),[f,a]=D(!1),[p,h]=D(""),[v,C]=D(null),[y,w]=D(null),[b,I]=D(null),S=mt(()=>i==="ready",[i]);pt(()=>{$()},[]);async function $(){r("data"),l("Loading training data..."),c(5);try{const u=await Bt();u&&u.length&&(e(u),o(He(u)),c(15));const m=ne.dataSource==="demo_json"?await yt():await H();e(m),o(He(m)),await Ot(m),c(30)}catch(u){console.error("Failed to load data:",u),l("Error loading data. Please refresh.");return}c(100),r("ready"),l("")}async function H(){const{fetchAllListItems:u}=await ft(async()=>{const{fetchAllListItems:m}=await import("./sharepoint-BSZBMNpd.js");return{fetchAllListItems:m}},[],import.meta.url);return u({siteRelativeUrl:ne.sharepoint.siteRelativeUrl,listTitle:ne.sharepoint.listTitle})}async function F(u){if(!t||!n)return;const m=N(u);w(m);const g=wt(t,{modality:m.modality,language:m.language,platform:m.platform,audienceContains:m.audience});let L;L=kt(g,m.topic,n);const Y=L.slice(0,10);C(Y)}function N(u){const m=u.toLowerCase();let g=u;const L={topic:u,rawQuery:u},Y=["english","french","spanish","russian","arabic","portuguese","chinese","ukrainian","polish"];for(const J of Y){const ve=new RegExp(`\\b(in\\s+)?${J}\\b`,"gi");if(ve.test(m)){L.language=J.charAt(0).toUpperCase()+J.slice(1),g=g.replace(ve,"");break}}return/\bonline\b|e-learning/i.test(m)?(L.modality="online",g=g.replace(/\bonline\b|e-learning/gi,"")):/\bin[- ]person\b/i.test(m)?(L.modality="in_person",g=g.replace(/\bin[- ]person\b/gi,"")):/\bblended\b/i.test(m)&&(L.modality="blended",g=g.replace(/\bblended\b/gi,"")),/openwho/i.test(m)?(L.platform="OpenWHO",g=g.replace(/openwho/gi,"")):/who academy/i.test(m)?(L.platform="WHO Academy",g=g.replace(/who academy/gi,"")):/hslp/i.test(m)&&(L.platform="HSLP",g=g.replace(/hslp/gi,"")),/member state|ministry/i.test(m)?L.audience="Member":/who staff/i.test(m)&&(L.audience="WHO"),g=g.replace(/\b(i need|i want|i'm looking for|looking for|find me|show me|a training|training|about|on|for)\b/gi,"").replace(/\s+/g," ").trim(),L.topic=g||"health emergency",L}async function A(){const u=p.trim();!u||!S||(h(""),await F(u))}return d("div",{class:"embed-container",children:[i!=="ready"&&d("div",{class:"loading-overlay",children:d("div",{class:"loading-content",children:[d("div",{class:"loading-title",children:"WHO PHHE Training Finder"}),d("div",{class:"loading-bar-container",children:d("div",{class:"loading-bar",style:{width:`${s}%`}})}),d("div",{class:"loading-text",children:_}),d("div",{class:"loading-percent",children:[s,"%"]})]})}),d("div",{class:`embed-main ${i!=="ready"?"hidden":""}`,children:[d("div",{class:"embed-header",children:d("div",{class:"embed-header-text",children:[d("span",{class:"embed-title",children:"WHO PHHE Training Finder"}),d("span",{class:"embed-subtitle",children:"WHO European Centre for Preparedness for Humanitarian and Health Emergencies (PHHE)"})]})}),d("div",{class:"embed-chat",children:d("div",{class:"embed-composer",children:[d("input",{type:"text",value:p,placeholder:"Describe the training you need...",disabled:!S,onInput:u=>h(u.target.value),onKeyDown:u=>{u.key==="Enter"&&A()}}),d("button",{class:"embed-send",disabled:!S,onClick:()=>void A(),children:"Search"})]})}),v&&v.length>0&&d("div",{class:"embed-results",children:[y&&d("div",{class:"embed-filters",children:[d("strong",{children:"Topic:"})," ",y.topic,y.language&&d("span",{class:"filter-pill",children:y.language}),y.modality&&d("span",{class:"filter-pill",children:y.modality}),y.platform&&d("span",{class:"filter-pill",children:y.platform})]}),v.map((u,m)=>{const g=b===m;return d("div",{class:`embed-card ${g?"expanded":""}`,onClick:()=>I(g?null:m),children:[d("div",{class:"card-header",children:[d("div",{class:"card-title",children:u.record.learningName}),d("span",{class:"card-expand-icon",children:g?"▼":"▶"})]}),!g&&d("div",{class:"card-desc",children:[u.record.description?.slice(0,120),u.record.description&&u.record.description.length>120?"...":""]}),d("div",{class:"card-tags",children:[u.record.technicalArea&&d("span",{class:"tag",children:u.record.technicalArea}),u.record.modality&&u.record.modality!=="unknown"&&d("span",{class:"tag",children:u.record.modality}),u.record.platform&&d("span",{class:"tag",children:u.record.platform}),u.record.languages.length>0&&d("span",{class:"tag",children:u.record.languages.slice(0,3).join(", ")})]}),g&&d("div",{class:"card-details",children:[u.record.description&&d("div",{class:"detail-row",children:[d("span",{class:"detail-label",children:"Description"}),d("p",{class:"detail-value",children:u.record.description})]}),u.record.intendedAudience&&d("div",{class:"detail-row",children:[d("span",{class:"detail-label",children:"Target Audience"}),d("p",{class:"detail-value",children:u.record.intendedAudience})]}),u.record.focusArea&&d("div",{class:"detail-row",children:[d("span",{class:"detail-label",children:"Focus Area"}),d("p",{class:"detail-value",children:u.record.focusArea})]}),u.record.languages.length>0&&d("div",{class:"detail-row",children:[d("span",{class:"detail-label",children:"Languages"}),d("p",{class:"detail-value",children:u.record.languages.join(", ")})]}),u.record.owner&&d("div",{class:"detail-row",children:[d("span",{class:"detail-label",children:"Owner"}),d("p",{class:"detail-value",children:u.record.owner})]}),u.record.developer&&d("div",{class:"detail-row",children:[d("span",{class:"detail-label",children:"Developer"}),d("p",{class:"detail-value",children:u.record.developer})]}),u.record.contactDetails&&d("div",{class:"detail-row",children:[d("span",{class:"detail-label",children:"Contact"}),d("p",{class:"detail-value",children:u.record.contactDetails})]}),u.record.normalizedLink&&d("a",{class:"card-link",href:u.record.normalizedLink,target:"_blank",rel:"noreferrer",onClick:L=>L.stopPropagation(),children:"Open training"})]})]},m)})]})]})]})}lt(d(Ft,{}),document.getElementById("app"));
//# sourceMappingURL=main-prcAybjE.js.map
